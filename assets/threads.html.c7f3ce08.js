import{_ as l,r as c,o as i,c as u,a as n,d as a,w as p,b as s,e}from"./app.94cd83f3.js";const k={},d=n("h1",{id:"\u7EBF\u7A0B\u4E0E\u7EBF\u7A0B\u6C60",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7EBF\u7A0B\u4E0E\u7EBF\u7A0B\u6C60","aria-hidden":"true"},"#"),s(" \u7EBF\u7A0B\u4E0E\u7EBF\u7A0B\u6C60")],-1),r=n("p",null,[n("img",{src:"https://s2.loli.net/2023/01/30/mQez6FX1lUDfBbc.png",alt:""})],-1),v=n("hr",null,null,-1),m={class:"table-of-contents"},h=e(`<hr><h2 id="\u4E00-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4E00-\u7EBF\u7A0B" aria-hidden="true">#</a> \u4E00. \u7EBF\u7A0B</h2><h3 id="_1-\u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_1-\u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u542F\u52A8" aria-hidden="true">#</a> 1. \u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u542F\u52A8</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">FutureTask</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThread</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. \u7EE7\u627FThread</span>
        <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// From Thread:Thread-0</span>
        <span class="token comment">// 2. \u5B9E\u73B0Runnable</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// From Runnable:Thread-1</span>
        <span class="token comment">// 3. \u5B9E\u73B0Callable,\u4F7F\u7528FutureTask ,\u6709\u8FD4\u56DE\u503C</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// From Callable:Thread-2</span>
        <span class="token comment">// 4. \u4F7F\u7528\u7EBF\u7A0B\u6C60ThreadPoolExecutor</span>
        <span class="token keyword">final</span> <span class="token class-name">ExecutorService</span> threadPool <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadPool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;From ThreadPool:&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// From ThreadPool:pool-1-thread-1</span>
        threadPool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;From Thread:&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;From Runnable:&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;From Callable:&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s2.loli.net/2023/01/30/TbpqFUAhS1GLHRB.png" alt=""></p><h3 id="_2-java\u4E2D\u7EBF\u7A0B\u7684\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#_2-java\u4E2D\u7EBF\u7A0B\u7684\u72B6\u6001" aria-hidden="true">#</a> 2. Java\u4E2D\u7EBF\u7A0B\u7684\u72B6\u6001</h3>`,6),b={href:"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.State.html",target:"_blank",rel:"noopener noreferrer"},w=e(`<ul><li><p><code>NEW</code></p><p><strong>\u65B0\u5EFA</strong>\uFF0C\u8FD8\u6CA1\u6709\u542F\u52A8</p></li><li><p><code>RUNNABLE</code></p><p><strong>\u5C31\u7EEA</strong>\uFF0C\u5728JVM\u4E2D\u6267\u884C\uFF0C\u4F46\u662F\u53EF\u80FD\u9700\u8981\u7B49\u5F85\u64CD\u4F5C\u7CFB\u7EDF\u7684\u8C03\u5EA6</p></li><li><p><code>BLOCKED</code></p><p><strong>\u963B\u585E</strong>(\u7B49\u5F85\u76D1\u89C6\u5668\u9501(monitor lock)\u963B\u585E)\uFF0C\u7B49\u5F85\u8FDB\u5165\u540C\u6B65\u5757\u6216\u65B9\u6CD5\uFF0C\u6216\u8005\u5728\u8C03\u7528<code>Object.wait()</code>\u540E\u7B49\u5F85\u91CD\u5165\u540C\u6B65\u5757\u6216\u65B9\u6CD5</p></li><li><p><code>WAITING</code></p><p><strong>\u7B49\u5F85</strong>\uFF0C\u5904\u4E8E\u7B49\u5F85\u7684\u7EBF\u7A0B\u6B63\u5728\u7B49\u5F85\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u7684\u64CD\u4F5C\uFF0C\u4F8B\u5982wait\u7B49\u5F85notify/notifyAll\uFF0C\u8C03\u7528\u5982\u4E0B\u65B9\u6CD5\u7EBF\u7A0B\u5C06\u8FDB\u5165\u7B49\u5F85\u72B6\u6001:</p><ul><li><code>Object.wait()</code> \u4E0D\u52A0\u8D85\u65F6</li><li><code>Thread.join()</code> \u4E0D\u52A0\u8D85\u65F6</li><li><code>LockSupport.park</code></li></ul></li><li><p><code>TIMED_WAITING</code></p><p><strong>\u8D85\u65F6\u7B49\u5F85</strong>\uFF0C\u8C03\u7528\u5982\u4E0B\u65B9\u6CD5\u5C06\u8FDB\u5165\u8D85\u65F6\u7B49\u5F85\u72B6\u6001:</p><ul><li><code>Thread.sleep</code></li><li><code>Object.wait(long timeout)</code></li><li><code>Thread.join(long millis)</code></li><li><code>LockSupport.parkNanos</code></li><li><code>LockSupport.parkUntil</code></li></ul></li><li><p><code>TERMINATED</code></p><p><strong>\u7EC8\u6B62</strong>\uFF0C\u7EBF\u7A0B\u5DF2\u5B8C\u6210\u6267\u884C</p></li></ul><p><img src="https://s2.loli.net/2023/01/30/Zzh9kE2lxcLSBKw.png" alt=""></p><h3 id="_3-\u7EBF\u7A0B\u7684\u4E2D\u65AD" tabindex="-1"><a class="header-anchor" href="#_3-\u7EBF\u7A0B\u7684\u4E2D\u65AD" aria-hidden="true">#</a> 3. \u7EBF\u7A0B\u7684\u4E2D\u65AD</h3><p>\u7EBF\u7A0B\u4E0D\u80FD\u88AB\u76F4\u63A5\u7EC8\u6B62\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u4E00\u4E2A\u4E2D\u65AD\u6807\u5FD7\u4F4D\uFF0C\u901A\u77E5\u88AB\u4E2D\u65AD\u7684\u7EBF\u7A0B\u81EA\u884C\u5904\u7406(\u5982\u629B\u51FA\u5F02\u5E38\uFF0C\u903B\u8F91\u7ED3\u675F\u7B49)</p><ul><li><p><code>Thread.interrupt()</code> \u8BBE\u7F6E\u4E2D\u65AD\u6807\u5FD7\u4F4D\u4E3Atrue\uFF0C\u5E76\u4E0D\u4F1A\u771F\u6B63\u4E2D\u65AD\u7EBF\u7A0B</p></li><li><p><code>Thread.interrupted()</code> \u5224\u65AD\u7EBF\u7A0B\u662F\u5426\u88AB\u4E2D\u65AD\uFF0C\u6CE8\u610F\u8C03\u7528\u4E24\u6B21\u65F6\uFF0C\u7B2C\u4E8C\u6B21\u4F1A\u8FD4\u56DEfalse\uFF08\u4F1A\u6E05\u9664\u6807\u5FD7\u4F4D\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Thread.isInterrupted()</code> \u5224\u65AD\u7EBF\u7A0B\u662F\u5426\u88AB\u4E2D\u65AD</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>\u6B63\u786E\u4E2D\u65AD\u7EBF\u7A0B\u793A\u4F8B(\u903B\u8F91\u7ED3\u675F)</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7EBF\u7A0B\u6CA1\u6709\u88AB\u4E2D\u65AD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7EBF\u7A0B\u88AB\u4E2D\u65AD\u4E86...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>thread<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u7EBF\u7A0B\u95F4\u7684\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#_4-\u7EBF\u7A0B\u95F4\u7684\u901A\u4FE1" aria-hidden="true">#</a> 4. \u7EBF\u7A0B\u95F4\u7684\u901A\u4FE1</h3><h4 id="_4-1-\u7B49\u5F85-\u901A\u77E5\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#_4-1-\u7B49\u5F85-\u901A\u77E5\u673A\u5236" aria-hidden="true">#</a> 4.1 \u7B49\u5F85/\u901A\u77E5\u673A\u5236</h4><p><code>synchronized + wait + notify/notifyAll</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadCommunication</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadA</span> threadA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ThreadB</span> threadB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        threadA<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadB<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
            A\u5148\u6267\u884C\uFF0C\u9047\u5230wait\u7B49\u5F85\uFF0C2\u79D2\u540EB\u6267\u884C\uFF0C\u9047\u5230notify\u5524\u9192A,B\u548CA\u7ED3\u675F
            Thread A start
            Thread B start
            Thread B end
            Thread A end
         */</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ThreadA</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread A start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread A end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ThreadB</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread B start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                lock<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread B end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-join" tabindex="-1"><a class="header-anchor" href="#_4-2-join" aria-hidden="true">#</a> 4.2 <code>join</code></h4><p><code>Thread#join(long)</code>,\u4F7F\u5F53\u524D\u7EBF\u7A0B\u8FDB\u5165&quot;\u7B49\u5F85&quot;\u72B6\u6001\uFF0C\u7B49join\u7684\u7EBF\u7A0B\u5B8C\u6210\u540E\uFF0C\u518D\u7EE7\u7EED\u6267\u884C\u5F53\u524D\u7EBF\u7A0B</p><p><code>join</code>\u65B9\u6CD5\u901A\u8FC7<code>Object.wait()</code>\u5B9E\u73B0</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadCommunication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadC</span> threadC <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadC<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadC<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5F53threadC\u5B8C\u6210\u540E\u624D\u80FD\u7EE7\u7EED\u6267\u884C</span>
				
        <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ThreadC</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread C start,\u7B49\u5F853\u79D2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3_000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Thread C end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-3-threadlocal\u548Cinheritablethreadlocal" tabindex="-1"><a class="header-anchor" href="#_4-3-threadlocal\u548Cinheritablethreadlocal" aria-hidden="true">#</a> 4.3 <code>ThreadLocal</code>\u548C<code>InheritableThreadLocal</code></h4><p><code>ThreadLocal</code>\u662F\u4E00\u4E2A\u672C\u5730\u7EBF\u7A0B\u526F\u672C\u53D8\u91CF\u5DE5\u5177\u7C7B</p><p><code>InheritableThreadLocal</code>\u7EE7\u627F\u81EA<code>ThreadLocal</code>,\u4E0D\u4EC5\u5F53\u524D\u7EBF\u7A0B\u53EF\u4EE5\u5B58\u53D6\u526F\u672C\u503C\uFF0C\u5B83\u7684\u5B50\u7EBF\u7A0B\u4E5F\u53EF\u4EE5\u5B58\u53D6\u8FD9\u4E2A\u526F\u672C\u503C</p><h4 id="_4-4-\u4FE1\u53F7\u91CF-volatile" tabindex="-1"><a class="header-anchor" href="#_4-4-\u4FE1\u53F7\u91CF-volatile" aria-hidden="true">#</a> 4.4 \u4FE1\u53F7\u91CF\uFF08<code>volatile</code>\uFF09</h4><p>volatile\u4FDD\u8BC1\u4E86\u53EF\u89C1\u6027\u548C\u6709\u5E8F\u6027\uFF0C\u7EBF\u7A0B\u4FEE\u6539\u4E00\u4E2A\u53D8\u91CF\u65F6\uFF0C\u5176\u4ED6\u7EBF\u7A0B\u7ACB\u523B\u53EF\u89C1</p><h4 id="_4-5-\u9501-\u3001\u901A\u4FE1\u5DE5\u5177\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-5-\u9501-\u3001\u901A\u4FE1\u5DE5\u5177\u7C7B" aria-hidden="true">#</a> 4.5 \u9501 \u3001\u901A\u4FE1\u5DE5\u5177\u7C7B</h4><p>\u9501\u5982Lock\uFF0C\u901A\u4FE1\u5DE5\u5177\u7C7B\u5982CountDownLatch</p><h3 id="_5-\u7EBF\u7A0B\u7684\u5E38\u89C1\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_5-\u7EBF\u7A0B\u7684\u5E38\u89C1\u65B9\u6CD5" aria-hidden="true">#</a> 5. \u7EBF\u7A0B\u7684\u5E38\u89C1\u65B9\u6CD5</h3><ul><li><p><code>currentThread</code> \u8FD4\u56DE\u5F53\u524D\u7EBF\u7A0B</p></li><li><p><code>yield</code> \u653E\u5F03\u5F53\u524D\u7684CPU\u8D44\u6E90\uFF0C\u5C06\u5B83\u8BA9\u7ED9\u5176\u4ED6\u7684\u4EFB\u52A1\u53BB\u5360\u7528CPU\u6267\u884C\u65F6\u95F4\u3002\u4F46\u653E\u5F03\u7684\u65F6\u95F4\u4E0D\u786E\u5B9A\uFF0C\u6709\u53EF\u80FD\u521A\u521A\u653E\u5F03\uFF0C\u9A6C\u4E0A\u53C8\u83B7\u5F97CPU\u65F6\u95F4\u7247</p></li><li><p><code>sleep</code> \u5728\u6307\u5B9A\u65F6\u95F4\u5185\u8BA9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u4F11\u7720</p><blockquote><p>Thread.sleep \u548C Object.wait\u7684\u533A\u522B</p><ul><li>sleep\u91CA\u653ECPU\u8D44\u6E90\u4F46\u662F\u4E0D\u91CA\u653E\u9501\uFF0Cwait\u90FD\u91CA\u653E</li><li>sleep\u5FC5\u987B\u6307\u5B9A\u65F6\u95F4\uFF0Cwait\u53EF\u4E0D\u6307\u5B9A</li><li>sleep\u53EF\u4EE5\u5728\u4EFB\u610F\u4F4D\u7F6E\uFF0Cwait\u53EA\u80FD\u65B9\u6CD5\u540C\u6B65\u5757\u6216\u540C\u6B65\u65B9\u6CD5\u4E2D</li></ul></blockquote></li><li><p><code>interrupt</code></p><p>\u7EBF\u7A0B\u4E2D\u65AD\u6807\u5FD7\u4F4D</p></li><li><p><code>join</code></p><p>\u4F7F\u5F53\u524D\u7EBF\u7A0B\u8FDB\u5165&quot;\u7B49\u5F85&quot;\u72B6\u6001\uFF0C\u7B49join\u7684\u7EBF\u7A0B\u5B8C\u6210\u540E\uFF0C\u518D\u7EE7\u7EED\u6267\u884C\u5F53\u524D\u7EBF\u7A0B</p></li><li><p><code>setDaemon</code></p><p>\u8BBE\u7F6E\u4E3A\u540E\u53F0\u7EBF\u7A0B</p></li></ul><hr><h2 id="\u4E8C-\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> \u4E8C. \u7EBF\u7A0B\u6C60</h2><h3 id="_1-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#_1-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> 1. \u4E3A\u4EC0\u4E48\u4F7F\u7528\u7EBF\u7A0B\u6C60</h3><p>\u5982\u679C\u4E3A\u6BCF\u4E00\u4E2A\u4EFB\u52A1\u90FD\u5206\u914D\u4E00\u4E2A\u7EBF\u7A0B\u4F1A\u4EA7\u751F\u4E00\u4E9B\u95EE\u9898\uFF0C\u5C24\u5176\u662F\u5728\u9700\u8981\u521B\u5EFA\u5927\u91CF\u7EBF\u7A0B\u7684\u573A\u666F\uFF0C\u4E3B\u8981\u5982\u4E0B\uFF1A</p><ul><li><p><strong>\u7EBF\u7A0B\u751F\u547D\u5468\u671F\u7684\u5F00\u9500\u975E\u5E38\u9AD8</strong></p><p>\u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u9500\u6BC1\u9700\u8981\u65F6\u95F4\uFF0C\u9700\u8981JVM\u548C\u64CD\u4F5C\u7CFB\u7EDF\u8F85\u52A9</p></li><li><p><strong>\u8D44\u6E90\u6D88\u8017</strong></p><p>\u6D3B\u8DC3\u7684\u7EBF\u7A0B\u540E\u6D88\u8017\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u5C24\u5176\u662F\u5185\u5B58\u3002\u5982\u679C\u53EF\u8FD0\u884C\u7684\u7EBF\u7A0B\u6570\u91CF\u591A\u4E8E\u53EF\u7528\u5904\u7406\u5668\u7684\u6570\u91CF\uFF0C\u90A3\u4E48\u6709\u4E9B\u7EBF\u7A0B\u5C06\u95F2\u7F6E\uFF0C\u5927\u91CF\u95F2\u7F6E\u7684\u7EBF\u7A0B\u8FD8\u4F1A\u5360\u7528\u8BB8\u591A\u5185\u5B58\uFF0C\u7ED9GC\u5E26\u6765\u538B\u529B\uFF0C\u800C\u4E14\u5927\u91CF\u7EBF\u7A0B\u5728\u7ADE\u4E89CPU\u8D44\u6E90\u65F6\u8FD8\u5C06\u4EA7\u751F\u5176\u4ED6\u7684\u6027\u80FD\u5F00\u9500</p></li><li><p><strong>\u7A33\u5B9A\u6027</strong></p><p>\u53EF\u521B\u5EFA\u7EBF\u7A0B\u7684\u6570\u91CF\u4F1A\u53D7\u5230\u64CD\u4F5C\u7CFB\u7EDF\u3001JVM\u53C2\u6570\u7B49\u7684\u9650\u5236\uFF0C\u8D85\u8FC7\u9650\u5236\u4F1A\u5F15\u53D1\u5F02\u5E38\u4E0D\u7A33\u5B9A</p></li></ul><p>\u90A3\u4E48\u5728\u4F7F\u7528\u7EBF\u7A0B\u6C60\u65F6\u4F1A\u6709\u5982\u4E0B\u7684\u4F18\u52BF\uFF1A</p><ul><li>\u53EF\u4EE5<strong>\u590D\u7528\u5DF2\u521B\u5EFA\u7684\u7EBF\u7A0B</strong></li><li>\u53EF\u4EE5<strong>\u63A7\u5236\u5E76\u53D1\u7684\u6570\u91CF</strong></li><li>\u53EF\u4EE5\u5BF9\u7EBF\u7A0B\u505A<strong>\u7EDF\u4E00\u7BA1\u7406</strong>\uFF08\u5206\u914D\u3001\u8C03\u4F18\u3001\u76D1\u63A7\u7B49\uFF09</li></ul><h3 id="_2-\u7EBF\u7A0B\u6C60\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_2-\u7EBF\u7A0B\u6C60\u7684\u4F7F\u7528" aria-hidden="true">#</a> 2. \u7EBF\u7A0B\u6C60\u7684\u4F7F\u7528</h3><p><img src="https://s2.loli.net/2023/01/31/IbvM3KwAJGUqBmt.png" alt=""></p><h4 id="_2-1-\u521B\u5EFA\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#_2-1-\u521B\u5EFA\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> 2.1 \u521B\u5EFA\u7EBF\u7A0B\u6C60</h4>`,34),f={href:"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"ThreadPoolTaskExecutor",-1),g=e(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ThreadPoolExecutor</span> threadPool <span class="token operator">=</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-2-\u5411\u7EBF\u7A0B\u6C60\u63D0\u4EA4\u4EFB\u52A1" tabindex="-1"><a class="header-anchor" href="#_2-2-\u5411\u7EBF\u7A0B\u6C60\u63D0\u4EA4\u4EFB\u52A1" aria-hidden="true">#</a> 2.2 \u5411\u7EBF\u7A0B\u6C60\u63D0\u4EA4\u4EFB\u52A1</h4><ul><li><p>\u63D0\u4EA4\u4E0D\u9700\u8981\u8FD4\u56DE\u503C\u7684\u4EFB\u52A1</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>threadPool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// print: pool-1-thread-1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u63D0\u4EA4\u9700\u8981\u8FD4\u56DE\u503C\u7684\u4EFB\u52A1</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> threadPool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// print: pool-1-thread-1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_2-3-\u5173\u95ED\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#_2-3-\u5173\u95ED\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> 2.3 \u5173\u95ED\u7EBF\u7A0B\u6C60</h4><ul><li><p><code>threadPool.shutdown()</code></p><p>\u5C06\u7EBF\u7A0B\u6C60\u7684\u72B6\u6001\u8BBE\u7F6E\u4E3A<code>SHUTDOWN</code>,\u7136\u540E\u4E2D\u65AD\u6240\u6709\u6CA1\u6709\u6B63\u5728\u6267\u884C\u4EFB\u52A1\u7684\u7EBF\u7A0B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> mainLock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainLock<span class="token punctuation">;</span>
        mainLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">checkShutdownAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">advanceRunState</span><span class="token punctuation">(</span><span class="token constant">SHUTDOWN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">interruptIdleWorkers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">onShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hook for ScheduledThreadPoolExecutor</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            mainLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">tryTerminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>threadPool.shutdownNow()</code></p><p>\u5C06\u7EBF\u7A0B\u6C60\u7684\u72B6\u6001\u8BBE\u7F6E\u4E3A<code>STOP</code>\uFF0C\u7136\u540E\u5C1D\u8BD5\u505C\u6B62\u6240\u6709\u7684\u6B63\u5728\u6267\u884C\u6216\u8005\u6682\u505C\u4EFB\u52A1\u7684\u7EBF\u7A0B\uFF0C\u5E76\u8FD4\u56DE\u7B49\u5F85\u6267\u884C\u4EFB\u52A1\u7684\u5217\u8868</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> <span class="token function">shutdownNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> mainLock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainLock<span class="token punctuation">;</span>
        mainLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">checkShutdownAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">advanceRunState</span><span class="token punctuation">(</span><span class="token constant">STOP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">interruptWorkers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            tasks <span class="token operator">=</span> <span class="token function">drainQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            mainLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">tryTerminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tasks<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><code>shutdown</code>\u548C<code>shutdownNow</code>\u7684\u5F02\u540C:</p><ul><li>\u90FD\u662F\u901A\u8FC7\u904D\u5386\u7EBF\u7A0B\u6C60\u4E2D\u7684\u7EBF\u7A0B\uFF0C\u7136\u540E\u8C03\u7528<code>t.interrupt()</code>\u6765\u4E2D\u65AD\u7EBF\u7A0B\uFF1B</li><li>\u4E24\u4E2A\u65B9\u6CD5\u90FD\u4F1A\u4F7F<code>isShutdown</code>\u8FD4\u56DEtrue\uFF1B</li><li>\u5F53\u6240\u6709\u7684\u4EFB\u52A1\u90FD\u5DF2\u5173\u95ED\u540E\uFF0C\u624D\u8868\u793A\u7EBF\u7A0B\u6C60\u5173\u95ED\u6210\u529F\uFF0C\u8FD9\u65F6<code>isTerminated</code>\u65B9\u6CD5\u4F1A\u8FD4\u56DEtrue\uFF1B</li><li>\u901A\u5E38\u7528<code>shutdown</code>\u6765\u5173\u95ED\u7EBF\u7A0B\u6C60\uFF0C\u5982\u679C\u4EFB\u52A1\u4E0D\u4E00\u5B9A\u8981\u6267\u884C\u5B8C\u53EF\u4EE5\u8C03\u7528<code>shutdownNow</code></li></ul><blockquote><p>\u5982\u679C\u5728\u5DE5\u7A0B\u4E2D\uFF0C\u7EBF\u7A0B\u6C60\u5C3D\u91CF\u4E0D\u8981\u968F\u7740\u8BF7\u6C42\u521B\u5EFA\u548C\u5173\u95ED\uFF08\u9891\u7E41\u7684\u521B\u5EFA\u5173\u95ED\u7EBF\u7A0B\u6C60\u662F\u4E00\u4E2A\u4E0D\u5C0F\u7684\u5F00\u9500\uFF09\uFF0C\u53EF\u4EE5\u968F\u7740\u9879\u76EE\u521B\u5EFA\u548C\u5173\u95ED\u3002\u7279\u6B8A\u573A\u666F\u4E0B\uFF0C\u5982\u6BCF\u5929\u5B9A\u65F6\u8DD1\u4E00\u6B21\u4EFB\u52A1\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u7531\u65B9\u6CD5\u7BA1\u7406\u751F\u547D\u5468\u671F\u3002</p><p>\u300AJava\u5E76\u53D1\u7F16\u7A0B\u5B9E\u6218\u300B\uFF087.2.4 \u793A\u4F8B:\u53EA\u6267\u884C\u4E00\u6B21\u7684\u670D\u52A1 \uFF09\uFF1A \u67D0\u4E2A\u65B9\u6CD5\u9700\u8981\u5904\u7406\u4E00\u6279\u4EFB\u52A1\u5E76\u4E14\u5F53\u6240\u6709\u4EFB\u52A1\u90FD\u5904\u7406\u5B8C\u6210\u540E\u624D\u8FD4\u56DE\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E2A\u79C1\u6709\u7684Executor\u6765\u7B80\u5316\u670D\u52A1\u7684\u751F\u547D\u5468\u671F\u7BA1\u7406\uFF0C\u5176\u4E2D\u8BE5Executor\u7684\u751F\u547D\u5468\u671F\u662F\u7531\u8FD9\u4E2A\u65B9\u6CD5\u6765\u63A7\u5236</p></blockquote><h3 id="_3-\u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3-\u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u539F\u7406" aria-hidden="true">#</a> 3. \u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u539F\u7406</h3><h4 id="_3-1-\u7EBF\u7A0B\u6C60\u7684\u6838\u5FC3\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_3-1-\u7EBF\u7A0B\u6C60\u7684\u6838\u5FC3\u53C2\u6570" aria-hidden="true">#</a> 3.1 \u7EBF\u7A0B\u6C60\u7684\u6838\u5FC3\u53C2\u6570</h4><h4 id="_3-2-\u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-2-\u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a> 3.2 \u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u6D41\u7A0B</h4><h4 id="_3-3-execute\u6E90\u7801\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_3-3-execute\u6E90\u7801\u5206\u6790" aria-hidden="true">#</a> 3.3 <code>execute</code>\u6E90\u7801\u5206\u6790</h4><p>\u8054\u60F3\u8BB0\u5FC6</p><h3 id="_4-executor\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#_4-executor\u6846\u67B6" aria-hidden="true">#</a> 4. Executor\u6846\u67B6</h3><h3 id="_5-\u7EBF\u7A0B\u6C60\u7684\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_5-\u7EBF\u7A0B\u6C60\u7684\u76D1\u63A7" aria-hidden="true">#</a> 5. \u7EBF\u7A0B\u6C60\u7684\u76D1\u63A7</h3><h3 id="_6-\u52A8\u6001\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#_6-\u52A8\u6001\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> 6. \u52A8\u6001\u7EBF\u7A0B\u6C60</h3>`,16);function _(T,x){const t=c("router-link"),o=c("ExternalLinkIcon");return i(),u("div",null,[d,r,v,n("nav",m,[n("ul",null,[n("li",null,[a(t,{to:"#\u4E00-\u7EBF\u7A0B"},{default:p(()=>[s("\u4E00. \u7EBF\u7A0B")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_1-\u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u542F\u52A8"},{default:p(()=>[s("1. \u7EBF\u7A0B\u7684\u521B\u5EFA\u548C\u542F\u52A8")]),_:1})]),n("li",null,[a(t,{to:"#_2-java\u4E2D\u7EBF\u7A0B\u7684\u72B6\u6001"},{default:p(()=>[s("2. Java\u4E2D\u7EBF\u7A0B\u7684\u72B6\u6001")]),_:1})]),n("li",null,[a(t,{to:"#_3-\u7EBF\u7A0B\u7684\u4E2D\u65AD"},{default:p(()=>[s("3. \u7EBF\u7A0B\u7684\u4E2D\u65AD")]),_:1})]),n("li",null,[a(t,{to:"#_4-\u7EBF\u7A0B\u95F4\u7684\u901A\u4FE1"},{default:p(()=>[s("4. \u7EBF\u7A0B\u95F4\u7684\u901A\u4FE1")]),_:1})]),n("li",null,[a(t,{to:"#_5-\u7EBF\u7A0B\u7684\u5E38\u89C1\u65B9\u6CD5"},{default:p(()=>[s("5. \u7EBF\u7A0B\u7684\u5E38\u89C1\u65B9\u6CD5")]),_:1})])])]),n("li",null,[a(t,{to:"#\u4E8C-\u7EBF\u7A0B\u6C60"},{default:p(()=>[s("\u4E8C. \u7EBF\u7A0B\u6C60")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#_1-\u4E3A\u4EC0\u4E48\u4F7F\u7528\u7EBF\u7A0B\u6C60"},{default:p(()=>[s("1. \u4E3A\u4EC0\u4E48\u4F7F\u7528\u7EBF\u7A0B\u6C60")]),_:1})]),n("li",null,[a(t,{to:"#_2-\u7EBF\u7A0B\u6C60\u7684\u4F7F\u7528"},{default:p(()=>[s("2. \u7EBF\u7A0B\u6C60\u7684\u4F7F\u7528")]),_:1})]),n("li",null,[a(t,{to:"#_3-\u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u539F\u7406"},{default:p(()=>[s("3. \u7EBF\u7A0B\u6C60\u7684\u5DE5\u4F5C\u539F\u7406")]),_:1})]),n("li",null,[a(t,{to:"#_4-executor\u6846\u67B6"},{default:p(()=>[s("4. Executor\u6846\u67B6")]),_:1})]),n("li",null,[a(t,{to:"#_5-\u7EBF\u7A0B\u6C60\u7684\u76D1\u63A7"},{default:p(()=>[s("5. \u7EBF\u7A0B\u6C60\u7684\u76D1\u63A7")]),_:1})]),n("li",null,[a(t,{to:"#_6-\u52A8\u6001\u7EBF\u7A0B\u6C60"},{default:p(()=>[s("6. \u52A8\u6001\u7EBF\u7A0B\u6C60")]),_:1})])])])])]),h,n("p",null,[s("\u53C2\u8003: "),n("a",b,[s("Thread.State"),a(o)])]),w,n("p",null,[s("\u53EF\u4EE5\u901A\u8FC7"),n("a",f,[s("ThreadPoolExecutor"),a(o)]),s("\u6765\u521B\u5EFA\u7EBF\u7A0B\u6C60\uFF08\u6216\u8005\u901A\u8FC7\u5176\u4ED6\u65B9\u5F0F\uFF0C\u5982Spring\u4E2D\u7684"),y,s("\uFF09\uFF0C\u4F8B\u5982")]),g])}const S=l(k,[["render",_],["__file","threads.html.vue"]]);export{S as default};
