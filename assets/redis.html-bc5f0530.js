import{_ as r,V as i,W as s,Z as e,a2 as d,Y as t,a3 as a,F as c}from"./framework-d0eb6f2b.js";const l={},n=e("h1",{id:"redis",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#redis","aria-hidden":"true"},"#"),d(" Redis")],-1),h=e("h3",{id:"_1-redisæœ‰å“ªäº›æ•°æ®ç±»å‹",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-redisæœ‰å“ªäº›æ•°æ®ç±»å‹","aria-hidden":"true"},"#"),d(" 1. Redisæœ‰å“ªäº›æ•°æ®ç±»å‹")],-1),_={href:"https://redis.io/docs/data-types/",target:"_blank",rel:"noopener noreferrer"},p={id:"_1-1-string",tabindex:"-1"},u=e("a",{class:"header-anchor",href:"#_1-1-string","aria-hidden":"true"},"#",-1),b={href:"https://redis.io/docs/data-types/strings/",target:"_blank",rel:"noopener noreferrer"},f=e("code",null,"string",-1),g=a("<p>æ•°æ®ç»“æ„: <code>SDS</code>,åŒ…æ‹¬<code>len</code>:å·²ç”¨çš„é•¿åº¦ï¼Œ<code>alloc</code>: åˆ†é…çš„ç©ºé—´é•¿åº¦ï¼Œ<code>flags</code>,<code>buf[]</code>: å®é™…å­˜å‚¨çš„å†…å®¹</p><p>ä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿ<code>char</code>? <code>SDS</code>è®°å½•äº†ä½¿ç”¨é•¿åº¦å’Œåˆ†é…ç©ºé—´å¤§å°ï¼Œé¿å…äº†éå†ï¼Œé™ä½å¼€é”€</p>",2),x={id:"_1-2-list",tabindex:"-1"},k=e("a",{class:"header-anchor",href:"#_1-2-list","aria-hidden":"true"},"#",-1),y={href:"https://redis.io/docs/data-types/",target:"_blank",rel:"noopener noreferrer"},m=e("code",null,"list",-1),R=e("p",null,"åº”ç”¨åœºæ™¯: æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ–‡ç« åˆ—è¡¨",-1),A=e("p",null,"æ•°æ®ç»“æ„:",-1),v=e("ul",null,[e("li",null,[d("åŒå‘é“¾è¡¨(ä¸ºäº†é¿å…"),e("code",null,"ziplist"),d("çº§è”æ›´æ–°ï¼Œé‡‡ç”¨"),e("code",null,"quicklist"),d("+"),e("code",null,"ziplist"),d(")")]),e("li",null,"å‹ç¼©åˆ—è¡¨")],-1),O={id:"_1-3-set",tabindex:"-1"},q=e("a",{class:"header-anchor",href:"#_1-3-set","aria-hidden":"true"},"#",-1),B={href:"https://redis.io/docs/data-types/sets/",target:"_blank",rel:"noopener noreferrer"},F=e("code",null,"set",-1),D=e("p",null,"åº”ç”¨åœºæ™¯: ç”¨æˆ·æ ‡ç­¾ï¼Œéšæœºæ•°",-1),C=e("p",null,[d("æ•°æ®ç»“æ„: å¦‚æœå­˜å‚¨çš„éƒ½æ˜¯"),e("code",null,"int"),d("ç±»å‹ï¼Œåˆ™æ˜¯"),e("code",null,"int set"),d("ï¼Œå…¶ä»–ä¸º"),e("code",null,"hash table")],-1),E=e("ul",null,[e("li",null,"å“ˆå¸Œè¡¨"),e("li",null,"æ•´æ•°é›†åˆ")],-1),S={id:"_1-4-hash",tabindex:"-1"},w=e("a",{class:"header-anchor",href:"#_1-4-hash","aria-hidden":"true"},"#",-1),I={href:"https://redis.io/docs/data-types/hashes/",target:"_blank",rel:"noopener noreferrer"},K=e("code",null,"hash",-1),N=a("<p>æ•°æ®ç»“æ„:</p><ul><li>å“ˆå¸Œè¡¨</li><li>å‹ç¼©åˆ—è¡¨</li></ul><p>å“ˆå¸Œå†²çªæ—¶é‡‡ç”¨é“¾å¼å“ˆå¸Œ</p><p><strong>ä½•æ—¶è§¦å‘<code>rehash</code>ï¼Ÿ</strong></p><ul><li>æ ¹æ®hashè¡¨çš„è´Ÿè½½å› å­å’Œèƒ½å¦è¿›è¡Œ<code>rehash</code>æ ‡è¯†(<code>rehashidx</code>)åˆ¤æ–­</li><li>æ ¹æ®<code>RDB</code>å’Œ<code>AOF</code>æ‰§è¡Œæƒ…å†µï¼Œå¯ç”¨æˆ–è€…ç¦ç”¨<code>rehash</code></li><li><code>rehash</code>æ‰©å®¹æ˜¯æ‰©2å€</li></ul><p><strong>æ¸è¿›å¼hashï¼Ÿ</strong></p><p>å½“é“¾é•¿åº¦è¿‡å¤§æ—¶ï¼Œé‡‡ç”¨æ¸è¿›å¼rehashï¼š</p><ul><li>ä¸¤ä¸ªå“ˆå¸Œè¡¨(<code>ht[0]</code>å’Œ<code>ht[1]</code>)äº¤æ›¿ä½¿ç”¨</li><li>æ­£å¸¸æ—¶å†™å…¥åˆ°<code>ht[0]</code>,å½“<code>rehash</code>æ—¶å°†é”®å€¼è¿ç§»åˆ°<code>ht[</code>]</li><li>å®Œæˆå<code>ht[0]</code>é‡Šæ”¾ï¼Œå°†<code>ht[1]</code>åœ°å€èµ‹å€¼ç»™<code>ht[0]</code></li></ul>",8),M={id:"_1-5-sorted-set",tabindex:"-1"},z=e("a",{class:"header-anchor",href:"#_1-5-sorted-set","aria-hidden":"true"},"#",-1),L={href:"https://redis.io/docs/data-types/sorted-sets/",target:"_blank",rel:"noopener noreferrer"},W=e("code",null,"sorted set",-1),G=e("p",null,"åº”ç”¨åœºæ™¯: æ’è¡Œæ¦œï¼Œç‚¹èµ",-1),V=e("p",null,"æ•°æ®ç»“æ„ï¼š",-1),Y=e("ul",null,[e("li",null,"å“ˆå¸Œè¡¨: å­˜memberå’Œscoreçš„å…³ç³»"),e("li",null,[d("è·³è¡¨: å­˜key (å½“"),e("code",null,"zset"),d("æ•°æ®å°‘æ˜¯ç”¨"),e("code",null,"ziplist"),d("ï¼Œä¸ºäº†çœå†…å­˜)")])],-1),H={id:"_1-6-stream",tabindex:"-1"},P=e("a",{class:"header-anchor",href:"#_1-6-stream","aria-hidden":"true"},"#",-1),Q={href:"https://redis.io/docs/data-types/streams/",target:"_blank",rel:"noopener noreferrer"},j=e("code",null,"Stream",-1),T=e("blockquote",null,[e("p",null,"A Redis stream is a data structure that acts like an append-only log. You can use streams to record and simultaneously syndicate events in real time.")],-1),Z=e("p",null,"ç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—",-1),J={id:"_1-7-geo-hash",tabindex:"-1"},U=e("a",{class:"header-anchor",href:"#_1-7-geo-hash","aria-hidden":"true"},"#",-1),X={href:"https://redis.io/docs/data-types/geospatial/",target:"_blank",rel:"noopener noreferrer"},$=e("code",null,"Geo Hash",-1),ee=e("p",null,"å­˜å‚¨åœ°ç†ä½ç½®",-1),de={id:"_1-8-bitmap",tabindex:"-1"},oe=e("a",{class:"header-anchor",href:"#_1-8-bitmap","aria-hidden":"true"},"#",-1),te={href:"https://redis.io/docs/data-types/bitmaps/",target:"_blank",rel:"noopener noreferrer"},ae=e("code",null,"bitmap",-1),re=e("p",null,"ä½å›¾ï¼Œå¯ç”¨äºç­¾åˆ°ç­‰",-1),ie={id:"_1-9-bitfield",tabindex:"-1"},se=e("a",{class:"header-anchor",href:"#_1-9-bitfield","aria-hidden":"true"},"#",-1),ce={href:"https://redis.io/docs/data-types/bitfields/",target:"_blank",rel:"noopener noreferrer"},le=e("code",null,"bitfield",-1),ne={id:"_1-10-hyperloglog",tabindex:"-1"},he=e("a",{class:"header-anchor",href:"#_1-10-hyperloglog","aria-hidden":"true"},"#",-1),_e={href:"https://redis.io/docs/data-types/hyperloglogs/",target:"_blank",rel:"noopener noreferrer"},pe=e("code",null,"HyperLogLog",-1),ue=e("p",null,"åŸºæ•°è¿‘ä¼¼ç»Ÿè®¡ï¼Œä¾‹å¦‚ç½‘ç»œçš„uv",-1),be=e("h4",{id:"_1-11-åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-11-åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•","aria-hidden":"true"},"#"),d(" 1.11 åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•")],-1),fe={href:"https://redis.io/docs/modules/",target:"_blank",rel:"noopener noreferrer"},ge={href:"https://redis.io/docs/stack/bloom/",target:"_blank",rel:"noopener noreferrer"},xe=e("code",null,"RedisBloom",-1),ke={href:"https://github.com/brandur/redis-cell",target:"_blank",rel:"noopener noreferrer"},ye=e("code",null,"redis-cell",-1),me={id:"_2-ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥",tabindex:"-1"},Re=e("a",{class:"header-anchor",href:"#_2-ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥","aria-hidden":"true"},"#",-1),Ae={href:"https://redis.io/docs/manual/eviction/",target:"_blank",rel:"noopener noreferrer"},ve=a('<h4 id="_2-1-è¿‡æœŸç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-1-è¿‡æœŸç­–ç•¥" aria-hidden="true">#</a> 2.1 è¿‡æœŸç­–ç•¥</h4><p>Redisé‡‡ç”¨å®šæœŸè¿‡æœŸå’Œæƒ°æ€§è¿‡æœŸ</p><ul><li>å®šæœŸè¿‡æœŸï¼š æ¯éš”ä¸€ç‚¹æ—¶é—´ï¼Œä¼šæ‰«æä¸€å®šæ•°é‡çš„<code>expires</code>å­—æ®µä¸­çš„éƒ¨åˆ†keyï¼Œå¹¶æ¸…é™¤å·²è¿‡æœŸçš„key</li><li>æƒ°æ€§è¿‡æœŸï¼š åœ¨keyè¢«è®¿é—®æ—¶ï¼Œå¦‚æœå‘ç°å·²è¿‡æœŸï¼Œå°±ä»å†…å­˜ä¸­åˆ é™¤</li></ul><h4 id="_2-2-æ·˜æ±°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-2-æ·˜æ±°ç­–ç•¥" aria-hidden="true">#</a> 2.2 æ·˜æ±°ç­–ç•¥</h4><p><code>maxmemory</code>ï¼šRediså¯åŠ¨æ—¶æŒ‰éœ€ç”³è¯·å†…å­˜ï¼Œä¸”Redisä¸ä¼šè¶…è¿‡<code>maxmemory</code>ï¼Œå¦‚æœç³»ç»Ÿå†…å­˜å¿«æ»¡äº†ï¼Œæœ‰<code>swap</code>åˆ™<code>swap</code>ï¼Œæ— <code>swap</code>åˆ™<code>OOM</code>,å½“è¶‹è¿‘<code>maxmemory</code>æ—¶åˆ™è¿›è¡Œç¼“å­˜æ·˜æ±°</p><ul><li><code>noeviction </code>: é»˜è®¤ï¼Œä¸é©±é€ï¼Œæ–°å†™å…¥å°±æŠ¥é”™</li><li><code>allkeys-</code>ï¼š ä»æ‰€æœ‰çš„keyä¸­ <ul><li><code>random</code>: éšæœºæ·˜æ±°ï¼Œå¸Œæœ›è¯·æ±‚ç¬¦åˆå‡åŒ€åˆ†å¸ƒ</li><li><code>lru</code>ï¼š æœ€è¿‘æœ€å°‘æ·˜æ±°ï¼Œä¸ç¡®å®šæ—¶å¯é‡‡ç”¨ï¼Œå†·çƒ­æ•°æ®äº¤æ¢</li><li><code>lfu</code>: æœ€ä¸ç»å¸¸ä½¿ç”¨</li></ul></li><li><code>volatile-</code>: ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ <ul><li><code>random</code></li><li><code>lru</code></li><li><code>lfu</code></li><li><code>ttl</code>: æ ¹æ®è¿‡æœŸæ—¶é—´ï¼Œè¶Šæ—©è¶Šå…ˆæ·˜æ±°</li></ul></li></ul>',6),Oe={id:"_3-æŒä¹…åŒ–",tabindex:"-1"},qe=e("a",{class:"header-anchor",href:"#_3-æŒä¹…åŒ–","aria-hidden":"true"},"#",-1),Be={href:"https://redis.io/docs/manual/persistence/",target:"_blank",rel:"noopener noreferrer"},Fe=a('<blockquote><p>æŒä¹…åŒ–æ˜¯æŒ‡å°†æ•°æ®å†™å…¥åˆ°æŒä¹…å­˜å‚¨ï¼Œä¾‹å¦‚ç£ç›˜</p></blockquote><h4 id="_3-1-æœ‰å“ªå‡ ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-æœ‰å“ªå‡ ç§æ–¹å¼" aria-hidden="true">#</a> 3.1 æœ‰å“ªå‡ ç§æ–¹å¼</h4><ul><li><code>No persistence</code></li><li><code>RDB (Redis Databases)</code> : åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…æ‰§è¡Œæ•°æ®çš„æ—¶é—´ç‚¹å¿«ç…§</li><li><code>AOF (Append Only File)</code>: è®°å½•æ¯ä¸ªå†™å…¥æ“ä½œï¼Œåœ¨æœåŠ¡å¯åŠ¨æ—¶é‡æ”¾ï¼Œé‡å»ºåŸå§‹æ•°æ®ï¼Œå½“æ—¥å¿—å˜å¾—è¿‡å¤§æ—¶ï¼ŒRediså¯ä»¥åœ¨åå°é‡å†™æ—¥å¿—</li><li><code>RDB+AOF</code></li></ul><h4 id="_3-2-é€‰æ‹©å“ªç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-2-é€‰æ‹©å“ªç§æ–¹å¼" aria-hidden="true">#</a> 3.2 é€‰æ‹©å“ªç§æ–¹å¼</h4><ul><li>ä¸èƒ½ä¸¢å¤±: <code>RDB+AOF</code></li><li>å…è®¸åˆ†çº§ä¸¢å¤±: <code>RDB</code></li><li>åªç”¨<code>AOF</code>æ—¶ï¼Œé€‰æ‹©<code>everysec</code>,åœ¨å¯é æ€§å’Œæ€§èƒ½ä¹‹é—´å¹³è¡¡</li></ul><h4 id="_3-3-rdb-bgsave-çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-3-rdb-bgsave-çš„æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> 3.3 <code>RDB(bgsave)</code>çš„æ‰§è¡Œè¿‡ç¨‹</h4><p><code>bgsave </code> æˆ– <code>save 60 1000 </code>ï¼ˆæ¯60ç§’è‡³å°‘æ›´æ”¹äº†1000ä¸ªé”®åˆ™saveï¼‰,ä¿å­˜åˆ°<code>dump.rdb</code>äºŒè¿›åˆ¶æ–‡ä»¶</p><ol><li><code>fork</code>ä¸»çº¿ç¨‹å¾—åˆ°<code>bgsave</code>å­è¿›ç¨‹</li><li>ä¸»çº¿ç¨‹æ­£å¸¸è¯»æ•°æ®ï¼Œåœ¨å†™æ•°æ®æ—¶ï¼Œå¯¹æ•°æ®ç”Ÿæˆå‰¯æœ¬å¹¶è¿›è¡Œä¿®æ”¹(<code>COW</code>ï¼Œå†™æ—¶å¤åˆ¶)</li><li><code>bgsave</code>å­è¿›ç¨‹è¯»å…ƒæ•°æ®å†™å…¥åˆ°<code>RDB</code>æ–‡ä»¶</li></ol><h4 id="_3-4-rdbçš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-4-rdbçš„ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 3.4 <code>RDB</code>çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½“ç§¯å°æ˜“ä¼ è¾“ï¼Œæœ€å¤§åŒ–æ€§èƒ½ï¼Œé€‚åˆç¾éš¾æ¢å¤ï¼Œç›¸æ¯”<code>AOF</code>æ›´å¿«é‡å¯</li></ul><p><strong>ç¼ºç‚¹</strong>:</p><ul><li>ä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</li><li>æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œ<code>fork</code>ä¼šè€—æ—¶</li></ul><h4 id="_3-5-aofçš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-5-aofçš„æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> 3.5 <code>AOF</code>çš„æ‰§è¡Œè¿‡ç¨‹</h4><p><code>AOF</code>æ˜¯å†™åæ—¥å¿—ï¼Œè®°å½•çš„å†…å®¹æ˜¯<code>RESP</code>åè®®çš„æ•°æ®ï¼Œæ˜¯å‘½ä»¤æ—¥å¿—</p><blockquote><p>å†™åæ—¥å¿—: å…ˆæ‰§è¡Œå‘½ä»¤ï¼Œå†™å…¥å†…å­˜åå†™å…¥æ—¥å¿—</p><p>é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€ï¼Œä¸é˜»å¡å½“å‰å†™æ“ä½œ</p></blockquote><h4 id="_3-6-aofå†™å›ç£ç›˜çš„ç­–ç•¥-appendfsync" tabindex="-1"><a class="header-anchor" href="#_3-6-aofå†™å›ç£ç›˜çš„ç­–ç•¥-appendfsync" aria-hidden="true">#</a> 3.6 <code>AOF</code>å†™å›ç£ç›˜çš„ç­–ç•¥(<code>appendfsync</code>)</h4><ul><li><p><code>Always</code>: æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œç«‹åˆ»åŒæ­¥å°†æ—¥å¿—å†™å›ç£ç›˜</p></li><li><p><code>EverySec</code>: æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œå…ˆå†™åˆ°<code>AOF</code>å†…å­˜ç¼“å†²ï¼Œæ¯ä¸ª1ç§’å†™å›ç£ç›˜</p></li><li><p><code>No</code>: ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ä½•æ—¶å°†å†…å­˜ç¼“å†²å†™å›åˆ°ç£ç›˜</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">å†™å›æ—¶æœº</th><th style="text-align:center;">ä¼˜ç‚¹</th><th style="text-align:center;">ç¼ºç‚¹</th></tr></thead><tbody><tr><td style="text-align:center;"><code>Always</code></td><td style="text-align:center;">åŒæ­¥</td><td style="text-align:center;">å¯é ï¼ŒåŸºæœ¬ä¸ä¸¢</td><td style="text-align:center;">å½±å“æ€§èƒ½</td></tr><tr><td style="text-align:center;"><code>EverySec</code></td><td style="text-align:center;">æ¯ç§’</td><td style="text-align:center;">æ€§èƒ½é€‚ä¸­</td><td style="text-align:center;">ä¸¢å¤±1ç§’</td></tr><tr><td style="text-align:center;"><code>No</code></td><td style="text-align:center;">OSæ§åˆ¶</td><td style="text-align:center;">æ€§èƒ½å¥½</td><td style="text-align:center;">ä¸¢æ•°æ®å¤š</td></tr></tbody></table></li></ul><h4 id="_3-7-aofé‡å†™æœºåˆ¶-rewrite" tabindex="-1"><a class="header-anchor" href="#_3-7-aofé‡å†™æœºåˆ¶-rewrite" aria-hidden="true">#</a> 3.7 <code>AOF</code>é‡å†™æœºåˆ¶(<code>rewrite</code>)</h4><blockquote><p>è§£å†³æ—¥å¿—æ–‡ä»¶å¤ªå¤§çš„é—®é¢˜</p></blockquote><p>å°†å¤šæ¬¡ä¿®æ”¹çš„å‘½ä»¤ï¼Œåˆå¹¶ä¸€ä¸ªå‘½ä»¤ï¼ˆä¾‹å¦‚: <code>set k 1</code>,<code> set k 2</code> =&gt; <code>set k 2</code>ï¼‰</p><p><strong>ä¸é˜»å¡ä¸»çº¿ç¨‹</strong>:</p><ol><li>æ‰§è¡Œé‡å†™æ—¶ï¼Œä¸»çº¿ç¨‹<code>fork</code>å‡ºåå°çš„<code>bgrewriteaof</code>å­è¿›ç¨‹</li><li>Rediså°†å†™æ“ä½œå†™åˆ°AOFç¼“å†²åŒº</li><li>æ–°çš„AOFé‡å†™æ—¥å¿—è¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºï¼Œç­‰æ‹·è´æ•°æ®éƒ½å†™å®Œåï¼Œé‡å†™çš„æœ€æ–°æ“ä½œå†™å…¥åˆ°AOFæ—¥å¿—</li></ol><h4 id="_3-8-aofçš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-8-aofçš„ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 3.8 <code>AOF</code>çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>é…ç½®ä¸åŒçš„å†™å›ç­–ç•¥ä¿è¯æ•°æ®ä¸¢å¤±å°‘</li><li>ä¸å®¹æ˜“æŸåï¼Œå³ä½¿æŸç§åŸå› æ²¡å†™å®Œï¼Œ<code>redis-check-aof</code>å·¥å…·èƒ½å¤Ÿä¿®å¤</li><li>AOFæ—¥å¿—æ˜“è§£æ</li><li>AOFæ—¥å¿—å¯é‡å†™</li></ul><p><strong>ç¼ºç‚¹</strong>:</p><ul><li>AOFæ–‡ä»¶é€šå¸¸æ¯”åŒä¸€æ•°æ®é›†çš„RDBæ–‡ä»¶å¤§</li><li>å¯èƒ½ä¼šæ¯”RDBæ…¢</li></ul><h3 id="_4-é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶" aria-hidden="true">#</a> 4. é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶</h3><h4 id="_4-1-ä¸»ä»å¤åˆ¶çš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-1-ä¸»ä»å¤åˆ¶çš„æµç¨‹" aria-hidden="true">#</a> 4.1 ä¸»ä»å¤åˆ¶çš„æµç¨‹</h4><ol><li>ä»åº“æ‰§è¡Œ<code>replica of</code>ï¼Œé€šè¿‡<code>psync</code>å’Œä¸»åº“å»ºç«‹è¿æ¥ï¼Œåå•†åŒæ­¥ï¼Œä¿å­˜ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯</li><li>ä¸»åº“åŒæ­¥æ•°æ®(RDB)ç»™ä»åº“</li><li>ä»åº“æ¸…ç©ºç°æœ‰æ•°æ®ï¼ŒåŠ è½½RDB</li><li>ä¸»åº“å‘é€<code>Repl Buffer</code>ï¼ˆæ–°å†™å…¥çš„å‘½ä»¤ï¼‰ç»™ä»åº“ï¼Œä»åº“åŠ è½½<code>Repl Buffer</code></li></ol><h4 id="_4-2-å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›" tabindex="-1"><a class="header-anchor" href="#_4-2-å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›" aria-hidden="true">#</a> 4.2 å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›</h4><p>å¯ä»¥é€šè¿‡ <strong>ä¸»-ä»-ä»</strong>ï¼Œå°†ä¸»åº“ç”Ÿæˆçš„RDBå’Œä¼ è¾“RDBçš„å‹åŠ›ä»¥çº§è”çš„æ–¹å¼åˆ†æ•£åˆ°ä»åº“ä¸Š</p><h4 id="_4-3-ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ" tabindex="-1"><a class="header-anchor" href="#_4-3-ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ" aria-hidden="true">#</a> 4.3 ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ</h4><p>ç½‘ç»œæ–­äº†ä¹‹åï¼Œä¸»ä»åº“é‡‡ç”¨<strong>å¢é‡å¤åˆ¶</strong>çš„æ–¹å¼ç»§ç»­åŒæ­¥</p><ul><li>å…¨é‡å¤åˆ¶: åŒæ­¥æ‰€æœ‰æ•°æ®</li><li>å¢é‡å¤åˆ¶: æŠŠä¸»ä»ç½‘ç»œç«¯è¿æœŸé—´ä¸»åº“æ”¶åˆ°çš„å‘½ä»¤åŒæ­¥ä»åº“</li></ul><h3 id="_5-é«˜å¯ç”¨-å“¨å…µ" tabindex="-1"><a class="header-anchor" href="#_5-é«˜å¯ç”¨-å“¨å…µ" aria-hidden="true">#</a> 5. é«˜å¯ç”¨-å“¨å…µ</h3><blockquote><p>å®ç°ä¸»ä»åº“åˆ‡æ¢çš„å…³é”®æœºåˆ¶</p></blockquote><h4 id="_5-1-ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_5-1-ç›‘æ§" aria-hidden="true">#</a> 5.1 ç›‘æ§</h4><p>å‘¨æœŸæ€§ç»™æ‰€æœ‰ä¸»ä»åº“å‘é€<code>PING</code>,æ£€æµ‹æ˜¯å¦æ­£å¸¸è¿è¡Œ</p><p><strong>ä¸»è§‚ä¸‹çº¿</strong>: å•å“¨å…µè®¤ä¸ºä¸‹çº¿</p><p><strong>å®¢è§‚ä¸‹çº¿</strong>: è¶…åŠæ•°å“¨å…µè®¤ä¸ºä¸‹çº¿</p><h4 id="_5-2-é€‰ä¸»" tabindex="-1"><a class="header-anchor" href="#_5-2-é€‰ä¸»" aria-hidden="true">#</a> 5.2 é€‰ä¸»</h4><ul><li>ç­›é€‰: æ ¹æ®ä»åº“çš„å½“å‰åœ¨çº¿çŠ¶æ€å’Œå†å²ç½‘ç»œè¿æ¥çŠ¶æ€è¿‡æ»¤</li><li>æ‰“åˆ†: ä»åº“ä¼˜å…ˆçº§ï¼Œä»åº“å¤åˆ¶è¿›åº¦ï¼Œä»åº“IDå·</li></ul><h4 id="_5-3-é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#_5-3-é€šçŸ¥" aria-hidden="true">#</a> 5.3 é€šçŸ¥</h4><ul><li>è®©ä»åº“æ‰§è¡Œ<code>Replica of</code>ï¼Œä¸æ–°ä¸»åº“åŒæ­¥</li><li>é€šçŸ¥å®¢æˆ·ç«¯ï¼Œä¸æ–°ä¸»åº“è¿æ¥</li></ul><h4 id="_5-4-å“¨å…µé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_5-4-å“¨å…µé›†ç¾¤" aria-hidden="true">#</a> 5.4 å“¨å…µé›†ç¾¤</h4><p><code>sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;port&gt; &lt;quorum&gt;</code></p><p>åªæœ‰è®¢é˜…åŒä¸€ä¸ªé¢‘é“çš„åº”ç”¨æ‰èƒ½é€šè¿‡å‘å¸ƒçš„æ¶ˆæ¯è¿›è¡Œæ¶ˆæ¯äº¤æ¢</p><p><strong>å“¨å…µ-ä¸»åº“</strong>: åŸºäº<code>pub/sub</code>æœºåˆ¶ç»„æˆå“¨å…µé›†ç¾¤(<code>__sentinel__:hello</code>é¢‘é“)</p><p><strong>å“¨å…µ-ä»åº“</strong>: å“¨å…µå‘ä¸»åº“å‘é€<code>info</code>å‘½ä»¤ï¼Œå¾—çŸ¥ä»åº“ä¿¡æ¯ï¼Œå»ºç«‹è¿æ¥</p><p><strong>å®¢æˆ·ç«¯</strong>: åŸºäº<code>pub/sub</code>æœºåˆ¶çš„å®¢æˆ·ç«¯æ—¶é—´é€šçŸ¥</p><h4 id="_5-5-ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#_5-5-ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢" aria-hidden="true">#</a> 5.5 ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢</h4><p>å‘èµ·æŠ•ç¥¨ï¼Œå¤šæ•°ä¸ºleader</p><h3 id="_6-redis-cluster-åˆ†ç‰‡é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_6-redis-cluster-åˆ†ç‰‡é›†ç¾¤" aria-hidden="true">#</a> 6. <code>Redis Cluster</code>(åˆ†ç‰‡é›†ç¾¤)</h3><blockquote><p>ä¸ºäº†ä¿å­˜å¤§é‡æ•°æ®ï¼Œç”±ä¸¤ç§æ‰©å®¹æ–¹æ¡ˆï¼š1.å‡çº§å•Rediså®ä¾‹çš„èµ„æºé…ç½®ï¼Œ2.å¢åŠ Rediså®ä¾‹ä¸ªæ•°</p></blockquote><h4 id="_6-1-æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»" tabindex="-1"><a class="header-anchor" href="#_6-1-æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»" aria-hidden="true">#</a> 6.1 æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»</h4><p><code>Redis Cluster</code>é‡‡ç”¨å“ˆå¸Œæ§½(<code>hash slot</code>)æ¥å¤„ç†æ•°æ®å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»</p><p><code>CRC16(KEY) % 16384 = n</code></p><p>å…¶ä¸­: <code>CRC16 è¡¨ç¤ºCRC16ç®—æ³•å¾—åˆ°ä¸€ä¸ª16bitçš„å€¼ï¼Œ16385ä¸ªå“ˆå¸Œæ§½ï¼Œnè¡¨ç¤ºå¯¹åº”çš„å®ä¾‹</code></p><h4 id="_6-2-å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_6-2-å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®" aria-hidden="true">#</a> 6.2 å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®</h4><p>Rediså®ä¾‹ä¼šæŠŠè‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯é€šè¿‡<code>Gossip</code>å‘é€ç»™å’Œå®ƒç›¸è¿çš„å…¶ä»–å®ä¾‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“ˆå¸Œæ§½ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°ï¼Œè¯·æ±‚æ—¶å…ˆç®—å“ˆå¸Œæ§½</p><p><code>hash slot</code>å¯èƒ½ä¼šé‡æ–°åˆ†é…: 1.å®ä¾‹ç”±æ–°å¢æˆ–åˆ é™¤ï¼Œ2.ä¸ºäº†è´Ÿè½½å‡è¡¡</p><h4 id="_6-3-moved-é‡å®šå‘-å’Œ-ask" tabindex="-1"><a class="header-anchor" href="#_6-3-moved-é‡å®šå‘-å’Œ-ask" aria-hidden="true">#</a> 6.3 <code>Moved</code>ï¼ˆé‡å®šå‘ï¼‰å’Œ <code>ASK</code></h4><p>å®¢æˆ·ç«¯ç»™ä¸€ä¸ªå®ä¾‹å‘é€æ•°æ®è¯»å†™æ“ä½œæ—¶ï¼Œå®ä¾‹ä¸Šæ²¡æœ‰ç›¸åº”æ•°æ®ï¼Œå®¢æˆ·ç«¯è¦å†ç»™ä¸€ä¸ªæ–°å®ä¾‹å‘é€æ“ä½œæŒ‡ä»¤</p><p>å‡è®¾<code>hash slot</code>é‡æ–°åˆ†é…ï¼Œæ•°æ®ç”±<code>slot 1</code>è¿ç§»åˆ°<code>slot 2</code>ï¼Œå½“å®¢æˆ·ç«¯è®¿é—®æ•°æ®æ—¶ï¼Œå…ˆä»æœ¬åœ°ç¼“å­˜ä¸­è¯»åˆ°<code>slot 1</code>,</p><p>å¦‚æœ<code>slot 1</code>å·²è¿ç§»åˆ°<code>slot 2</code>ï¼Œæ­¤æ—¶å®ä¾‹1å°†è¿”å›<code>Moved 1010 ip:port</code>ï¼Œå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚åˆ°å®ä¾‹2ï¼Œå¹¶æ›´æ–°æœ¬åœ°ç¼“å­˜ï¼›</p><p>å¦‚æœæ­£åœ¨è¿ç§»ä¸­(éƒ¨åˆ†è¿ç§»)ï¼Œå®ä¾‹1å°†è¿”å›å®¢æˆ·ç«¯<code>ASK 100 ip:port</code>ï¼Œ</p><blockquote><p><code>ASK</code>è¡¨ç¤º<code>slot</code>æ•°æ®è¿˜åœ¨è¿ç§»ä¸­ï¼Œæˆ–è€…æŠŠé”è¯·æ±‚çš„æ•°æ®çš„æœ€æ–°å®ä¾‹åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯</p></blockquote><p>æ­¤æ—¶å®¢æˆ·ç«¯å‘æ–°å®ä¾‹å‘é€<code>ASKING</code>,ç„¶åå†å‘æ“ä½œå‘½ä»¤</p><blockquote><p><code>Moved</code>: ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜ï¼Œæ°¸ä¹…å‘æ–°å®ä¾‹å‘è¯·æ±‚</p><p><code>Ask</code>ï¼š ä¸ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå‘ä¸€æ¬¡è¯·æ±‚ç»™å®ä¾‹</p></blockquote><h4 id="_6-4-å¦‚ä½•æ‰©å®¹-ç¼©å®¹" tabindex="-1"><a class="header-anchor" href="#_6-4-å¦‚ä½•æ‰©å®¹-ç¼©å®¹" aria-hidden="true">#</a> 6.4 å¦‚ä½•æ‰©å®¹/ç¼©å®¹</h4><p>é€šè¿‡å‘½ä»¤<code>redis-cli --cluster</code></p><h4 id="_6-5-ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»" tabindex="-1"><a class="header-anchor" href="#_6-5-ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»" aria-hidden="true">#</a> 6.5 ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»</h4><p>å½“masteræŒ‚åï¼Œåªæœ‰ä¸€ä¸ªä»æœºï¼Œä»å…¶ä»–masterä¸­çš„å¤šä¸ª(&gt;=2)ä»æœºä¸­é€‰ä¸€ä¸ªåšä¸»ä»</p>',75),De={id:"_6-6-ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½",tabindex:"-1"},Ce=e("a",{class:"header-anchor",href:"#_6-6-ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½","aria-hidden":"true"},"#",-1),Ee={href:"https://github.com/redis/redis/issues/2576",target:"_blank",rel:"noopener noreferrer"},Se=a('<ul><li><p>å¦‚æœæ›´å¤š: Rediså‘é€å¿ƒè·³åŒ…æ‰€æœ‰æ§½ä¿¡æ¯ï¼Œä½¿ç”¨16383Kä¸ªä¼šäº§ç”Ÿ2kbçš„æ–‡ä»¶ï¼Œæ›´èŠ‚çœç©ºé—´ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒRedisé›†ç¾¤ä¸ä¼šè¶…è¿‡1000ä¸ªï¼Œ16384ä¸ªæ§½ä½è¶³å¤Ÿç”¨</p></li><li><p>å¦‚æœæ›´å°‘: 8192ä¸ªï¼ŒèŠ‚çœçš„ç©ºé—´ä¸å¤šï¼Œä¸”å“ˆå¸Œå†²çªå¤§</p></li></ul><h3 id="_7-redisä¸ºä»€ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#_7-redisä¸ºä»€ä¹ˆå¿«" aria-hidden="true">#</a> 7. Redisä¸ºä»€ä¹ˆå¿«</h3><figure><img src="https://pbs.twimg.com/media/FMx3JZRUYAIWWKq?format=jpg&amp;name=4096x4096" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_7-1-åŸºäºå†…å­˜å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#_7-1-åŸºäºå†…å­˜å­˜å‚¨" aria-hidden="true">#</a> 7.1 åŸºäºå†…å­˜å­˜å‚¨</h4><p>å†…å­˜è¯»å†™ä¼˜äºç£ç›˜</p><h4 id="_7-2-çº¿ç¨‹æ¨¡å‹-å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-2-çº¿ç¨‹æ¨¡å‹-å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨" aria-hidden="true">#</a> 7.2 çº¿ç¨‹æ¨¡å‹(å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨)</h4><p>Redisçš„ç½‘ç»œIOå’Œé”®å€¼å¯¹è¯»å†™æ—¶å•çº¿ç¨‹çš„ï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„å¼€é”€ï¼Œé‡‡ç”¨äº†<strong>å¤šè·¯å¤ç”¨æœºåˆ¶</strong></p><blockquote><p>å¤šè·¯å¤ç”¨</p></blockquote><h4 id="_7-3-é«˜æ•ˆçš„æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_7-3-é«˜æ•ˆçš„æ•°æ®ç»“æ„" aria-hidden="true">#</a> 7.3 é«˜æ•ˆçš„æ•°æ®ç»“æ„</h4><h3 id="_8-redisåªæœ‰å•çº¿ç¨‹å—" tabindex="-1"><a class="header-anchor" href="#_8-redisåªæœ‰å•çº¿ç¨‹å—" aria-hidden="true">#</a> 8. Redisåªæœ‰å•çº¿ç¨‹å—ï¼Ÿ</h3><p>Redisä¸­çš„ç½‘ç»œIOï¼Œé”®å€¼å¯¹è¯»å†™æ˜¯å•çº¿ç¨‹ï¼ŒRDBã€AOFç­‰æ˜¯å…¶ä»–çº¿ç¨‹ï¼Œ</p><p>Redis6.0 åé‡‡ç”¨ç½‘ç»œI/Oå¤šçº¿ç¨‹å‡ºé‡Œç½‘ç»œè¯·æ±‚ï¼Œå¯¹äºé”®å€¼å¯¹è¯»å†™ä»æ˜¯å•çº¿ç¨‹</p><h3 id="_9-redis6-0å’Œ7-0çš„æ–°ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_9-redis6-0å’Œ7-0çš„æ–°ç‰¹æ€§" aria-hidden="true">#</a> 9. Redis6.0å’Œ7.0çš„æ–°ç‰¹æ€§</h3><h3 id="_10-ç¼“å­˜å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_10-ç¼“å­˜å¼‚å¸¸" aria-hidden="true">#</a> 10. ç¼“å­˜å¼‚å¸¸</h3><h4 id="_10-1-ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_10-1-ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> 10.1 ç¼“å­˜é›ªå´©</h4><p>çªç„¶é—´å¤§é‡çš„keyå¤±æ•ˆï¼Œæˆ–è€…redisé‡å¯ï¼Œå¤§é‡çš„è¯·æ±‚æ‰“åˆ°æ•°æ®åº“</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>keyè®¾ç½®å‡åŒ€çš„è¿‡æœŸæ—¶é—´</li><li>rediså®•æœºçš„æƒ…å†µï¼Œè¦é‡‡ç”¨é«˜å¯ç”¨æ–¹æ¡ˆ</li></ul><h4 id="_10-2-ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_10-2-ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> 10.2 ç¼“å­˜å‡»ç©¿</h4><p>æŸä¸ªçƒ­ç‚¹keyè¿‡æœŸçš„ç¬é—´ï¼Œå¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>æ°¸ä¸è¿‡æœŸ</li><li>äº’æ–¥é”æ–¹æ¡ˆï¼Œåœ¨å¤±æ•ˆæ—¶ä¸ç«‹å³åŠ è½½æ•°æ®åº“ï¼Œ è€Œæ˜¯ä½¿ç”¨<code>setnx</code>ç­‰æˆåŠŸçš„æ—¶å€™åŠ è½½ç¼“å­˜å’Œæ•°æ®åº“</li></ul><h4 id="_10-3-ç¼“å­˜ç©¿é€" tabindex="-1"><a class="header-anchor" href="#_10-3-ç¼“å­˜ç©¿é€" aria-hidden="true">#</a> 10.3 ç¼“å­˜ç©¿é€</h4><p>æŸ¥è¯¢ä¸å­˜åœ¨çš„key,æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨(ç©¿é€åˆ°æ•°æ®åº“)ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³å®•æœº</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼ˆç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼‰ï¼ŒttlçŸ­äº›æˆ–è€…æœ‰æ•°æ®æ—¶åˆ é™¤ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å¤ªå¤šç©ºå€¼å ç”¨ç©ºé—´</li><li>å¼•å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸å­˜åœ¨åˆ™è¿”å›</li></ul><h4 id="_10-4-bigkey" tabindex="-1"><a class="header-anchor" href="#_10-4-bigkey" aria-hidden="true">#</a> 10.4 <code>BigKey</code></h4><h4 id="_10-5-hotkey" tabindex="-1"><a class="header-anchor" href="#_10-5-hotkey" aria-hidden="true">#</a> 10.5 <code>HotKey</code></h4><h3 id="_11-ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#_11-ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§" aria-hidden="true">#</a> 11. ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§</h3>',29),we={href:"https://mp.weixin.qq.com/s/4W7vmICGx6a_WX701zxgPQ",target:"_blank",rel:"noopener noreferrer"},Ie=a('<ul><li><p>å»¶æ—¶åŒåˆ </p><p>æ›´æ–°æ—¶å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼Œç­‰ä¸€æ®µæ—¶é—´åå†åˆ é™¤ç¼“å­˜ã€‚ä½†æ˜¯éœ€è¦è¯„ä¼°å»¶æ—¶å¤šä¹…ï¼Œåœ¨åˆ†å¸ƒå¼é«˜å¹¶å‘æƒ…å†µä¸‹å¾ˆéš¾è¯„ä¼°</p></li><li><p>å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—</p><p>å…ˆæ›´æ–°æ•°æ®åº“ï¼ŒMySQLäº§ç”Ÿ<code>binlog</code>,ä½¿ç”¨Canalè®¢é˜…<code>binlog</code>ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°MQï¼Œé€šè¿‡ackå¼‚æ­¥é‡è¯•ä¿è¯åˆ é™¤ç¼“å­˜</p></li></ul><h3 id="_12-åŸºäºredisçš„åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_12-åŸºäºredisçš„åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> 12. åŸºäºRedisçš„åˆ†å¸ƒå¼é”</h3><h4 id="_12-1-sexnx-lock-val-del-lock" tabindex="-1"><a class="header-anchor" href="#_12-1-sexnx-lock-val-del-lock" aria-hidden="true">#</a> 12.1 <code>sexnx lock val / del lock</code></h4><p>å¦‚æœè§£é”å¼‚å¸¸ï¼Œä¼šå‘ç”Ÿæ­»é” =&gt; è®¾ç½®è¿‡æœŸæ—¶é—´</p><h4 id="_12-2-setnx-lock-val-expire-lock-n" tabindex="-1"><a class="header-anchor" href="#_12-2-setnx-lock-val-expire-lock-n" aria-hidden="true">#</a> 12.2 <code>setnx lock val / expire lock n</code></h4><p>ä¸èƒ½ä¿è¯åŸå­æ€§</p><h4 id="_12-3-set-lock-uuid-ex-n-nx-lua-get-del" tabindex="-1"><a class="header-anchor" href="#_12-3-set-lock-uuid-ex-n-nx-lua-get-del" aria-hidden="true">#</a> 12.3 <code>set lock $uuid ex n nx / lua:get+del</code></h4><p>é”çš„æ—¶é—´ä¸å¥½è¯„ä¼° =&gt; å¢åŠ å®ˆæŠ¤è¿›ç¨‹ç»­æœŸ</p>',8),Ke={id:"_12-4-redisson",tabindex:"-1"},Ne=e("a",{class:"header-anchor",href:"#_12-4-redisson","aria-hidden":"true"},"#",-1),Me={href:"https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8",target:"_blank",rel:"noopener noreferrer"},ze=e("p",null,"é€šè¿‡Luaè„šæœ¬(åŸå­æ€§)ï¼Œå¯¹hash(é”çš„å­˜å‚¨ç»“æ„)è¿›è¡Œå¢å‡(å¯é‡å…¥)ï¼Œé‡‡ç”¨çœ‹é—¨ç‹—æœºåˆ¶è¿›è¡Œç»­æœŸï¼Œé‡Šæ”¾é”æ˜¯é‡‡ç”¨å‘å¸ƒ/è®¢é˜…çš„æ–¹å¼",-1),Le={id:"_12-5-redlock",tabindex:"-1"},We=e("a",{class:"header-anchor",href:"#_12-5-redlock","aria-hidden":"true"},"#",-1),Ge={href:"https://github.com/wujunwei/redlock",target:"_blank",rel:"noopener noreferrer"},Ve=e("blockquote",null,[e("p",null,[d("å½“å‘ç”Ÿä¸»ä»åˆ‡æ¢æ—¶é”å¤±æ•ˆï¼Œé‡‡ç”¨"),e("code",null,"redlock"),d("æ–¹æ¡ˆï¼ˆå‰æ: è‡³å°‘æœ‰5ä¸ªä¸»åº“å®ä¾‹ï¼‰")])],-1),Ye=e("p",null,[d("å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´æˆ³"),e("code",null,"t1"),d("ï¼Œä¾æ¬¡å‘5ä¸ªrediså®ä¾‹å‘èµ·åŠ é”è¯·æ±‚ï¼Œä¸”æ¯ä¸ªè¯·æ±‚æœ‰è¶…æ—¶æ—¶é—´ã€‚")],-1),He=e("p",null,"å¦‚æœæŸä¸€ä¸ªå¤±è´¥ï¼Œåˆ™ç«‹å³å‘ä¸‹ä¸€ä¸ªç”³è¯·ï¼›",-1),Pe=e("p",null,[d("å¦‚æœå¤§äºåŠæ•°ä¸ªé”æˆåŠŸï¼Œåˆ™è·å–æ—¶é—´æˆ³"),e("code",null,"t2")],-1),Qe=e("p",null,"åŠ é”ä¸æˆåŠŸæ—¶åˆ™é€šè¿‡luaå‘å…¨éƒ¨èŠ‚ç‚¹å‘èµ·é‡Šæ”¾é”è¯·æ±‚",-1);function je(Te,Ze){const o=c("ExternalLinkIcon");return i(),s("div",null,[n,h,e("blockquote",null,[e("p",null,[e("a",_,[d("Redis Data Types"),t(o)])])]),e("h4",p,[u,d(" 1.1 "),e("a",b,[f,t(o)])]),g,e("h4",x,[k,d(" 1.2 "),e("a",y,[m,t(o)])]),R,A,v,e("h4",O,[q,d(" 1.3 "),e("a",B,[F,t(o)])]),D,C,E,e("h4",S,[w,d(" 1.4 "),e("a",I,[K,t(o)])]),N,e("h4",M,[z,d(" 1.5 "),e("a",L,[W,t(o)])]),G,V,Y,e("h4",H,[P,d(" 1.6 "),e("a",Q,[j,t(o)])]),T,Z,e("h4",J,[U,d(" 1.7 "),e("a",X,[$,t(o)])]),ee,e("h4",de,[oe,d(" 1.8 "),e("a",te,[ae,t(o)])]),re,e("h4",ie,[se,d(" 1.9 "),e("a",ce,[le,t(o)])]),e("h4",ne,[he,d(" 1.10 "),e("a",_e,[pe,t(o)])]),ue,be,e("blockquote",null,[e("p",null,[e("a",fe,[d("Redis Modules"),t(o)])])]),e("ul",null,[e("li",null,[e("a",ge,[xe,t(o)]),d(": å¸ƒéš†è¿‡æ»¤å™¨")]),e("li",null,[e("a",ke,[ye,t(o)]),d(": ç”¨äºé™æµ")])]),e("h3",me,[Re,d(" 2. "),e("a",Ae,[d("ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥"),t(o)])]),ve,e("h3",Oe,[qe,d(" 3. "),e("a",Be,[d("æŒä¹…åŒ–"),t(o)])]),Fe,e("h4",De,[Ce,d(" 6.6 "),e("a",Ee,[d("ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½"),t(o)])]),Se,e("blockquote",null,[e("p",null,[d("ğŸ‘ğŸ»"),e("a",we,[d("ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§é—®é¢˜ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†"),t(o)]),d(" ç¼“å­˜å¸¸ç”¨çš„è¯»å†™æ¨¡å¼æ˜¯æ—è·¯ç¼“å­˜: å…ˆè¯»ç¼“å­˜ï¼Œæ²¡æœ‰æ—¶å†è¯»æ•°æ®åº“")])]),Ie,e("h4",Ke,[Ne,d(" 12.4 "),e("a",Me,[d("Redisson"),t(o)])]),ze,e("h4",Le,[We,d(" 12.5 "),e("a",Ge,[d("redlock"),t(o)])]),Ve,Ye,He,Pe,Qe])}const Ue=r(l,[["render",je],["__file","redis.html.vue"]]);export{Ue as default};
