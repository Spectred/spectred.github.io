import{_ as r,r as i,o as s,c,a as e,b as d,d as t,e as a}from"./app.94cd83f3.js";const l={},n=e("h1",{id:"redis",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#redis","aria-hidden":"true"},"#"),d(" Redis")],-1),h=e("h3",{id:"_1-redis\u6709\u54EA\u4E9B\u6570\u636E\u7C7B\u578B",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-redis\u6709\u54EA\u4E9B\u6570\u636E\u7C7B\u578B","aria-hidden":"true"},"#"),d(" 1. Redis\u6709\u54EA\u4E9B\u6570\u636E\u7C7B\u578B")],-1),_={href:"https://redis.io/docs/data-types/",target:"_blank",rel:"noopener noreferrer"},p={id:"_1-1-string",tabindex:"-1"},u=e("a",{class:"header-anchor",href:"#_1-1-string","aria-hidden":"true"},"#",-1),b={href:"https://redis.io/docs/data-types/strings/",target:"_blank",rel:"noopener noreferrer"},f=e("code",null,"string",-1),g=a("<p>\u6570\u636E\u7ED3\u6784: <code>SDS</code>,\u5305\u62EC<code>len</code>:\u5DF2\u7528\u7684\u957F\u5EA6\uFF0C<code>alloc</code>: \u5206\u914D\u7684\u7A7A\u95F4\u957F\u5EA6\uFF0C<code>flags</code>,<code>buf[]</code>: \u5B9E\u9645\u5B58\u50A8\u7684\u5185\u5BB9</p><p>\u4E3A\u4EC0\u4E48\u4E0D\u7528\u539F\u751F<code>char</code>? <code>SDS</code>\u8BB0\u5F55\u4E86\u4F7F\u7528\u957F\u5EA6\u548C\u5206\u914D\u7A7A\u95F4\u5927\u5C0F\uFF0C\u907F\u514D\u4E86\u904D\u5386\uFF0C\u964D\u4F4E\u5F00\u9500</p>",2),x={id:"_1-2-list",tabindex:"-1"},k=e("a",{class:"header-anchor",href:"#_1-2-list","aria-hidden":"true"},"#",-1),y={href:"https://redis.io/docs/data-types/",target:"_blank",rel:"noopener noreferrer"},m=e("code",null,"list",-1),R=e("p",null,"\u5E94\u7528\u573A\u666F: \u6D88\u606F\u961F\u5217\uFF0C\u6587\u7AE0\u5217\u8868",-1),A=e("p",null,"\u6570\u636E\u7ED3\u6784:",-1),v=e("ul",null,[e("li",null,[d("\u53CC\u5411\u94FE\u8868(\u4E3A\u4E86\u907F\u514D"),e("code",null,"ziplist"),d("\u7EA7\u8054\u66F4\u65B0\uFF0C\u91C7\u7528"),e("code",null,"quicklist"),d("+"),e("code",null,"ziplist"),d(")")]),e("li",null,"\u538B\u7F29\u5217\u8868")],-1),O={id:"_1-3-set",tabindex:"-1"},q=e("a",{class:"header-anchor",href:"#_1-3-set","aria-hidden":"true"},"#",-1),B={href:"https://redis.io/docs/data-types/sets/",target:"_blank",rel:"noopener noreferrer"},F=e("code",null,"set",-1),D=e("p",null,"\u5E94\u7528\u573A\u666F: \u7528\u6237\u6807\u7B7E\uFF0C\u968F\u673A\u6570",-1),C=e("p",null,[d("\u6570\u636E\u7ED3\u6784: \u5982\u679C\u5B58\u50A8\u7684\u90FD\u662F"),e("code",null,"int"),d("\u7C7B\u578B\uFF0C\u5219\u662F"),e("code",null,"int set"),d("\uFF0C\u5176\u4ED6\u4E3A"),e("code",null,"hash table")],-1),E=e("ul",null,[e("li",null,"\u54C8\u5E0C\u8868"),e("li",null,"\u6574\u6570\u96C6\u5408")],-1),S={id:"_1-4-hash",tabindex:"-1"},w=e("a",{class:"header-anchor",href:"#_1-4-hash","aria-hidden":"true"},"#",-1),I={href:"https://redis.io/docs/data-types/hashes/",target:"_blank",rel:"noopener noreferrer"},K=e("code",null,"hash",-1),N=a("<p>\u6570\u636E\u7ED3\u6784:</p><ul><li>\u54C8\u5E0C\u8868</li><li>\u538B\u7F29\u5217\u8868</li></ul><p>\u54C8\u5E0C\u51B2\u7A81\u65F6\u91C7\u7528\u94FE\u5F0F\u54C8\u5E0C</p><p><strong>\u4F55\u65F6\u89E6\u53D1<code>rehash</code>\uFF1F</strong></p><ul><li>\u6839\u636Ehash\u8868\u7684\u8D1F\u8F7D\u56E0\u5B50\u548C\u80FD\u5426\u8FDB\u884C<code>rehash</code>\u6807\u8BC6(<code>rehashidx</code>)\u5224\u65AD</li><li>\u6839\u636E<code>RDB</code>\u548C<code>AOF</code>\u6267\u884C\u60C5\u51B5\uFF0C\u542F\u7528\u6216\u8005\u7981\u7528<code>rehash</code></li><li><code>rehash</code>\u6269\u5BB9\u662F\u62692\u500D</li></ul><p><strong>\u6E10\u8FDB\u5F0Fhash\uFF1F</strong></p><p>\u5F53\u94FE\u957F\u5EA6\u8FC7\u5927\u65F6\uFF0C\u91C7\u7528\u6E10\u8FDB\u5F0Frehash\uFF1A</p><ul><li>\u4E24\u4E2A\u54C8\u5E0C\u8868(<code>ht[0]</code>\u548C<code>ht[1]</code>)\u4EA4\u66FF\u4F7F\u7528</li><li>\u6B63\u5E38\u65F6\u5199\u5165\u5230<code>ht[0]</code>,\u5F53<code>rehash</code>\u65F6\u5C06\u952E\u503C\u8FC1\u79FB\u5230<code>ht[</code>]</li><li>\u5B8C\u6210\u540E<code>ht[0]</code>\u91CA\u653E\uFF0C\u5C06<code>ht[1]</code>\u5730\u5740\u8D4B\u503C\u7ED9<code>ht[0]</code></li></ul>",8),M={id:"_1-5-sorted-set",tabindex:"-1"},L=e("a",{class:"header-anchor",href:"#_1-5-sorted-set","aria-hidden":"true"},"#",-1),z={href:"https://redis.io/docs/data-types/sorted-sets/",target:"_blank",rel:"noopener noreferrer"},G=e("code",null,"sorted set",-1),W=e("p",null,"\u5E94\u7528\u573A\u666F: \u6392\u884C\u699C\uFF0C\u70B9\u8D5E",-1),V=e("p",null,"\u6570\u636E\u7ED3\u6784\uFF1A",-1),H=e("ul",null,[e("li",null,"\u54C8\u5E0C\u8868: \u5B58member\u548Cscore\u7684\u5173\u7CFB"),e("li",null,[d("\u8DF3\u8868: \u5B58key (\u5F53"),e("code",null,"zset"),d("\u6570\u636E\u5C11\u662F\u7528"),e("code",null,"ziplist"),d("\uFF0C\u4E3A\u4E86\u7701\u5185\u5B58)")])],-1),P={id:"_1-6-stream",tabindex:"-1"},Q=e("a",{class:"header-anchor",href:"#_1-6-stream","aria-hidden":"true"},"#",-1),Y={href:"https://redis.io/docs/data-types/streams/",target:"_blank",rel:"noopener noreferrer"},j=e("code",null,"Stream",-1),T=e("blockquote",null,[e("p",null,"A Redis stream is a data structure that acts like an append-only log. You can use streams to record and simultaneously syndicate events in real time.")],-1),J=e("p",null,"\u7C7B\u4F3C\u4E8E\u6D88\u606F\u961F\u5217",-1),U={id:"_1-7-geo-hash",tabindex:"-1"},X=e("a",{class:"header-anchor",href:"#_1-7-geo-hash","aria-hidden":"true"},"#",-1),Z={href:"https://redis.io/docs/data-types/geospatial/",target:"_blank",rel:"noopener noreferrer"},$=e("code",null,"Geo Hash",-1),ee=e("p",null,"\u5B58\u50A8\u5730\u7406\u4F4D\u7F6E",-1),de={id:"_1-8-bitmap",tabindex:"-1"},oe=e("a",{class:"header-anchor",href:"#_1-8-bitmap","aria-hidden":"true"},"#",-1),te={href:"https://redis.io/docs/data-types/bitmaps/",target:"_blank",rel:"noopener noreferrer"},ae=e("code",null,"bitmap",-1),re=e("p",null,"\u4F4D\u56FE\uFF0C\u53EF\u7528\u4E8E\u7B7E\u5230\u7B49",-1),ie={id:"_1-9-bitfield",tabindex:"-1"},se=e("a",{class:"header-anchor",href:"#_1-9-bitfield","aria-hidden":"true"},"#",-1),ce={href:"https://redis.io/docs/data-types/bitfields/",target:"_blank",rel:"noopener noreferrer"},le=e("code",null,"bitfield",-1),ne={id:"_1-10-hyperloglog",tabindex:"-1"},he=e("a",{class:"header-anchor",href:"#_1-10-hyperloglog","aria-hidden":"true"},"#",-1),_e={href:"https://redis.io/docs/data-types/hyperloglogs/",target:"_blank",rel:"noopener noreferrer"},pe=e("code",null,"HyperLogLog",-1),ue=e("p",null,"\u57FA\u6570\u8FD1\u4F3C\u7EDF\u8BA1\uFF0C\u4F8B\u5982\u7F51\u7EDC\u7684uv",-1),be=e("h4",{id:"_1-11-\u57FA\u4E8E\u6A21\u5757\u8FDB\u884C\u6269\u5C55",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-11-\u57FA\u4E8E\u6A21\u5757\u8FDB\u884C\u6269\u5C55","aria-hidden":"true"},"#"),d(" 1.11 \u57FA\u4E8E\u6A21\u5757\u8FDB\u884C\u6269\u5C55")],-1),fe={href:"https://redis.io/docs/modules/",target:"_blank",rel:"noopener noreferrer"},ge={href:"https://redis.io/docs/stack/bloom/",target:"_blank",rel:"noopener noreferrer"},xe=e("code",null,"RedisBloom",-1),ke={href:"https://github.com/brandur/redis-cell",target:"_blank",rel:"noopener noreferrer"},ye=e("code",null,"redis-cell",-1),me={id:"_2-\u7F13\u5B58\u8FC7\u671F\u548C\u6DD8\u6C70\u7B56\u7565",tabindex:"-1"},Re=e("a",{class:"header-anchor",href:"#_2-\u7F13\u5B58\u8FC7\u671F\u548C\u6DD8\u6C70\u7B56\u7565","aria-hidden":"true"},"#",-1),Ae={href:"https://redis.io/docs/manual/eviction/",target:"_blank",rel:"noopener noreferrer"},ve=a('<h4 id="_2-1-\u8FC7\u671F\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_2-1-\u8FC7\u671F\u7B56\u7565" aria-hidden="true">#</a> 2.1 \u8FC7\u671F\u7B56\u7565</h4><p>Redis\u91C7\u7528\u5B9A\u671F\u8FC7\u671F\u548C\u60F0\u6027\u8FC7\u671F</p><ul><li>\u5B9A\u671F\u8FC7\u671F\uFF1A \u6BCF\u9694\u4E00\u70B9\u65F6\u95F4\uFF0C\u4F1A\u626B\u63CF\u4E00\u5B9A\u6570\u91CF\u7684<code>expires</code>\u5B57\u6BB5\u4E2D\u7684\u90E8\u5206key\uFF0C\u5E76\u6E05\u9664\u5DF2\u8FC7\u671F\u7684key</li><li>\u60F0\u6027\u8FC7\u671F\uFF1A \u5728key\u88AB\u8BBF\u95EE\u65F6\uFF0C\u5982\u679C\u53D1\u73B0\u5DF2\u8FC7\u671F\uFF0C\u5C31\u4ECE\u5185\u5B58\u4E2D\u5220\u9664</li></ul><h4 id="_2-2-\u6DD8\u6C70\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_2-2-\u6DD8\u6C70\u7B56\u7565" aria-hidden="true">#</a> 2.2 \u6DD8\u6C70\u7B56\u7565</h4><p><code>maxmemory</code>\uFF1ARedis\u542F\u52A8\u65F6\u6309\u9700\u7533\u8BF7\u5185\u5B58\uFF0C\u4E14Redis\u4E0D\u4F1A\u8D85\u8FC7<code>maxmemory</code>\uFF0C\u5982\u679C\u7CFB\u7EDF\u5185\u5B58\u5FEB\u6EE1\u4E86\uFF0C\u6709<code>swap</code>\u5219<code>swap</code>\uFF0C\u65E0<code>swap</code>\u5219<code>OOM</code>,\u5F53\u8D8B\u8FD1<code>maxmemory</code>\u65F6\u5219\u8FDB\u884C\u7F13\u5B58\u6DD8\u6C70</p><ul><li><code>noeviction </code>: \u9ED8\u8BA4\uFF0C\u4E0D\u9A71\u9010\uFF0C\u65B0\u5199\u5165\u5C31\u62A5\u9519</li><li><code>allkeys-</code>\uFF1A \u4ECE\u6240\u6709\u7684key\u4E2D <ul><li><code>random</code>: \u968F\u673A\u6DD8\u6C70\uFF0C\u5E0C\u671B\u8BF7\u6C42\u7B26\u5408\u5747\u5300\u5206\u5E03</li><li><code>lru</code>\uFF1A \u6700\u8FD1\u6700\u5C11\u6DD8\u6C70\uFF0C\u4E0D\u786E\u5B9A\u65F6\u53EF\u91C7\u7528\uFF0C\u51B7\u70ED\u6570\u636E\u4EA4\u6362</li><li><code>lfu</code>: \u6700\u4E0D\u7ECF\u5E38\u4F7F\u7528</li></ul></li><li><code>volatile-</code>: \u4ECE\u8BBE\u7F6E\u4E86\u8FC7\u671F\u65F6\u95F4\u7684key\u4E2D <ul><li><code>random</code></li><li><code>lru</code></li><li><code>lfu</code></li><li><code>ttl</code>: \u6839\u636E\u8FC7\u671F\u65F6\u95F4\uFF0C\u8D8A\u65E9\u8D8A\u5148\u6DD8\u6C70</li></ul></li></ul>',6),Oe={id:"_3-\u6301\u4E45\u5316",tabindex:"-1"},qe=e("a",{class:"header-anchor",href:"#_3-\u6301\u4E45\u5316","aria-hidden":"true"},"#",-1),Be={href:"https://redis.io/docs/manual/persistence/",target:"_blank",rel:"noopener noreferrer"},Fe=a('<blockquote><p>\u6301\u4E45\u5316\u662F\u6307\u5C06\u6570\u636E\u5199\u5165\u5230\u6301\u4E45\u5B58\u50A8\uFF0C\u4F8B\u5982\u78C1\u76D8</p></blockquote><h4 id="_3-1-\u6709\u54EA\u51E0\u79CD\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-1-\u6709\u54EA\u51E0\u79CD\u65B9\u5F0F" aria-hidden="true">#</a> 3.1 \u6709\u54EA\u51E0\u79CD\u65B9\u5F0F</h4><ul><li><code>No persistence</code></li><li><code>RDB (Redis Databases)</code> : \u5728\u6307\u5B9A\u7684\u65F6\u95F4\u95F4\u9694\u5185\u6267\u884C\u6570\u636E\u7684\u65F6\u95F4\u70B9\u5FEB\u7167</li><li><code>AOF (Append Only File)</code>: \u8BB0\u5F55\u6BCF\u4E2A\u5199\u5165\u64CD\u4F5C\uFF0C\u5728\u670D\u52A1\u542F\u52A8\u65F6\u91CD\u653E\uFF0C\u91CD\u5EFA\u539F\u59CB\u6570\u636E\uFF0C\u5F53\u65E5\u5FD7\u53D8\u5F97\u8FC7\u5927\u65F6\uFF0CRedis\u53EF\u4EE5\u5728\u540E\u53F0\u91CD\u5199\u65E5\u5FD7</li><li><code>RDB+AOF</code></li></ul><h4 id="_3-2-\u9009\u62E9\u54EA\u79CD\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-2-\u9009\u62E9\u54EA\u79CD\u65B9\u5F0F" aria-hidden="true">#</a> 3.2 \u9009\u62E9\u54EA\u79CD\u65B9\u5F0F</h4><ul><li>\u4E0D\u80FD\u4E22\u5931: <code>RDB+AOF</code></li><li>\u5141\u8BB8\u5206\u7EA7\u4E22\u5931: <code>RDB</code></li><li>\u53EA\u7528<code>AOF</code>\u65F6\uFF0C\u9009\u62E9<code>everysec</code>,\u5728\u53EF\u9760\u6027\u548C\u6027\u80FD\u4E4B\u95F4\u5E73\u8861</li></ul><h4 id="_3-3-rdb-bgsave-\u7684\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-3-rdb-bgsave-\u7684\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> 3.3 <code>RDB(bgsave)</code>\u7684\u6267\u884C\u8FC7\u7A0B</h4><p><code>bgsave </code> \u6216 <code>save 60 1000 </code>\uFF08\u6BCF60\u79D2\u81F3\u5C11\u66F4\u6539\u4E861000\u4E2A\u952E\u5219save\uFF09,\u4FDD\u5B58\u5230<code>dump.rdb</code>\u4E8C\u8FDB\u5236\u6587\u4EF6</p><ol><li><code>fork</code>\u4E3B\u7EBF\u7A0B\u5F97\u5230<code>bgsave</code>\u5B50\u8FDB\u7A0B</li><li>\u4E3B\u7EBF\u7A0B\u6B63\u5E38\u8BFB\u6570\u636E\uFF0C\u5728\u5199\u6570\u636E\u65F6\uFF0C\u5BF9\u6570\u636E\u751F\u6210\u526F\u672C\u5E76\u8FDB\u884C\u4FEE\u6539(<code>COW</code>\uFF0C\u5199\u65F6\u590D\u5236)</li><li><code>bgsave</code>\u5B50\u8FDB\u7A0B\u8BFB\u5143\u6570\u636E\u5199\u5165\u5230<code>RDB</code>\u6587\u4EF6</li></ol><h4 id="_3-4-rdb\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_3-4-rdb\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 3.4 <code>RDB</code>\u7684\u4F18\u7F3A\u70B9</h4><p><strong>\u4F18\u70B9</strong>:</p><ul><li>\u4E8C\u8FDB\u5236\u6587\u4EF6\uFF0C\u4F53\u79EF\u5C0F\u6613\u4F20\u8F93\uFF0C\u6700\u5927\u5316\u6027\u80FD\uFF0C\u9002\u5408\u707E\u96BE\u6062\u590D\uFF0C\u76F8\u6BD4<code>AOF</code>\u66F4\u5FEB\u91CD\u542F</li></ul><p><strong>\u7F3A\u70B9</strong>:</p><ul><li>\u4F1A\u4E22\u5931\u6700\u540E\u4E00\u6B21\u5FEB\u7167\u540E\u7684\u6570\u636E</li><li>\u6570\u636E\u91CF\u5F88\u5927\u65F6\uFF0C<code>fork</code>\u4F1A\u8017\u65F6</li></ul><h4 id="_3-5-aof\u7684\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-5-aof\u7684\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> 3.5 <code>AOF</code>\u7684\u6267\u884C\u8FC7\u7A0B</h4><p><code>AOF</code>\u662F\u5199\u540E\u65E5\u5FD7\uFF0C\u8BB0\u5F55\u7684\u5185\u5BB9\u662F<code>RESP</code>\u534F\u8BAE\u7684\u6570\u636E\uFF0C\u662F\u547D\u4EE4\u65E5\u5FD7</p><blockquote><p>\u5199\u540E\u65E5\u5FD7: \u5148\u6267\u884C\u547D\u4EE4\uFF0C\u5199\u5165\u5185\u5B58\u540E\u5199\u5165\u65E5\u5FD7</p><p>\u907F\u514D\u989D\u5916\u7684\u68C0\u67E5\u5F00\u9500\uFF0C\u4E0D\u963B\u585E\u5F53\u524D\u5199\u64CD\u4F5C</p></blockquote><h4 id="_3-6-aof\u5199\u56DE\u78C1\u76D8\u7684\u7B56\u7565-appendfsync" tabindex="-1"><a class="header-anchor" href="#_3-6-aof\u5199\u56DE\u78C1\u76D8\u7684\u7B56\u7565-appendfsync" aria-hidden="true">#</a> 3.6 <code>AOF</code>\u5199\u56DE\u78C1\u76D8\u7684\u7B56\u7565(<code>appendfsync</code>)</h4><ul><li><p><code>Always</code>: \u6BCF\u4E2A\u547D\u4EE4\u6267\u884C\u5B8C\u6210\uFF0C\u7ACB\u523B\u540C\u6B65\u5C06\u65E5\u5FD7\u5199\u56DE\u78C1\u76D8</p></li><li><p><code>EverySec</code>: \u6BCF\u4E2A\u547D\u4EE4\u6267\u884C\u5B8C\u6210\uFF0C\u5148\u5199\u5230<code>AOF</code>\u5185\u5B58\u7F13\u51B2\uFF0C\u6BCF\u4E2A1\u79D2\u5199\u56DE\u78C1\u76D8</p></li><li><p><code>No</code>: \u7531\u64CD\u4F5C\u7CFB\u7EDF\u63A7\u5236\u4F55\u65F6\u5C06\u5185\u5B58\u7F13\u51B2\u5199\u56DE\u5230\u78C1\u76D8</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">\u5199\u56DE\u65F6\u673A</th><th style="text-align:center;">\u4F18\u70B9</th><th style="text-align:center;">\u7F3A\u70B9</th></tr></thead><tbody><tr><td style="text-align:center;"><code>Always</code></td><td style="text-align:center;">\u540C\u6B65</td><td style="text-align:center;">\u53EF\u9760\uFF0C\u57FA\u672C\u4E0D\u4E22</td><td style="text-align:center;">\u5F71\u54CD\u6027\u80FD</td></tr><tr><td style="text-align:center;"><code>EverySec</code></td><td style="text-align:center;">\u6BCF\u79D2</td><td style="text-align:center;">\u6027\u80FD\u9002\u4E2D</td><td style="text-align:center;">\u4E22\u59311\u79D2</td></tr><tr><td style="text-align:center;"><code>No</code></td><td style="text-align:center;">OS\u63A7\u5236</td><td style="text-align:center;">\u6027\u80FD\u597D</td><td style="text-align:center;">\u4E22\u6570\u636E\u591A</td></tr></tbody></table></li></ul><h4 id="_3-7-aof\u91CD\u5199\u673A\u5236-rewrite" tabindex="-1"><a class="header-anchor" href="#_3-7-aof\u91CD\u5199\u673A\u5236-rewrite" aria-hidden="true">#</a> 3.7 <code>AOF</code>\u91CD\u5199\u673A\u5236(<code>rewrite</code>)</h4><blockquote><p>\u89E3\u51B3\u65E5\u5FD7\u6587\u4EF6\u592A\u5927\u7684\u95EE\u9898</p></blockquote><p>\u5C06\u591A\u6B21\u4FEE\u6539\u7684\u547D\u4EE4\uFF0C\u5408\u5E76\u4E00\u4E2A\u547D\u4EE4\uFF08\u4F8B\u5982: <code>set k 1</code>,<code> set k 2</code> =&gt; <code>set k 2</code>\uFF09</p><p><strong>\u4E0D\u963B\u585E\u4E3B\u7EBF\u7A0B</strong>:</p><ol><li>\u6267\u884C\u91CD\u5199\u65F6\uFF0C\u4E3B\u7EBF\u7A0B<code>fork</code>\u51FA\u540E\u53F0\u7684<code>bgrewriteaof</code>\u5B50\u8FDB\u7A0B</li><li>Redis\u5C06\u5199\u64CD\u4F5C\u5199\u5230AOF\u7F13\u51B2\u533A</li><li>\u65B0\u7684AOF\u91CD\u5199\u65E5\u5FD7\u88AB\u5199\u5230\u91CD\u5199\u65E5\u5FD7\u7684\u7F13\u51B2\u533A\uFF0C\u7B49\u62F7\u8D1D\u6570\u636E\u90FD\u5199\u5B8C\u540E\uFF0C\u91CD\u5199\u7684\u6700\u65B0\u64CD\u4F5C\u5199\u5165\u5230AOF\u65E5\u5FD7</li></ol><h4 id="_3-8-aof\u7684\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_3-8-aof\u7684\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> 3.8 <code>AOF</code>\u7684\u4F18\u7F3A\u70B9</h4><p><strong>\u4F18\u70B9</strong>:</p><ul><li>\u914D\u7F6E\u4E0D\u540C\u7684\u5199\u56DE\u7B56\u7565\u4FDD\u8BC1\u6570\u636E\u4E22\u5931\u5C11</li><li>\u4E0D\u5BB9\u6613\u635F\u574F\uFF0C\u5373\u4F7F\u67D0\u79CD\u539F\u56E0\u6CA1\u5199\u5B8C\uFF0C<code>redis-check-aof</code>\u5DE5\u5177\u80FD\u591F\u4FEE\u590D</li><li>AOF\u65E5\u5FD7\u6613\u89E3\u6790</li><li>AOF\u65E5\u5FD7\u53EF\u91CD\u5199</li></ul><p><strong>\u7F3A\u70B9</strong>:</p><ul><li>AOF\u6587\u4EF6\u901A\u5E38\u6BD4\u540C\u4E00\u6570\u636E\u96C6\u7684RDB\u6587\u4EF6\u5927</li><li>\u53EF\u80FD\u4F1A\u6BD4RDB\u6162</li></ul><h3 id="_4-\u9AD8\u53EF\u7528-\u4E3B\u4ECE\u590D\u5236" tabindex="-1"><a class="header-anchor" href="#_4-\u9AD8\u53EF\u7528-\u4E3B\u4ECE\u590D\u5236" aria-hidden="true">#</a> 4. \u9AD8\u53EF\u7528-\u4E3B\u4ECE\u590D\u5236</h3><h4 id="_4-1-\u4E3B\u4ECE\u590D\u5236\u7684\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_4-1-\u4E3B\u4ECE\u590D\u5236\u7684\u6D41\u7A0B" aria-hidden="true">#</a> 4.1 \u4E3B\u4ECE\u590D\u5236\u7684\u6D41\u7A0B</h4><ol><li>\u4ECE\u5E93\u6267\u884C<code>replica of</code>\uFF0C\u901A\u8FC7<code>psync</code>\u548C\u4E3B\u5E93\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u534F\u5546\u540C\u6B65\uFF0C\u4FDD\u5B58\u4E3B\u8282\u70B9\u7684\u4FE1\u606F</li><li>\u4E3B\u5E93\u540C\u6B65\u6570\u636E(RDB)\u7ED9\u4ECE\u5E93</li><li>\u4ECE\u5E93\u6E05\u7A7A\u73B0\u6709\u6570\u636E\uFF0C\u52A0\u8F7DRDB</li><li>\u4E3B\u5E93\u53D1\u9001<code>Repl Buffer</code>\uFF08\u65B0\u5199\u5165\u7684\u547D\u4EE4\uFF09\u7ED9\u4ECE\u5E93\uFF0C\u4ECE\u5E93\u52A0\u8F7D<code>Repl Buffer</code></li></ol><h4 id="_4-2-\u5982\u4F55\u5206\u62C5\u5168\u91CF\u590D\u5236\u65F6\u7684\u4E3B\u5E93\u538B\u529B" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5982\u4F55\u5206\u62C5\u5168\u91CF\u590D\u5236\u65F6\u7684\u4E3B\u5E93\u538B\u529B" aria-hidden="true">#</a> 4.2 \u5982\u4F55\u5206\u62C5\u5168\u91CF\u590D\u5236\u65F6\u7684\u4E3B\u5E93\u538B\u529B</h4><p>\u53EF\u4EE5\u901A\u8FC7 <strong>\u4E3B-\u4ECE-\u4ECE</strong>\uFF0C\u5C06\u4E3B\u5E93\u751F\u6210\u7684RDB\u548C\u4F20\u8F93RDB\u7684\u538B\u529B\u4EE5\u7EA7\u8054\u7684\u65B9\u5F0F\u5206\u6563\u5230\u4ECE\u5E93\u4E0A</p><h4 id="_4-3-\u4E3B\u4ECE\u5E93\u95F4\u7F51\u7EDC\u65AD\u4E86\u600E\u4E48\u529E" tabindex="-1"><a class="header-anchor" href="#_4-3-\u4E3B\u4ECE\u5E93\u95F4\u7F51\u7EDC\u65AD\u4E86\u600E\u4E48\u529E" aria-hidden="true">#</a> 4.3 \u4E3B\u4ECE\u5E93\u95F4\u7F51\u7EDC\u65AD\u4E86\u600E\u4E48\u529E</h4><p>\u7F51\u7EDC\u65AD\u4E86\u4E4B\u540E\uFF0C\u4E3B\u4ECE\u5E93\u91C7\u7528<strong>\u589E\u91CF\u590D\u5236</strong>\u7684\u65B9\u5F0F\u7EE7\u7EED\u540C\u6B65</p><ul><li>\u5168\u91CF\u590D\u5236: \u540C\u6B65\u6240\u6709\u6570\u636E</li><li>\u589E\u91CF\u590D\u5236: \u628A\u4E3B\u4ECE\u7F51\u7EDC\u7AEF\u8FDE\u671F\u95F4\u4E3B\u5E93\u6536\u5230\u7684\u547D\u4EE4\u540C\u6B65\u4ECE\u5E93</li></ul><h3 id="_5-\u9AD8\u53EF\u7528-\u54E8\u5175" tabindex="-1"><a class="header-anchor" href="#_5-\u9AD8\u53EF\u7528-\u54E8\u5175" aria-hidden="true">#</a> 5. \u9AD8\u53EF\u7528-\u54E8\u5175</h3><blockquote><p>\u5B9E\u73B0\u4E3B\u4ECE\u5E93\u5207\u6362\u7684\u5173\u952E\u673A\u5236</p></blockquote><h4 id="_5-1-\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_5-1-\u76D1\u63A7" aria-hidden="true">#</a> 5.1 \u76D1\u63A7</h4><p>\u5468\u671F\u6027\u7ED9\u6240\u6709\u4E3B\u4ECE\u5E93\u53D1\u9001<code>PING</code>,\u68C0\u6D4B\u662F\u5426\u6B63\u5E38\u8FD0\u884C</p><p><strong>\u4E3B\u89C2\u4E0B\u7EBF</strong>: \u5355\u54E8\u5175\u8BA4\u4E3A\u4E0B\u7EBF</p><p><strong>\u5BA2\u89C2\u4E0B\u7EBF</strong>: \u8D85\u534A\u6570\u54E8\u5175\u8BA4\u4E3A\u4E0B\u7EBF</p><h4 id="_5-2-\u9009\u4E3B" tabindex="-1"><a class="header-anchor" href="#_5-2-\u9009\u4E3B" aria-hidden="true">#</a> 5.2 \u9009\u4E3B</h4><ul><li>\u7B5B\u9009: \u6839\u636E\u4ECE\u5E93\u7684\u5F53\u524D\u5728\u7EBF\u72B6\u6001\u548C\u5386\u53F2\u7F51\u7EDC\u8FDE\u63A5\u72B6\u6001\u8FC7\u6EE4</li><li>\u6253\u5206: \u4ECE\u5E93\u4F18\u5148\u7EA7\uFF0C\u4ECE\u5E93\u590D\u5236\u8FDB\u5EA6\uFF0C\u4ECE\u5E93ID\u53F7</li></ul><h4 id="_5-3-\u901A\u77E5" tabindex="-1"><a class="header-anchor" href="#_5-3-\u901A\u77E5" aria-hidden="true">#</a> 5.3 \u901A\u77E5</h4><ul><li>\u8BA9\u4ECE\u5E93\u6267\u884C<code>Replica of</code>\uFF0C\u4E0E\u65B0\u4E3B\u5E93\u540C\u6B65</li><li>\u901A\u77E5\u5BA2\u6237\u7AEF\uFF0C\u4E0E\u65B0\u4E3B\u5E93\u8FDE\u63A5</li></ul><h4 id="_5-4-\u54E8\u5175\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#_5-4-\u54E8\u5175\u96C6\u7FA4" aria-hidden="true">#</a> 5.4 \u54E8\u5175\u96C6\u7FA4</h4><p><code>sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;port&gt; &lt;quorum&gt;</code></p><p>\u53EA\u6709\u8BA2\u9605\u540C\u4E00\u4E2A\u9891\u9053\u7684\u5E94\u7528\u624D\u80FD\u901A\u8FC7\u53D1\u5E03\u7684\u6D88\u606F\u8FDB\u884C\u6D88\u606F\u4EA4\u6362</p><p><strong>\u54E8\u5175-\u4E3B\u5E93</strong>: \u57FA\u4E8E<code>pub/sub</code>\u673A\u5236\u7EC4\u6210\u54E8\u5175\u96C6\u7FA4(<code>__sentinel__:hello</code>\u9891\u9053)</p><p><strong>\u54E8\u5175-\u4ECE\u5E93</strong>: \u54E8\u5175\u5411\u4E3B\u5E93\u53D1\u9001<code>info</code>\u547D\u4EE4\uFF0C\u5F97\u77E5\u4ECE\u5E93\u4FE1\u606F\uFF0C\u5EFA\u7ACB\u8FDE\u63A5</p><p><strong>\u5BA2\u6237\u7AEF</strong>: \u57FA\u4E8E<code>pub/sub</code>\u673A\u5236\u7684\u5BA2\u6237\u7AEF\u65F6\u95F4\u901A\u77E5</p><h4 id="_5-5-\u7531\u54EA\u4E2A\u54E8\u5175\u6267\u884C\u4E3B\u4ECE\u5207\u6362" tabindex="-1"><a class="header-anchor" href="#_5-5-\u7531\u54EA\u4E2A\u54E8\u5175\u6267\u884C\u4E3B\u4ECE\u5207\u6362" aria-hidden="true">#</a> 5.5 \u7531\u54EA\u4E2A\u54E8\u5175\u6267\u884C\u4E3B\u4ECE\u5207\u6362</h4><p>\u53D1\u8D77\u6295\u7968\uFF0C\u591A\u6570\u4E3Aleader</p><h3 id="_6-redis-cluster-\u5206\u7247\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#_6-redis-cluster-\u5206\u7247\u96C6\u7FA4" aria-hidden="true">#</a> 6. <code>Redis Cluster</code>(\u5206\u7247\u96C6\u7FA4)</h3><blockquote><p>\u4E3A\u4E86\u4FDD\u5B58\u5927\u91CF\u6570\u636E\uFF0C\u7531\u4E24\u79CD\u6269\u5BB9\u65B9\u6848\uFF1A1.\u5347\u7EA7\u5355Redis\u5B9E\u4F8B\u7684\u8D44\u6E90\u914D\u7F6E\uFF0C2.\u589E\u52A0Redis\u5B9E\u4F8B\u4E2A\u6570</p></blockquote><h4 id="_6-1-\u6570\u636E\u5207\u7247\u548C\u5B9E\u4F8B\u7684\u5BF9\u5E94\u5206\u5E03\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#_6-1-\u6570\u636E\u5207\u7247\u548C\u5B9E\u4F8B\u7684\u5BF9\u5E94\u5206\u5E03\u5173\u7CFB" aria-hidden="true">#</a> 6.1 \u6570\u636E\u5207\u7247\u548C\u5B9E\u4F8B\u7684\u5BF9\u5E94\u5206\u5E03\u5173\u7CFB</h4><p><code>Redis Cluster</code>\u91C7\u7528\u54C8\u5E0C\u69FD(<code>hash slot</code>)\u6765\u5904\u7406\u6570\u636E\u548C\u5B9E\u4F8B\u4E4B\u95F4\u7684\u5173\u7CFB</p><p><code>CRC16(KEY) % 16384 = n</code></p><p>\u5176\u4E2D: <code>CRC16 \u8868\u793ACRC16\u7B97\u6CD5\u5F97\u5230\u4E00\u4E2A16bit\u7684\u503C\uFF0C16385\u4E2A\u54C8\u5E0C\u69FD\uFF0Cn\u8868\u793A\u5BF9\u5E94\u7684\u5B9E\u4F8B</code></p><h4 id="_6-2-\u5BA2\u6237\u7AEF\u5982\u4F55\u5B9A\u4F4D\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_6-2-\u5BA2\u6237\u7AEF\u5982\u4F55\u5B9A\u4F4D\u6570\u636E" aria-hidden="true">#</a> 6.2 \u5BA2\u6237\u7AEF\u5982\u4F55\u5B9A\u4F4D\u6570\u636E</h4><p>Redis\u5B9E\u4F8B\u4F1A\u628A\u81EA\u5DF1\u7684\u54C8\u5E0C\u69FD\u4FE1\u606F\u901A\u8FC7<code>Gossip</code>\u53D1\u9001\u7ED9\u548C\u5B83\u76F8\u8FDE\u7684\u5176\u4ED6\u5B9E\u4F8B\uFF0C\u5BA2\u6237\u7AEF\u6536\u5230\u54C8\u5E0C\u69FD\u4FE1\u606F\u7F13\u5B58\u5728\u672C\u5730\uFF0C\u8BF7\u6C42\u65F6\u5148\u7B97\u54C8\u5E0C\u69FD</p><p><code>hash slot</code>\u53EF\u80FD\u4F1A\u91CD\u65B0\u5206\u914D: 1.\u5B9E\u4F8B\u7531\u65B0\u589E\u6216\u5220\u9664\uFF0C2.\u4E3A\u4E86\u8D1F\u8F7D\u5747\u8861</p><h4 id="_6-3-moved-\u91CD\u5B9A\u5411-\u548C-ask" tabindex="-1"><a class="header-anchor" href="#_6-3-moved-\u91CD\u5B9A\u5411-\u548C-ask" aria-hidden="true">#</a> 6.3 <code>Moved</code>\uFF08\u91CD\u5B9A\u5411\uFF09\u548C <code>ASK</code></h4><p>\u5BA2\u6237\u7AEF\u7ED9\u4E00\u4E2A\u5B9E\u4F8B\u53D1\u9001\u6570\u636E\u8BFB\u5199\u64CD\u4F5C\u65F6\uFF0C\u5B9E\u4F8B\u4E0A\u6CA1\u6709\u76F8\u5E94\u6570\u636E\uFF0C\u5BA2\u6237\u7AEF\u8981\u518D\u7ED9\u4E00\u4E2A\u65B0\u5B9E\u4F8B\u53D1\u9001\u64CD\u4F5C\u6307\u4EE4</p><p>\u5047\u8BBE<code>hash slot</code>\u91CD\u65B0\u5206\u914D\uFF0C\u6570\u636E\u7531<code>slot 1</code>\u8FC1\u79FB\u5230<code>slot 2</code>\uFF0C\u5F53\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6570\u636E\u65F6\uFF0C\u5148\u4ECE\u672C\u5730\u7F13\u5B58\u4E2D\u8BFB\u5230<code>slot 1</code>,</p><p>\u5982\u679C<code>slot 1</code>\u5DF2\u8FC1\u79FB\u5230<code>slot 2</code>\uFF0C\u6B64\u65F6\u5B9E\u4F8B1\u5C06\u8FD4\u56DE<code>Moved 1010 ip:port</code>\uFF0C\u5BA2\u6237\u7AEF\u518D\u6B21\u8BF7\u6C42\u5230\u5B9E\u4F8B2\uFF0C\u5E76\u66F4\u65B0\u672C\u5730\u7F13\u5B58\uFF1B</p><p>\u5982\u679C\u6B63\u5728\u8FC1\u79FB\u4E2D(\u90E8\u5206\u8FC1\u79FB)\uFF0C\u5B9E\u4F8B1\u5C06\u8FD4\u56DE\u5BA2\u6237\u7AEF<code>ASK 100 ip:port</code>\uFF0C</p><blockquote><p><code>ASK</code>\u8868\u793A<code>slot</code>\u6570\u636E\u8FD8\u5728\u8FC1\u79FB\u4E2D\uFF0C\u6216\u8005\u628A\u9501\u8BF7\u6C42\u7684\u6570\u636E\u7684\u6700\u65B0\u5B9E\u4F8B\u5730\u5740\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF</p></blockquote><p>\u6B64\u65F6\u5BA2\u6237\u7AEF\u5411\u65B0\u5B9E\u4F8B\u53D1\u9001<code>ASKING</code>,\u7136\u540E\u518D\u53D1\u64CD\u4F5C\u547D\u4EE4</p><blockquote><p><code>Moved</code>: \u4F1A\u66F4\u65B0\u5BA2\u6237\u7AEF\u7F13\u5B58\uFF0C\u6C38\u4E45\u5411\u65B0\u5B9E\u4F8B\u53D1\u8BF7\u6C42</p><p><code>Ask</code>\uFF1A \u4E0D\u4F1A\u66F4\u65B0\u5BA2\u6237\u7AEF\u7F13\u5B58\uFF0C\u53D1\u4E00\u6B21\u8BF7\u6C42\u7ED9\u5B9E\u4F8B</p></blockquote><h4 id="_6-4-\u5982\u4F55\u6269\u5BB9-\u7F29\u5BB9" tabindex="-1"><a class="header-anchor" href="#_6-4-\u5982\u4F55\u6269\u5BB9-\u7F29\u5BB9" aria-hidden="true">#</a> 6.4 \u5982\u4F55\u6269\u5BB9/\u7F29\u5BB9</h4><p>\u901A\u8FC7\u547D\u4EE4<code>redis-cli --cluster</code></p><h4 id="_6-5-\u4EC0\u4E48\u662F\u526F\u672C\u6F02\u79FB" tabindex="-1"><a class="header-anchor" href="#_6-5-\u4EC0\u4E48\u662F\u526F\u672C\u6F02\u79FB" aria-hidden="true">#</a> 6.5 \u4EC0\u4E48\u662F\u526F\u672C\u6F02\u79FB</h4><p>\u5F53master\u6302\u540E\uFF0C\u53EA\u6709\u4E00\u4E2A\u4ECE\u673A\uFF0C\u4ECE\u5176\u4ED6master\u4E2D\u7684\u591A\u4E2A(&gt;=2)\u4ECE\u673A\u4E2D\u9009\u4E00\u4E2A\u505A\u4E3B\u4ECE</p>',75),De={id:"_6-6-\u4E3A\u4EC0\u4E48\u662F16483\u4E2A\u54C8\u5E0C\u69FD",tabindex:"-1"},Ce=e("a",{class:"header-anchor",href:"#_6-6-\u4E3A\u4EC0\u4E48\u662F16483\u4E2A\u54C8\u5E0C\u69FD","aria-hidden":"true"},"#",-1),Ee={href:"https://github.com/redis/redis/issues/2576",target:"_blank",rel:"noopener noreferrer"},Se=a('<ul><li><p>\u5982\u679C\u66F4\u591A: Redis\u53D1\u9001\u5FC3\u8DF3\u5305\u6240\u6709\u69FD\u4FE1\u606F\uFF0C\u4F7F\u752816383K\u4E2A\u4F1A\u4EA7\u751F2kb\u7684\u6587\u4EF6\uFF0C\u66F4\u8282\u7701\u7A7A\u95F4\uFF0C\u4E00\u822C\u6765\u8BF4\uFF0CRedis\u96C6\u7FA4\u4E0D\u4F1A\u8D85\u8FC71000\u4E2A\uFF0C16384\u4E2A\u69FD\u4F4D\u8DB3\u591F\u7528</p></li><li><p>\u5982\u679C\u66F4\u5C11: 8192\u4E2A\uFF0C\u8282\u7701\u7684\u7A7A\u95F4\u4E0D\u591A\uFF0C\u4E14\u54C8\u5E0C\u51B2\u7A81\u5927</p></li></ul><h3 id="_7-redis\u4E3A\u4EC0\u4E48\u5FEB" tabindex="-1"><a class="header-anchor" href="#_7-redis\u4E3A\u4EC0\u4E48\u5FEB" aria-hidden="true">#</a> 7. Redis\u4E3A\u4EC0\u4E48\u5FEB</h3><p><img src="https://pbs.twimg.com/media/FMx3JZRUYAIWWKq?format=jpg&amp;name=4096x4096" alt=""></p><h4 id="_7-1-\u57FA\u4E8E\u5185\u5B58\u5B58\u50A8" tabindex="-1"><a class="header-anchor" href="#_7-1-\u57FA\u4E8E\u5185\u5B58\u5B58\u50A8" aria-hidden="true">#</a> 7.1 \u57FA\u4E8E\u5185\u5B58\u5B58\u50A8</h4><p>\u5185\u5B58\u8BFB\u5199\u4F18\u4E8E\u78C1\u76D8</p><h4 id="_7-2-\u7EBF\u7A0B\u6A21\u578B-\u5355\u7EBF\u7A0B\u3001\u591A\u8DEF\u590D\u7528" tabindex="-1"><a class="header-anchor" href="#_7-2-\u7EBF\u7A0B\u6A21\u578B-\u5355\u7EBF\u7A0B\u3001\u591A\u8DEF\u590D\u7528" aria-hidden="true">#</a> 7.2 \u7EBF\u7A0B\u6A21\u578B(\u5355\u7EBF\u7A0B\u3001\u591A\u8DEF\u590D\u7528)</h4><p>Redis\u7684\u7F51\u7EDCIO\u548C\u952E\u503C\u5BF9\u8BFB\u5199\u65F6\u5355\u7EBF\u7A0B\u7684\uFF0C\u907F\u514D\u4E86\u591A\u7EBF\u7A0B\u7684\u5F00\u9500\uFF0C\u91C7\u7528\u4E86<strong>\u591A\u8DEF\u590D\u7528\u673A\u5236</strong></p><blockquote><p>\u591A\u8DEF\u590D\u7528</p></blockquote><h4 id="_7-3-\u9AD8\u6548\u7684\u6570\u636E\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_7-3-\u9AD8\u6548\u7684\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a> 7.3 \u9AD8\u6548\u7684\u6570\u636E\u7ED3\u6784</h4><h3 id="_8-redis\u53EA\u6709\u5355\u7EBF\u7A0B\u5417" tabindex="-1"><a class="header-anchor" href="#_8-redis\u53EA\u6709\u5355\u7EBF\u7A0B\u5417" aria-hidden="true">#</a> 8. Redis\u53EA\u6709\u5355\u7EBF\u7A0B\u5417\uFF1F</h3><p>Redis\u4E2D\u7684\u7F51\u7EDCIO\uFF0C\u952E\u503C\u5BF9\u8BFB\u5199\u662F\u5355\u7EBF\u7A0B\uFF0CRDB\u3001AOF\u7B49\u662F\u5176\u4ED6\u7EBF\u7A0B\uFF0C</p><p>Redis6.0 \u540E\u91C7\u7528\u7F51\u7EDCI/O\u591A\u7EBF\u7A0B\u51FA\u91CC\u7F51\u7EDC\u8BF7\u6C42\uFF0C\u5BF9\u4E8E\u952E\u503C\u5BF9\u8BFB\u5199\u4ECD\u662F\u5355\u7EBF\u7A0B</p><h3 id="_9-redis6-0\u548C7-0\u7684\u65B0\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#_9-redis6-0\u548C7-0\u7684\u65B0\u7279\u6027" aria-hidden="true">#</a> 9. Redis6.0\u548C7.0\u7684\u65B0\u7279\u6027</h3><h3 id="_10-\u7F13\u5B58\u5F02\u5E38" tabindex="-1"><a class="header-anchor" href="#_10-\u7F13\u5B58\u5F02\u5E38" aria-hidden="true">#</a> 10. \u7F13\u5B58\u5F02\u5E38</h3><h4 id="_10-1-\u7F13\u5B58\u96EA\u5D29" tabindex="-1"><a class="header-anchor" href="#_10-1-\u7F13\u5B58\u96EA\u5D29" aria-hidden="true">#</a> 10.1 \u7F13\u5B58\u96EA\u5D29</h4><p>\u7A81\u7136\u95F4\u5927\u91CF\u7684key\u5931\u6548\uFF0C\u6216\u8005redis\u91CD\u542F\uFF0C\u5927\u91CF\u7684\u8BF7\u6C42\u6253\u5230\u6570\u636E\u5E93</p><p><strong>\u89E3\u51B3\u65B9\u6848</strong>\uFF1A</p><ul><li>key\u8BBE\u7F6E\u5747\u5300\u7684\u8FC7\u671F\u65F6\u95F4</li><li>redis\u5B95\u673A\u7684\u60C5\u51B5\uFF0C\u8981\u91C7\u7528\u9AD8\u53EF\u7528\u65B9\u6848</li></ul><h4 id="_10-2-\u7F13\u5B58\u51FB\u7A7F" tabindex="-1"><a class="header-anchor" href="#_10-2-\u7F13\u5B58\u51FB\u7A7F" aria-hidden="true">#</a> 10.2 \u7F13\u5B58\u51FB\u7A7F</h4><p>\u67D0\u4E2A\u70ED\u70B9key\u8FC7\u671F\u7684\u77AC\u95F4\uFF0C\u5927\u91CF\u8BF7\u6C42\u6253\u5230\u6570\u636E\u5E93</p><p><strong>\u89E3\u51B3\u65B9\u6848</strong>:</p><ul><li>\u6C38\u4E0D\u8FC7\u671F</li><li>\u4E92\u65A5\u9501\u65B9\u6848\uFF0C\u5728\u5931\u6548\u65F6\u4E0D\u7ACB\u5373\u52A0\u8F7D\u6570\u636E\u5E93\uFF0C \u800C\u662F\u4F7F\u7528<code>setnx</code>\u7B49\u6210\u529F\u7684\u65F6\u5019\u52A0\u8F7D\u7F13\u5B58\u548C\u6570\u636E\u5E93</li></ul><h4 id="_10-3-\u7F13\u5B58\u7A7F\u900F" tabindex="-1"><a class="header-anchor" href="#_10-3-\u7F13\u5B58\u7A7F\u900F" aria-hidden="true">#</a> 10.3 \u7F13\u5B58\u7A7F\u900F</h4><p>\u67E5\u8BE2\u4E0D\u5B58\u5728\u7684key,\u6570\u636E\u5E93\u4E2D\u4E5F\u4E0D\u5B58\u5728(\u7A7F\u900F\u5230\u6570\u636E\u5E93)\uFF0C\u5BFC\u81F4\u6570\u636E\u5E93\u538B\u529B\u8FC7\u5927\u751A\u81F3\u5B95\u673A</p><p><strong>\u89E3\u51B3\u65B9\u6848</strong>:</p><ul><li>\u5BF9\u67E5\u8BE2\u7ED3\u679C\u4E3A\u7A7A\u7684\u60C5\u51B5\u4E5F\u8FDB\u884C\u7F13\u5B58\uFF08\u7A7A\u503C\u6216\u8005\u9ED8\u8BA4\u503C\uFF09\uFF0Cttl\u77ED\u4E9B\u6216\u8005\u6709\u6570\u636E\u65F6\u5220\u9664\uFF0C\u4F46\u662F\u4F1A\u5BFC\u81F4\u592A\u591A\u7A7A\u503C\u5360\u7528\u7A7A\u95F4</li><li>\u5F15\u5165\u5E03\u9686\u8FC7\u6EE4\u5668\uFF0C\u4E0D\u5B58\u5728\u5219\u8FD4\u56DE</li></ul><h4 id="_10-4-bigkey" tabindex="-1"><a class="header-anchor" href="#_10-4-bigkey" aria-hidden="true">#</a> 10.4 <code>BigKey</code></h4><h4 id="_10-5-hotkey" tabindex="-1"><a class="header-anchor" href="#_10-5-hotkey" aria-hidden="true">#</a> 10.5 <code>HotKey</code></h4><h3 id="_11-\u7F13\u5B58\u548C\u6570\u636E\u5E93\u7684\u4E00\u81F4\u6027" tabindex="-1"><a class="header-anchor" href="#_11-\u7F13\u5B58\u548C\u6570\u636E\u5E93\u7684\u4E00\u81F4\u6027" aria-hidden="true">#</a> 11. \u7F13\u5B58\u548C\u6570\u636E\u5E93\u7684\u4E00\u81F4\u6027</h3>',29),we={href:"https://mp.weixin.qq.com/s/4W7vmICGx6a_WX701zxgPQ",target:"_blank",rel:"noopener noreferrer"},Ie=a('<ul><li><p>\u5EF6\u65F6\u53CC\u5220</p><p>\u66F4\u65B0\u65F6\u5148\u5220\u9664\u7F13\u5B58\uFF0C\u518D\u66F4\u65B0\u6570\u636E\u5E93\uFF0C\u7B49\u4E00\u6BB5\u65F6\u95F4\u540E\u518D\u5220\u9664\u7F13\u5B58\u3002\u4F46\u662F\u9700\u8981\u8BC4\u4F30\u5EF6\u65F6\u591A\u4E45\uFF0C\u5728\u5206\u5E03\u5F0F\u9AD8\u5E76\u53D1\u60C5\u51B5\u4E0B\u5F88\u96BE\u8BC4\u4F30</p></li><li><p>\u5F15\u5165\u6D88\u606F\u961F\u5217</p><p>\u5148\u66F4\u65B0\u6570\u636E\u5E93\uFF0CMySQL\u4EA7\u751F<code>binlog</code>,\u4F7F\u7528Canal\u8BA2\u9605<code>binlog</code>\uFF0C\u5C06\u6D88\u606F\u53D1\u9001\u5230MQ\uFF0C\u901A\u8FC7ack\u5F02\u6B65\u91CD\u8BD5\u4FDD\u8BC1\u5220\u9664\u7F13\u5B58</p></li></ul><h3 id="_12-\u57FA\u4E8Eredis\u7684\u5206\u5E03\u5F0F\u9501" tabindex="-1"><a class="header-anchor" href="#_12-\u57FA\u4E8Eredis\u7684\u5206\u5E03\u5F0F\u9501" aria-hidden="true">#</a> 12. \u57FA\u4E8ERedis\u7684\u5206\u5E03\u5F0F\u9501</h3><h4 id="_12-1-sexnx-lock-val-del-lock" tabindex="-1"><a class="header-anchor" href="#_12-1-sexnx-lock-val-del-lock" aria-hidden="true">#</a> 12.1 <code>sexnx lock val / del lock</code></h4><p>\u5982\u679C\u89E3\u9501\u5F02\u5E38\uFF0C\u4F1A\u53D1\u751F\u6B7B\u9501 =&gt; \u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4</p><h4 id="_12-2-setnx-lock-val-expire-lock-n" tabindex="-1"><a class="header-anchor" href="#_12-2-setnx-lock-val-expire-lock-n" aria-hidden="true">#</a> 12.2 <code>setnx lock val / expire lock n</code></h4><p>\u4E0D\u80FD\u4FDD\u8BC1\u539F\u5B50\u6027</p><h4 id="_12-3-set-lock-uuid-ex-n-nx-lua-get-del" tabindex="-1"><a class="header-anchor" href="#_12-3-set-lock-uuid-ex-n-nx-lua-get-del" aria-hidden="true">#</a> 12.3 <code>set lock $uuid ex n nx / lua:get+del</code></h4><p>\u9501\u7684\u65F6\u95F4\u4E0D\u597D\u8BC4\u4F30 =&gt; \u589E\u52A0\u5B88\u62A4\u8FDB\u7A0B\u7EED\u671F</p>',8),Ke={id:"_12-4-redisson",tabindex:"-1"},Ne=e("a",{class:"header-anchor",href:"#_12-4-redisson","aria-hidden":"true"},"#",-1),Me={href:"https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8",target:"_blank",rel:"noopener noreferrer"},Le=e("p",null,"\u901A\u8FC7Lua\u811A\u672C(\u539F\u5B50\u6027)\uFF0C\u5BF9hash(\u9501\u7684\u5B58\u50A8\u7ED3\u6784)\u8FDB\u884C\u589E\u51CF(\u53EF\u91CD\u5165)\uFF0C\u91C7\u7528\u770B\u95E8\u72D7\u673A\u5236\u8FDB\u884C\u7EED\u671F\uFF0C\u91CA\u653E\u9501\u662F\u91C7\u7528\u53D1\u5E03/\u8BA2\u9605\u7684\u65B9\u5F0F",-1),ze={id:"_12-5-redlock",tabindex:"-1"},Ge=e("a",{class:"header-anchor",href:"#_12-5-redlock","aria-hidden":"true"},"#",-1),We={href:"https://github.com/wujunwei/redlock",target:"_blank",rel:"noopener noreferrer"},Ve=e("blockquote",null,[e("p",null,[d("\u5F53\u53D1\u751F\u4E3B\u4ECE\u5207\u6362\u65F6\u9501\u5931\u6548\uFF0C\u91C7\u7528"),e("code",null,"redlock"),d("\u65B9\u6848\uFF08\u524D\u63D0: \u81F3\u5C11\u67095\u4E2A\u4E3B\u5E93\u5B9E\u4F8B\uFF09")])],-1),He=e("p",null,[d("\u5BA2\u6237\u7AEF\u83B7\u53D6\u5F53\u524D\u65F6\u95F4\u6233"),e("code",null,"t1"),d("\uFF0C\u4F9D\u6B21\u54115\u4E2Aredis\u5B9E\u4F8B\u53D1\u8D77\u52A0\u9501\u8BF7\u6C42\uFF0C\u4E14\u6BCF\u4E2A\u8BF7\u6C42\u6709\u8D85\u65F6\u65F6\u95F4\u3002")],-1),Pe=e("p",null,"\u5982\u679C\u67D0\u4E00\u4E2A\u5931\u8D25\uFF0C\u5219\u7ACB\u5373\u5411\u4E0B\u4E00\u4E2A\u7533\u8BF7\uFF1B",-1),Qe=e("p",null,[d("\u5982\u679C\u5927\u4E8E\u534A\u6570\u4E2A\u9501\u6210\u529F\uFF0C\u5219\u83B7\u53D6\u65F6\u95F4\u6233"),e("code",null,"t2")],-1),Ye=e("p",null,"\u52A0\u9501\u4E0D\u6210\u529F\u65F6\u5219\u901A\u8FC7lua\u5411\u5168\u90E8\u8282\u70B9\u53D1\u8D77\u91CA\u653E\u9501\u8BF7\u6C42",-1);function je(Te,Je){const o=i("ExternalLinkIcon");return s(),c("div",null,[n,h,e("blockquote",null,[e("p",null,[e("a",_,[d("Redis Data Types"),t(o)])])]),e("h4",p,[u,d(" 1.1 "),e("a",b,[f,t(o)])]),g,e("h4",x,[k,d(" 1.2 "),e("a",y,[m,t(o)])]),R,A,v,e("h4",O,[q,d(" 1.3 "),e("a",B,[F,t(o)])]),D,C,E,e("h4",S,[w,d(" 1.4 "),e("a",I,[K,t(o)])]),N,e("h4",M,[L,d(" 1.5 "),e("a",z,[G,t(o)])]),W,V,H,e("h4",P,[Q,d(" 1.6 "),e("a",Y,[j,t(o)])]),T,J,e("h4",U,[X,d(" 1.7 "),e("a",Z,[$,t(o)])]),ee,e("h4",de,[oe,d(" 1.8 "),e("a",te,[ae,t(o)])]),re,e("h4",ie,[se,d(" 1.9 "),e("a",ce,[le,t(o)])]),e("h4",ne,[he,d(" 1.10 "),e("a",_e,[pe,t(o)])]),ue,be,e("blockquote",null,[e("p",null,[e("a",fe,[d("Redis Modules"),t(o)])])]),e("ul",null,[e("li",null,[e("a",ge,[xe,t(o)]),d(": \u5E03\u9686\u8FC7\u6EE4\u5668")]),e("li",null,[e("a",ke,[ye,t(o)]),d(": \u7528\u4E8E\u9650\u6D41")])]),e("h3",me,[Re,d(" 2. "),e("a",Ae,[d("\u7F13\u5B58\u8FC7\u671F\u548C\u6DD8\u6C70\u7B56\u7565"),t(o)])]),ve,e("h3",Oe,[qe,d(" 3. "),e("a",Be,[d("\u6301\u4E45\u5316"),t(o)])]),Fe,e("h4",De,[Ce,d(" 6.6 "),e("a",Ee,[d("\u4E3A\u4EC0\u4E48\u662F16483\u4E2A\u54C8\u5E0C\u69FD"),t(o)])]),Se,e("blockquote",null,[e("p",null,[d("\u{1F44D}\u{1F3FB}"),e("a",we,[d("\u7F13\u5B58\u548C\u6570\u636E\u5E93\u4E00\u81F4\u6027\u95EE\u9898\uFF0C\u770B\u8FD9\u7BC7\u5C31\u591F\u4E86"),t(o)]),d(" \u7F13\u5B58\u5E38\u7528\u7684\u8BFB\u5199\u6A21\u5F0F\u662F\u65C1\u8DEF\u7F13\u5B58: \u5148\u8BFB\u7F13\u5B58\uFF0C\u6CA1\u6709\u65F6\u518D\u8BFB\u6570\u636E\u5E93")])]),Ie,e("h4",Ke,[Ne,d(" 12.4 "),e("a",Me,[d("Redisson"),t(o)])]),Le,e("h4",ze,[Ge,d(" 12.5 "),e("a",We,[d("redlock"),t(o)])]),Ve,He,Pe,Qe,Ye])}const Xe=r(l,[["render",je],["__file","redis.html.vue"]]);export{Xe as default};
