<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="logo.jpeg"><title>Redis | å­¦ä¹ ç¬”è®°</title><meta name="description" content="âœğŸ»å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œç«™åœ¨å²¸ä¸Šå­¦ä¸ä¼šæ¸¸æ³³ã€‚æ³‰æ°´æŒ‘ä¸å¹²ï¼ŒçŸ¥è¯†å­¦ä¸å®Œ">
    <link rel="modulepreload" href="/assets/app.94cd83f3.js"><link rel="modulepreload" href="/assets/redis.html.bf6084c9.js"><link rel="modulepreload" href="/assets/redis.html.72e8f2b1.js"><link rel="prefetch" href="/assets/index.html.71eb020f.js"><link rel="prefetch" href="/assets/index.html.fbaf26e3.js"><link rel="prefetch" href="/assets/index.html.b9e4ba9d.js"><link rel="prefetch" href="/assets/x.html.3a9e5e82.js"><link rel="prefetch" href="/assets/index.html.62c5cad4.js"><link rel="prefetch" href="/assets/distributed.html.f131bd4a.js"><link rel="prefetch" href="/assets/dubbo.html.c42471d3.js"><link rel="prefetch" href="/assets/java.html.deb3e07a.js"><link rel="prefetch" href="/assets/jvm.html.fe73eb41.js"><link rel="prefetch" href="/assets/kafka.html.8d53552b.js"><link rel="prefetch" href="/assets/microservices.html.c6889d81.js"><link rel="prefetch" href="/assets/mybatis.html.79562dd3.js"><link rel="prefetch" href="/assets/mysql.html.cbaa6932.js"><link rel="prefetch" href="/assets/project.html.2552e28a.js"><link rel="prefetch" href="/assets/spring.html.4b3357ee.js"><link rel="prefetch" href="/assets/index.html.cd286c3d.js"><link rel="prefetch" href="/assets/index.html.c99c6c4b.js"><link rel="prefetch" href="/assets/class1.html.793065ce.js"><link rel="prefetch" href="/assets/class2.html.bac3cdc9.js"><link rel="prefetch" href="/assets/index.html.e893d866.js"><link rel="prefetch" href="/assets/array.html.d73ed7e3.js"><link rel="prefetch" href="/assets/complexity.html.c278cefc.js"><link rel="prefetch" href="/assets/linkedlist.html.9de2a1d7.js"><link rel="prefetch" href="/assets/queue.html.a05a8057.js"><link rel="prefetch" href="/assets/recursion.html.99479a46.js"><link rel="prefetch" href="/assets/sort.html.8e73c57c.js"><link rel="prefetch" href="/assets/stack.html.7ec8455e.js"><link rel="prefetch" href="/assets/trietree.html.137d52b4.js"><link rel="prefetch" href="/assets/index.html.7b7e813f.js"><link rel="prefetch" href="/assets/linux.html.64e797fb.js"><link rel="prefetch" href="/assets/index.html.3252d128.js"><link rel="prefetch" href="/assets/started.html.d20bce38.js"><link rel="prefetch" href="/assets/index.html.b80bccee.js"><link rel="prefetch" href="/assets/started.html.202e2f6e.js"><link rel="prefetch" href="/assets/index.html.2b3e12e8.js"><link rel="prefetch" href="/assets/cache.html.22a14e77.js"><link rel="prefetch" href="/assets/config.html.8d60cdf2.js"><link rel="prefetch" href="/assets/started.html.388bf76b.js"><link rel="prefetch" href="/assets/index.html.298cd6e9.js"><link rel="prefetch" href="/assets/components_design.html.6f3ac77e.js"><link rel="prefetch" href="/assets/echo.html.e4fb45a4.js"><link rel="prefetch" href="/assets/io.html.94b26f07.js"><link rel="prefetch" href="/assets/socket.html.97b809a1.js"><link rel="prefetch" href="/assets/sourcecode.html.35d3b0ac.js"><link rel="prefetch" href="/assets/index.html.5642cff9.js"><link rel="prefetch" href="/assets/started.html.06ecce42.js"><link rel="prefetch" href="/assets/index.html.5650f3a2.js"><link rel="prefetch" href="/assets/atomic.html.c3287777.js"><link rel="prefetch" href="/assets/collector.html.e0a2b5fd.js"><link rel="prefetch" href="/assets/jmm.html.62429a45.js"><link rel="prefetch" href="/assets/locks.html.17e1f24a.js"><link rel="prefetch" href="/assets/threads.html.cccfe721.js"><link rel="prefetch" href="/assets/tools.html.5be6df0c.js"><link rel="prefetch" href="/assets/index.html.289ae4b9.js"><link rel="prefetch" href="/assets/unsafe.html.cf9d43fd.js"><link rel="prefetch" href="/assets/index.html.db4d47ed.js"><link rel="prefetch" href="/assets/app.html.d91d3cfd.js"><link rel="prefetch" href="/assets/install.html.c78cd86f.js"><link rel="prefetch" href="/assets/struct.html.a895855a.js"><link rel="prefetch" href="/assets/index.html.c88ed4d7.js"><link rel="prefetch" href="/assets/arch.html.3a439130.js"><link rel="prefetch" href="/assets/backups.html.d3bee46f.js"><link rel="prefetch" href="/assets/cluster.html.3c9a36f6.js"><link rel="prefetch" href="/assets/command.html.96d1a431.js"><link rel="prefetch" href="/assets/indexes.html.ece7701e.js"><link rel="prefetch" href="/assets/monitor.html.0884c305.js"><link rel="prefetch" href="/assets/secure.html.32817460.js"><link rel="prefetch" href="/assets/started.html.f5a7ae95.js"><link rel="prefetch" href="/assets/use.html.e95d4c21.js"><link rel="prefetch" href="/assets/index.html.076891d5.js"><link rel="prefetch" href="/assets/started.html.03b2602e.js"><link rel="prefetch" href="/assets/index.html.08be483b.js"><link rel="prefetch" href="/assets/started.html.e8d12c70.js"><link rel="prefetch" href="/assets/index.html.0e4e3099.js"><link rel="prefetch" href="/assets/ZooKeeper.html.a88c9c03.js"><link rel="prefetch" href="/assets/index.html.9fafefa5.js"><link rel="prefetch" href="/assets/discovery.html.d50fc58a.js"><link rel="prefetch" href="/assets/gateway.html.ffe37822.js"><link rel="prefetch" href="/assets/info.html.c39244ca.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.4e742d23.js"><link rel="prefetch" href="/assets/index.html.73aa5288.js"><link rel="prefetch" href="/assets/index.html.3ee302b9.js"><link rel="prefetch" href="/assets/x.html.fec14a92.js"><link rel="prefetch" href="/assets/index.html.e6aac125.js"><link rel="prefetch" href="/assets/distributed.html.d3719dcf.js"><link rel="prefetch" href="/assets/dubbo.html.079fd885.js"><link rel="prefetch" href="/assets/java.html.83033096.js"><link rel="prefetch" href="/assets/jvm.html.76c64a06.js"><link rel="prefetch" href="/assets/kafka.html.1ffe9f08.js"><link rel="prefetch" href="/assets/microservices.html.c1981abe.js"><link rel="prefetch" href="/assets/mybatis.html.633981ea.js"><link rel="prefetch" href="/assets/mysql.html.4447af64.js"><link rel="prefetch" href="/assets/project.html.fb44bd4c.js"><link rel="prefetch" href="/assets/spring.html.14bd9e82.js"><link rel="prefetch" href="/assets/index.html.4ee2a004.js"><link rel="prefetch" href="/assets/index.html.d6bdd141.js"><link rel="prefetch" href="/assets/class1.html.f4f39bba.js"><link rel="prefetch" href="/assets/class2.html.c13d0b8b.js"><link rel="prefetch" href="/assets/index.html.e746bfb0.js"><link rel="prefetch" href="/assets/array.html.d4a3bc2e.js"><link rel="prefetch" href="/assets/complexity.html.cd6ec097.js"><link rel="prefetch" href="/assets/linkedlist.html.21683035.js"><link rel="prefetch" href="/assets/queue.html.d20f7634.js"><link rel="prefetch" href="/assets/recursion.html.30ee1248.js"><link rel="prefetch" href="/assets/sort.html.ee079374.js"><link rel="prefetch" href="/assets/stack.html.0d9359f9.js"><link rel="prefetch" href="/assets/trietree.html.5f9a9643.js"><link rel="prefetch" href="/assets/index.html.e5687090.js"><link rel="prefetch" href="/assets/linux.html.7bb233b4.js"><link rel="prefetch" href="/assets/index.html.aa07d019.js"><link rel="prefetch" href="/assets/started.html.f32153a2.js"><link rel="prefetch" href="/assets/index.html.63d5b5ec.js"><link rel="prefetch" href="/assets/started.html.6ff9624f.js"><link rel="prefetch" href="/assets/index.html.576a386c.js"><link rel="prefetch" href="/assets/cache.html.653c0a71.js"><link rel="prefetch" href="/assets/config.html.b0cfeda3.js"><link rel="prefetch" href="/assets/started.html.db6b5333.js"><link rel="prefetch" href="/assets/index.html.33d9a178.js"><link rel="prefetch" href="/assets/components_design.html.60c81bf5.js"><link rel="prefetch" href="/assets/echo.html.0df92987.js"><link rel="prefetch" href="/assets/io.html.1c4f57eb.js"><link rel="prefetch" href="/assets/socket.html.c52bd2aa.js"><link rel="prefetch" href="/assets/sourcecode.html.da9775cb.js"><link rel="prefetch" href="/assets/index.html.a32be742.js"><link rel="prefetch" href="/assets/started.html.b5b3a550.js"><link rel="prefetch" href="/assets/index.html.8f304fd5.js"><link rel="prefetch" href="/assets/atomic.html.093e6cd0.js"><link rel="prefetch" href="/assets/collector.html.8097d670.js"><link rel="prefetch" href="/assets/jmm.html.063ce5ab.js"><link rel="prefetch" href="/assets/locks.html.b1b40aea.js"><link rel="prefetch" href="/assets/threads.html.c7f3ce08.js"><link rel="prefetch" href="/assets/tools.html.01784e1e.js"><link rel="prefetch" href="/assets/index.html.3002870b.js"><link rel="prefetch" href="/assets/unsafe.html.17bc4713.js"><link rel="prefetch" href="/assets/index.html.af258e94.js"><link rel="prefetch" href="/assets/app.html.90ea067a.js"><link rel="prefetch" href="/assets/install.html.a554fa67.js"><link rel="prefetch" href="/assets/struct.html.fc028613.js"><link rel="prefetch" href="/assets/index.html.6b4c4aeb.js"><link rel="prefetch" href="/assets/arch.html.b1786388.js"><link rel="prefetch" href="/assets/backups.html.0bbd9bc0.js"><link rel="prefetch" href="/assets/cluster.html.1f926ca5.js"><link rel="prefetch" href="/assets/command.html.54debdc2.js"><link rel="prefetch" href="/assets/indexes.html.fd9cf3d3.js"><link rel="prefetch" href="/assets/monitor.html.33507a53.js"><link rel="prefetch" href="/assets/secure.html.45e5ee71.js"><link rel="prefetch" href="/assets/started.html.92ef6148.js"><link rel="prefetch" href="/assets/use.html.34e6a7f6.js"><link rel="prefetch" href="/assets/index.html.45718f32.js"><link rel="prefetch" href="/assets/started.html.5d8e7fd4.js"><link rel="prefetch" href="/assets/index.html.deef9efe.js"><link rel="prefetch" href="/assets/started.html.b80f9c88.js"><link rel="prefetch" href="/assets/index.html.3934bf05.js"><link rel="prefetch" href="/assets/ZooKeeper.html.8f29493c.js"><link rel="prefetch" href="/assets/index.html.04ca7866.js"><link rel="prefetch" href="/assets/discovery.html.96951ab0.js"><link rel="prefetch" href="/assets/gateway.html.fa7d04d2.js"><link rel="prefetch" href="/assets/info.html.64d2a31c.js"><link rel="prefetch" href="/assets/404.html.dd7ae71e.js">
    <link rel="stylesheet" href="/assets/style.f4d22aab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">å­¦ä¹ ç¬”è®°</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview" class="router-link-active" aria-label="ğŸ˜ˆé¢è¯•"><!--[--><!--]--> ğŸ˜ˆé¢è¯• <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/magic" class="" aria-label="ğŸª„é­”æ³•"><!--[--><!--]--> ğŸª„é­”æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/concurrent" class="" aria-label="ğŸ¦‹å¹¶å‘"><!--[--><!--]--> ğŸ¦‹å¹¶å‘ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frame/gRPC" class="" aria-label="gRPC"><!--[--><!--]--> gRPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/dubbo" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/mybatis" class="" aria-label="MyBatis"><!--[--><!--]--> MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/netty" class="" aria-label="Netty"><!--[--><!--]--> Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/rpc" class="" aria-label="RPC"><!--[--><!--]--> RPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/spring" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/middleware/flink" class="" aria-label="Flink"><!--[--><!--]--> Flink <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/kafka" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mongodb/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mysql" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/pulsar" class="" aria-label="Pulsar"><!--[--><!--]--> Pulsar <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/redis" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/zookeeper" class="" aria-label="ZooKeeper"><!--[--><!--]--> ZooKeeper <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud_native/microservices" class="" aria-label="å¾®æœåŠ¡"><!--[--><!--]--> å¾®æœåŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="CI/CD"><!--[--><!--]--> CI/CD <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="DevOps"><!--[--><!--]--> DevOps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="å®¹å™¨"><!--[--><!--]--> å®¹å™¨ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/architecture" class="" aria-label="æ¶æ„"><!--[--><!--]--> æ¶æ„ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/os" class="" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><!--]--> æ“ä½œç³»ç»Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/network" class="" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><!--]--> è®¡ç®—æœºç½‘ç»œ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/compiler" class="" aria-label="ç¼–è¯‘åŸç†"><!--[--><!--]--> ç¼–è¯‘åŸç† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/alg" class="" aria-label="æ•°æ®ç»“æ„å’Œç®—æ³•"><!--[--><!--]--> æ•°æ®ç»“æ„å’Œç®—æ³• <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/doraemon" class="" aria-label="ç™¾å®ç®±"><!--[--><!--]--> ç™¾å®ç®± <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Spectred/spectred.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview" class="router-link-active" aria-label="ğŸ˜ˆé¢è¯•"><!--[--><!--]--> ğŸ˜ˆé¢è¯• <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/magic" class="" aria-label="ğŸª„é­”æ³•"><!--[--><!--]--> ğŸª„é­”æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/concurrent" class="" aria-label="ğŸ¦‹å¹¶å‘"><!--[--><!--]--> ğŸ¦‹å¹¶å‘ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frame/gRPC" class="" aria-label="gRPC"><!--[--><!--]--> gRPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/dubbo" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/mybatis" class="" aria-label="MyBatis"><!--[--><!--]--> MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/netty" class="" aria-label="Netty"><!--[--><!--]--> Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/rpc" class="" aria-label="RPC"><!--[--><!--]--> RPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/spring" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/middleware/flink" class="" aria-label="Flink"><!--[--><!--]--> Flink <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/kafka" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mongodb/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mysql" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/pulsar" class="" aria-label="Pulsar"><!--[--><!--]--> Pulsar <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/redis" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/zookeeper" class="" aria-label="ZooKeeper"><!--[--><!--]--> ZooKeeper <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud_native/microservices" class="" aria-label="å¾®æœåŠ¡"><!--[--><!--]--> å¾®æœåŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="CI/CD"><!--[--><!--]--> CI/CD <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="DevOps"><!--[--><!--]--> DevOps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="å®¹å™¨"><!--[--><!--]--> å®¹å™¨ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/architecture" class="" aria-label="æ¶æ„"><!--[--><!--]--> æ¶æ„ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/os" class="" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><!--]--> æ“ä½œç³»ç»Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/network" class="" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><!--]--> è®¡ç®—æœºç½‘ç»œ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/compiler" class="" aria-label="ç¼–è¯‘åŸç†"><!--[--><!--]--> ç¼–è¯‘åŸç† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/alg" class="" aria-label="æ•°æ®ç»“æ„å’Œç®—æ³•"><!--[--><!--]--> æ•°æ®ç»“æ„å’Œç®—æ³• <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/doraemon" class="" aria-label="ç™¾å®ç®±"><!--[--><!--]--> ç™¾å®ç®± <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Spectred/spectred.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Redis <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/interview/redis.html#_1-redisæœ‰å“ªäº›æ•°æ®ç±»å‹" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Redisæœ‰å“ªäº›æ•°æ®ç±»å‹"><!--[--><!--]--> 1. Redisæœ‰å“ªäº›æ•°æ®ç±»å‹ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_2-ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥"><!--[--><!--]--> 2. ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_3-æŒä¹…åŒ–" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. æŒä¹…åŒ–"><!--[--><!--]--> 3. æŒä¹…åŒ– <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_4-é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶"><!--[--><!--]--> 4. é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_5-é«˜å¯ç”¨-å“¨å…µ" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. é«˜å¯ç”¨-å“¨å…µ"><!--[--><!--]--> 5. é«˜å¯ç”¨-å“¨å…µ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_6-redis-cluster-åˆ†ç‰‡é›†ç¾¤" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. Redis Cluster(åˆ†ç‰‡é›†ç¾¤)"><!--[--><!--]--> 6. Redis Cluster(åˆ†ç‰‡é›†ç¾¤) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_7-redisä¸ºä»€ä¹ˆå¿«" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. Redisä¸ºä»€ä¹ˆå¿«"><!--[--><!--]--> 7. Redisä¸ºä»€ä¹ˆå¿« <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_8-redisåªæœ‰å•çº¿ç¨‹å—" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. Redisåªæœ‰å•çº¿ç¨‹å—ï¼Ÿ"><!--[--><!--]--> 8. Redisåªæœ‰å•çº¿ç¨‹å—ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_9-redis6-0å’Œ7-0çš„æ–°ç‰¹æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. Redis6.0å’Œ7.0çš„æ–°ç‰¹æ€§"><!--[--><!--]--> 9. Redis6.0å’Œ7.0çš„æ–°ç‰¹æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_10-ç¼“å­˜å¼‚å¸¸" class="router-link-active router-link-exact-active sidebar-item" aria-label="10. ç¼“å­˜å¼‚å¸¸"><!--[--><!--]--> 10. ç¼“å­˜å¼‚å¸¸ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_11-ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§" class="router-link-active router-link-exact-active sidebar-item" aria-label="11. ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§"><!--[--><!--]--> 11. ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/interview/redis.html#_12-åŸºäºredisçš„åˆ†å¸ƒå¼é”" class="router-link-active router-link-exact-active sidebar-item" aria-label="12. åŸºäºRedisçš„åˆ†å¸ƒå¼é”"><!--[--><!--]--> 12. åŸºäºRedisçš„åˆ†å¸ƒå¼é” <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h1><h3 id="_1-redisæœ‰å“ªäº›æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-redisæœ‰å“ªäº›æ•°æ®ç±»å‹" aria-hidden="true">#</a> 1. Redisæœ‰å“ªäº›æ•°æ®ç±»å‹</h3><blockquote><p><a href="https://redis.io/docs/data-types/" target="_blank" rel="noopener noreferrer">Redis Data Types<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="_1-1-string" tabindex="-1"><a class="header-anchor" href="#_1-1-string" aria-hidden="true">#</a> 1.1 <a href="https://redis.io/docs/data-types/strings/" target="_blank" rel="noopener noreferrer"><code>string</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>æ•°æ®ç»“æ„: <code>SDS</code>,åŒ…æ‹¬<code>len</code>:å·²ç”¨çš„é•¿åº¦ï¼Œ<code>alloc</code>: åˆ†é…çš„ç©ºé—´é•¿åº¦ï¼Œ<code>flags</code>,<code>buf[]</code>: å®é™…å­˜å‚¨çš„å†…å®¹</p><p>ä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿ<code>char</code>? <code>SDS</code>è®°å½•äº†ä½¿ç”¨é•¿åº¦å’Œåˆ†é…ç©ºé—´å¤§å°ï¼Œé¿å…äº†éå†ï¼Œé™ä½å¼€é”€</p><h4 id="_1-2-list" tabindex="-1"><a class="header-anchor" href="#_1-2-list" aria-hidden="true">#</a> 1.2 <a href="https://redis.io/docs/data-types/" target="_blank" rel="noopener noreferrer"><code>list</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>åº”ç”¨åœºæ™¯: æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ–‡ç« åˆ—è¡¨</p><p>æ•°æ®ç»“æ„:</p><ul><li>åŒå‘é“¾è¡¨(ä¸ºäº†é¿å…<code>ziplist</code>çº§è”æ›´æ–°ï¼Œé‡‡ç”¨<code>quicklist</code>+<code>ziplist</code>)</li><li>å‹ç¼©åˆ—è¡¨</li></ul><h4 id="_1-3-set" tabindex="-1"><a class="header-anchor" href="#_1-3-set" aria-hidden="true">#</a> 1.3 <a href="https://redis.io/docs/data-types/sets/" target="_blank" rel="noopener noreferrer"><code>set</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>åº”ç”¨åœºæ™¯: ç”¨æˆ·æ ‡ç­¾ï¼Œéšæœºæ•°</p><p>æ•°æ®ç»“æ„: å¦‚æœå­˜å‚¨çš„éƒ½æ˜¯<code>int</code>ç±»å‹ï¼Œåˆ™æ˜¯<code>int set</code>ï¼Œå…¶ä»–ä¸º<code>hash table</code></p><ul><li>å“ˆå¸Œè¡¨</li><li>æ•´æ•°é›†åˆ</li></ul><h4 id="_1-4-hash" tabindex="-1"><a class="header-anchor" href="#_1-4-hash" aria-hidden="true">#</a> 1.4 <a href="https://redis.io/docs/data-types/hashes/" target="_blank" rel="noopener noreferrer"><code>hash</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>æ•°æ®ç»“æ„:</p><ul><li>å“ˆå¸Œè¡¨</li><li>å‹ç¼©åˆ—è¡¨</li></ul><p>å“ˆå¸Œå†²çªæ—¶é‡‡ç”¨é“¾å¼å“ˆå¸Œ</p><p><strong>ä½•æ—¶è§¦å‘<code>rehash</code>ï¼Ÿ</strong></p><ul><li>æ ¹æ®hashè¡¨çš„è´Ÿè½½å› å­å’Œèƒ½å¦è¿›è¡Œ<code>rehash</code>æ ‡è¯†(<code>rehashidx</code>)åˆ¤æ–­</li><li>æ ¹æ®<code>RDB</code>å’Œ<code>AOF</code>æ‰§è¡Œæƒ…å†µï¼Œå¯ç”¨æˆ–è€…ç¦ç”¨<code>rehash</code></li><li><code>rehash</code>æ‰©å®¹æ˜¯æ‰©2å€</li></ul><p><strong>æ¸è¿›å¼hashï¼Ÿ</strong></p><p>å½“é“¾é•¿åº¦è¿‡å¤§æ—¶ï¼Œé‡‡ç”¨æ¸è¿›å¼rehashï¼š</p><ul><li>ä¸¤ä¸ªå“ˆå¸Œè¡¨(<code>ht[0]</code>å’Œ<code>ht[1]</code>)äº¤æ›¿ä½¿ç”¨</li><li>æ­£å¸¸æ—¶å†™å…¥åˆ°<code>ht[0]</code>,å½“<code>rehash</code>æ—¶å°†é”®å€¼è¿ç§»åˆ°<code>ht[</code>]</li><li>å®Œæˆå<code>ht[0]</code>é‡Šæ”¾ï¼Œå°†<code>ht[1]</code>åœ°å€èµ‹å€¼ç»™<code>ht[0]</code></li></ul><h4 id="_1-5-sorted-set" tabindex="-1"><a class="header-anchor" href="#_1-5-sorted-set" aria-hidden="true">#</a> 1.5 <a href="https://redis.io/docs/data-types/sorted-sets/" target="_blank" rel="noopener noreferrer"><code>sorted set</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>åº”ç”¨åœºæ™¯: æ’è¡Œæ¦œï¼Œç‚¹èµ</p><p>æ•°æ®ç»“æ„ï¼š</p><ul><li>å“ˆå¸Œè¡¨: å­˜memberå’Œscoreçš„å…³ç³»</li><li>è·³è¡¨: å­˜key (å½“<code>zset</code>æ•°æ®å°‘æ˜¯ç”¨<code>ziplist</code>ï¼Œä¸ºäº†çœå†…å­˜)</li></ul><h4 id="_1-6-stream" tabindex="-1"><a class="header-anchor" href="#_1-6-stream" aria-hidden="true">#</a> 1.6 <a href="https://redis.io/docs/data-types/streams/" target="_blank" rel="noopener noreferrer"><code>Stream</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><blockquote><p>A Redis stream is a data structure that acts like an append-only log. You can use streams to record and simultaneously syndicate events in real time.</p></blockquote><p>ç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—</p><h4 id="_1-7-geo-hash" tabindex="-1"><a class="header-anchor" href="#_1-7-geo-hash" aria-hidden="true">#</a> 1.7 <a href="https://redis.io/docs/data-types/geospatial/" target="_blank" rel="noopener noreferrer"><code>Geo Hash</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>å­˜å‚¨åœ°ç†ä½ç½®</p><h4 id="_1-8-bitmap" tabindex="-1"><a class="header-anchor" href="#_1-8-bitmap" aria-hidden="true">#</a> 1.8 <a href="https://redis.io/docs/data-types/bitmaps/" target="_blank" rel="noopener noreferrer"><code>bitmap</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>ä½å›¾ï¼Œå¯ç”¨äºç­¾åˆ°ç­‰</p><h4 id="_1-9-bitfield" tabindex="-1"><a class="header-anchor" href="#_1-9-bitfield" aria-hidden="true">#</a> 1.9 <a href="https://redis.io/docs/data-types/bitfields/" target="_blank" rel="noopener noreferrer"><code>bitfield</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h4 id="_1-10-hyperloglog" tabindex="-1"><a class="header-anchor" href="#_1-10-hyperloglog" aria-hidden="true">#</a> 1.10 <a href="https://redis.io/docs/data-types/hyperloglogs/" target="_blank" rel="noopener noreferrer"><code>HyperLogLog</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>åŸºæ•°è¿‘ä¼¼ç»Ÿè®¡ï¼Œä¾‹å¦‚ç½‘ç»œçš„uv</p><h4 id="_1-11-åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•" tabindex="-1"><a class="header-anchor" href="#_1-11-åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•" aria-hidden="true">#</a> 1.11 åŸºäºæ¨¡å—è¿›è¡Œæ‰©å±•</h4><blockquote><p><a href="https://redis.io/docs/modules/" target="_blank" rel="noopener noreferrer">Redis Modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><ul><li><a href="https://redis.io/docs/stack/bloom/" target="_blank" rel="noopener noreferrer"><code>RedisBloom</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: å¸ƒéš†è¿‡æ»¤å™¨</li><li><a href="https://github.com/brandur/redis-cell" target="_blank" rel="noopener noreferrer"><code>redis-cell</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: ç”¨äºé™æµ</li></ul><h3 id="_2-ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥" aria-hidden="true">#</a> 2. <a href="https://redis.io/docs/manual/eviction/" target="_blank" rel="noopener noreferrer">ç¼“å­˜è¿‡æœŸå’Œæ·˜æ±°ç­–ç•¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><h4 id="_2-1-è¿‡æœŸç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-1-è¿‡æœŸç­–ç•¥" aria-hidden="true">#</a> 2.1 è¿‡æœŸç­–ç•¥</h4><p>Redisé‡‡ç”¨å®šæœŸè¿‡æœŸå’Œæƒ°æ€§è¿‡æœŸ</p><ul><li>å®šæœŸè¿‡æœŸï¼š æ¯éš”ä¸€ç‚¹æ—¶é—´ï¼Œä¼šæ‰«æä¸€å®šæ•°é‡çš„<code>expires</code>å­—æ®µä¸­çš„éƒ¨åˆ†keyï¼Œå¹¶æ¸…é™¤å·²è¿‡æœŸçš„key</li><li>æƒ°æ€§è¿‡æœŸï¼š åœ¨keyè¢«è®¿é—®æ—¶ï¼Œå¦‚æœå‘ç°å·²è¿‡æœŸï¼Œå°±ä»å†…å­˜ä¸­åˆ é™¤</li></ul><h4 id="_2-2-æ·˜æ±°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_2-2-æ·˜æ±°ç­–ç•¥" aria-hidden="true">#</a> 2.2 æ·˜æ±°ç­–ç•¥</h4><p><code>maxmemory</code>ï¼šRediså¯åŠ¨æ—¶æŒ‰éœ€ç”³è¯·å†…å­˜ï¼Œä¸”Redisä¸ä¼šè¶…è¿‡<code>maxmemory</code>ï¼Œå¦‚æœç³»ç»Ÿå†…å­˜å¿«æ»¡äº†ï¼Œæœ‰<code>swap</code>åˆ™<code>swap</code>ï¼Œæ— <code>swap</code>åˆ™<code>OOM</code>,å½“è¶‹è¿‘<code>maxmemory</code>æ—¶åˆ™è¿›è¡Œç¼“å­˜æ·˜æ±°</p><ul><li><code>noeviction </code>: é»˜è®¤ï¼Œä¸é©±é€ï¼Œæ–°å†™å…¥å°±æŠ¥é”™</li><li><code>allkeys-</code>ï¼š ä»æ‰€æœ‰çš„keyä¸­ <ul><li><code>random</code>: éšæœºæ·˜æ±°ï¼Œå¸Œæœ›è¯·æ±‚ç¬¦åˆå‡åŒ€åˆ†å¸ƒ</li><li><code>lru</code>ï¼š æœ€è¿‘æœ€å°‘æ·˜æ±°ï¼Œä¸ç¡®å®šæ—¶å¯é‡‡ç”¨ï¼Œå†·çƒ­æ•°æ®äº¤æ¢</li><li><code>lfu</code>: æœ€ä¸ç»å¸¸ä½¿ç”¨</li></ul></li><li><code>volatile-</code>: ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ <ul><li><code>random</code></li><li><code>lru</code></li><li><code>lfu</code></li><li><code>ttl</code>: æ ¹æ®è¿‡æœŸæ—¶é—´ï¼Œè¶Šæ—©è¶Šå…ˆæ·˜æ±°</li></ul></li></ul><h3 id="_3-æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-æŒä¹…åŒ–" aria-hidden="true">#</a> 3. <a href="https://redis.io/docs/manual/persistence/" target="_blank" rel="noopener noreferrer">æŒä¹…åŒ–<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><blockquote><p>æŒä¹…åŒ–æ˜¯æŒ‡å°†æ•°æ®å†™å…¥åˆ°æŒä¹…å­˜å‚¨ï¼Œä¾‹å¦‚ç£ç›˜</p></blockquote><h4 id="_3-1-æœ‰å“ªå‡ ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-æœ‰å“ªå‡ ç§æ–¹å¼" aria-hidden="true">#</a> 3.1 æœ‰å“ªå‡ ç§æ–¹å¼</h4><ul><li><code>No persistence</code></li><li><code>RDB (Redis Databases)</code> : åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…æ‰§è¡Œæ•°æ®çš„æ—¶é—´ç‚¹å¿«ç…§</li><li><code>AOF (Append Only File)</code>: è®°å½•æ¯ä¸ªå†™å…¥æ“ä½œï¼Œåœ¨æœåŠ¡å¯åŠ¨æ—¶é‡æ”¾ï¼Œé‡å»ºåŸå§‹æ•°æ®ï¼Œå½“æ—¥å¿—å˜å¾—è¿‡å¤§æ—¶ï¼ŒRediså¯ä»¥åœ¨åå°é‡å†™æ—¥å¿—</li><li><code>RDB+AOF</code></li></ul><h4 id="_3-2-é€‰æ‹©å“ªç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-2-é€‰æ‹©å“ªç§æ–¹å¼" aria-hidden="true">#</a> 3.2 é€‰æ‹©å“ªç§æ–¹å¼</h4><ul><li>ä¸èƒ½ä¸¢å¤±: <code>RDB+AOF</code></li><li>å…è®¸åˆ†çº§ä¸¢å¤±: <code>RDB</code></li><li>åªç”¨<code>AOF</code>æ—¶ï¼Œé€‰æ‹©<code>everysec</code>,åœ¨å¯é æ€§å’Œæ€§èƒ½ä¹‹é—´å¹³è¡¡</li></ul><h4 id="_3-3-rdb-bgsave-çš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-3-rdb-bgsave-çš„æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> 3.3 <code>RDB(bgsave)</code>çš„æ‰§è¡Œè¿‡ç¨‹</h4><p><code>bgsave </code> æˆ– <code>save 60 1000 </code>ï¼ˆæ¯60ç§’è‡³å°‘æ›´æ”¹äº†1000ä¸ªé”®åˆ™saveï¼‰,ä¿å­˜åˆ°<code>dump.rdb</code>äºŒè¿›åˆ¶æ–‡ä»¶</p><ol><li><code>fork</code>ä¸»çº¿ç¨‹å¾—åˆ°<code>bgsave</code>å­è¿›ç¨‹</li><li>ä¸»çº¿ç¨‹æ­£å¸¸è¯»æ•°æ®ï¼Œåœ¨å†™æ•°æ®æ—¶ï¼Œå¯¹æ•°æ®ç”Ÿæˆå‰¯æœ¬å¹¶è¿›è¡Œä¿®æ”¹(<code>COW</code>ï¼Œå†™æ—¶å¤åˆ¶)</li><li><code>bgsave</code>å­è¿›ç¨‹è¯»å…ƒæ•°æ®å†™å…¥åˆ°<code>RDB</code>æ–‡ä»¶</li></ol><h4 id="_3-4-rdbçš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-4-rdbçš„ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 3.4 <code>RDB</code>çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½“ç§¯å°æ˜“ä¼ è¾“ï¼Œæœ€å¤§åŒ–æ€§èƒ½ï¼Œé€‚åˆç¾éš¾æ¢å¤ï¼Œç›¸æ¯”<code>AOF</code>æ›´å¿«é‡å¯</li></ul><p><strong>ç¼ºç‚¹</strong>:</p><ul><li>ä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ•°æ®</li><li>æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œ<code>fork</code>ä¼šè€—æ—¶</li></ul><h4 id="_3-5-aofçš„æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-5-aofçš„æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> 3.5 <code>AOF</code>çš„æ‰§è¡Œè¿‡ç¨‹</h4><p><code>AOF</code>æ˜¯å†™åæ—¥å¿—ï¼Œè®°å½•çš„å†…å®¹æ˜¯<code>RESP</code>åè®®çš„æ•°æ®ï¼Œæ˜¯å‘½ä»¤æ—¥å¿—</p><blockquote><p>å†™åæ—¥å¿—: å…ˆæ‰§è¡Œå‘½ä»¤ï¼Œå†™å…¥å†…å­˜åå†™å…¥æ—¥å¿—</p><p>é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€ï¼Œä¸é˜»å¡å½“å‰å†™æ“ä½œ</p></blockquote><h4 id="_3-6-aofå†™å›ç£ç›˜çš„ç­–ç•¥-appendfsync" tabindex="-1"><a class="header-anchor" href="#_3-6-aofå†™å›ç£ç›˜çš„ç­–ç•¥-appendfsync" aria-hidden="true">#</a> 3.6 <code>AOF</code>å†™å›ç£ç›˜çš„ç­–ç•¥(<code>appendfsync</code>)</h4><ul><li><p><code>Always</code>: æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œç«‹åˆ»åŒæ­¥å°†æ—¥å¿—å†™å›ç£ç›˜</p></li><li><p><code>EverySec</code>: æ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œå…ˆå†™åˆ°<code>AOF</code>å†…å­˜ç¼“å†²ï¼Œæ¯ä¸ª1ç§’å†™å›ç£ç›˜</p></li><li><p><code>No</code>: ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ä½•æ—¶å°†å†…å­˜ç¼“å†²å†™å›åˆ°ç£ç›˜</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">å†™å›æ—¶æœº</th><th style="text-align:center;">ä¼˜ç‚¹</th><th style="text-align:center;">ç¼ºç‚¹</th></tr></thead><tbody><tr><td style="text-align:center;"><code>Always</code></td><td style="text-align:center;">åŒæ­¥</td><td style="text-align:center;">å¯é ï¼ŒåŸºæœ¬ä¸ä¸¢</td><td style="text-align:center;">å½±å“æ€§èƒ½</td></tr><tr><td style="text-align:center;"><code>EverySec</code></td><td style="text-align:center;">æ¯ç§’</td><td style="text-align:center;">æ€§èƒ½é€‚ä¸­</td><td style="text-align:center;">ä¸¢å¤±1ç§’</td></tr><tr><td style="text-align:center;"><code>No</code></td><td style="text-align:center;">OSæ§åˆ¶</td><td style="text-align:center;">æ€§èƒ½å¥½</td><td style="text-align:center;">ä¸¢æ•°æ®å¤š</td></tr></tbody></table></li></ul><h4 id="_3-7-aofé‡å†™æœºåˆ¶-rewrite" tabindex="-1"><a class="header-anchor" href="#_3-7-aofé‡å†™æœºåˆ¶-rewrite" aria-hidden="true">#</a> 3.7 <code>AOF</code>é‡å†™æœºåˆ¶(<code>rewrite</code>)</h4><blockquote><p>è§£å†³æ—¥å¿—æ–‡ä»¶å¤ªå¤§çš„é—®é¢˜</p></blockquote><p>å°†å¤šæ¬¡ä¿®æ”¹çš„å‘½ä»¤ï¼Œåˆå¹¶ä¸€ä¸ªå‘½ä»¤ï¼ˆä¾‹å¦‚: <code>set k 1</code>,<code> set k 2</code> =&gt; <code>set k 2</code>ï¼‰</p><p><strong>ä¸é˜»å¡ä¸»çº¿ç¨‹</strong>:</p><ol><li>æ‰§è¡Œé‡å†™æ—¶ï¼Œä¸»çº¿ç¨‹<code>fork</code>å‡ºåå°çš„<code>bgrewriteaof</code>å­è¿›ç¨‹</li><li>Rediså°†å†™æ“ä½œå†™åˆ°AOFç¼“å†²åŒº</li><li>æ–°çš„AOFé‡å†™æ—¥å¿—è¢«å†™åˆ°é‡å†™æ—¥å¿—çš„ç¼“å†²åŒºï¼Œç­‰æ‹·è´æ•°æ®éƒ½å†™å®Œåï¼Œé‡å†™çš„æœ€æ–°æ“ä½œå†™å…¥åˆ°AOFæ—¥å¿—</li></ol><h4 id="_3-8-aofçš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-8-aofçš„ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> 3.8 <code>AOF</code>çš„ä¼˜ç¼ºç‚¹</h4><p><strong>ä¼˜ç‚¹</strong>:</p><ul><li>é…ç½®ä¸åŒçš„å†™å›ç­–ç•¥ä¿è¯æ•°æ®ä¸¢å¤±å°‘</li><li>ä¸å®¹æ˜“æŸåï¼Œå³ä½¿æŸç§åŸå› æ²¡å†™å®Œï¼Œ<code>redis-check-aof</code>å·¥å…·èƒ½å¤Ÿä¿®å¤</li><li>AOFæ—¥å¿—æ˜“è§£æ</li><li>AOFæ—¥å¿—å¯é‡å†™</li></ul><p><strong>ç¼ºç‚¹</strong>:</p><ul><li>AOFæ–‡ä»¶é€šå¸¸æ¯”åŒä¸€æ•°æ®é›†çš„RDBæ–‡ä»¶å¤§</li><li>å¯èƒ½ä¼šæ¯”RDBæ…¢</li></ul><h3 id="_4-é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#_4-é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶" aria-hidden="true">#</a> 4. é«˜å¯ç”¨-ä¸»ä»å¤åˆ¶</h3><h4 id="_4-1-ä¸»ä»å¤åˆ¶çš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_4-1-ä¸»ä»å¤åˆ¶çš„æµç¨‹" aria-hidden="true">#</a> 4.1 ä¸»ä»å¤åˆ¶çš„æµç¨‹</h4><ol><li>ä»åº“æ‰§è¡Œ<code>replica of</code>ï¼Œé€šè¿‡<code>psync</code>å’Œä¸»åº“å»ºç«‹è¿æ¥ï¼Œåå•†åŒæ­¥ï¼Œä¿å­˜ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯</li><li>ä¸»åº“åŒæ­¥æ•°æ®(RDB)ç»™ä»åº“</li><li>ä»åº“æ¸…ç©ºç°æœ‰æ•°æ®ï¼ŒåŠ è½½RDB</li><li>ä¸»åº“å‘é€<code>Repl Buffer</code>ï¼ˆæ–°å†™å…¥çš„å‘½ä»¤ï¼‰ç»™ä»åº“ï¼Œä»åº“åŠ è½½<code>Repl Buffer</code></li></ol><h4 id="_4-2-å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›" tabindex="-1"><a class="header-anchor" href="#_4-2-å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›" aria-hidden="true">#</a> 4.2 å¦‚ä½•åˆ†æ‹…å…¨é‡å¤åˆ¶æ—¶çš„ä¸»åº“å‹åŠ›</h4><p>å¯ä»¥é€šè¿‡ <strong>ä¸»-ä»-ä»</strong>ï¼Œå°†ä¸»åº“ç”Ÿæˆçš„RDBå’Œä¼ è¾“RDBçš„å‹åŠ›ä»¥çº§è”çš„æ–¹å¼åˆ†æ•£åˆ°ä»åº“ä¸Š</p><h4 id="_4-3-ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ" tabindex="-1"><a class="header-anchor" href="#_4-3-ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ" aria-hidden="true">#</a> 4.3 ä¸»ä»åº“é—´ç½‘ç»œæ–­äº†æ€ä¹ˆåŠ</h4><p>ç½‘ç»œæ–­äº†ä¹‹åï¼Œä¸»ä»åº“é‡‡ç”¨<strong>å¢é‡å¤åˆ¶</strong>çš„æ–¹å¼ç»§ç»­åŒæ­¥</p><ul><li>å…¨é‡å¤åˆ¶: åŒæ­¥æ‰€æœ‰æ•°æ®</li><li>å¢é‡å¤åˆ¶: æŠŠä¸»ä»ç½‘ç»œç«¯è¿æœŸé—´ä¸»åº“æ”¶åˆ°çš„å‘½ä»¤åŒæ­¥ä»åº“</li></ul><h3 id="_5-é«˜å¯ç”¨-å“¨å…µ" tabindex="-1"><a class="header-anchor" href="#_5-é«˜å¯ç”¨-å“¨å…µ" aria-hidden="true">#</a> 5. é«˜å¯ç”¨-å“¨å…µ</h3><blockquote><p>å®ç°ä¸»ä»åº“åˆ‡æ¢çš„å…³é”®æœºåˆ¶</p></blockquote><h4 id="_5-1-ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_5-1-ç›‘æ§" aria-hidden="true">#</a> 5.1 ç›‘æ§</h4><p>å‘¨æœŸæ€§ç»™æ‰€æœ‰ä¸»ä»åº“å‘é€<code>PING</code>,æ£€æµ‹æ˜¯å¦æ­£å¸¸è¿è¡Œ</p><p><strong>ä¸»è§‚ä¸‹çº¿</strong>: å•å“¨å…µè®¤ä¸ºä¸‹çº¿</p><p><strong>å®¢è§‚ä¸‹çº¿</strong>: è¶…åŠæ•°å“¨å…µè®¤ä¸ºä¸‹çº¿</p><h4 id="_5-2-é€‰ä¸»" tabindex="-1"><a class="header-anchor" href="#_5-2-é€‰ä¸»" aria-hidden="true">#</a> 5.2 é€‰ä¸»</h4><ul><li>ç­›é€‰: æ ¹æ®ä»åº“çš„å½“å‰åœ¨çº¿çŠ¶æ€å’Œå†å²ç½‘ç»œè¿æ¥çŠ¶æ€è¿‡æ»¤</li><li>æ‰“åˆ†: ä»åº“ä¼˜å…ˆçº§ï¼Œä»åº“å¤åˆ¶è¿›åº¦ï¼Œä»åº“IDå·</li></ul><h4 id="_5-3-é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#_5-3-é€šçŸ¥" aria-hidden="true">#</a> 5.3 é€šçŸ¥</h4><ul><li>è®©ä»åº“æ‰§è¡Œ<code>Replica of</code>ï¼Œä¸æ–°ä¸»åº“åŒæ­¥</li><li>é€šçŸ¥å®¢æˆ·ç«¯ï¼Œä¸æ–°ä¸»åº“è¿æ¥</li></ul><h4 id="_5-4-å“¨å…µé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_5-4-å“¨å…µé›†ç¾¤" aria-hidden="true">#</a> 5.4 å“¨å…µé›†ç¾¤</h4><p><code>sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;port&gt; &lt;quorum&gt;</code></p><p>åªæœ‰è®¢é˜…åŒä¸€ä¸ªé¢‘é“çš„åº”ç”¨æ‰èƒ½é€šè¿‡å‘å¸ƒçš„æ¶ˆæ¯è¿›è¡Œæ¶ˆæ¯äº¤æ¢</p><p><strong>å“¨å…µ-ä¸»åº“</strong>: åŸºäº<code>pub/sub</code>æœºåˆ¶ç»„æˆå“¨å…µé›†ç¾¤(<code>__sentinel__:hello</code>é¢‘é“)</p><p><strong>å“¨å…µ-ä»åº“</strong>: å“¨å…µå‘ä¸»åº“å‘é€<code>info</code>å‘½ä»¤ï¼Œå¾—çŸ¥ä»åº“ä¿¡æ¯ï¼Œå»ºç«‹è¿æ¥</p><p><strong>å®¢æˆ·ç«¯</strong>: åŸºäº<code>pub/sub</code>æœºåˆ¶çš„å®¢æˆ·ç«¯æ—¶é—´é€šçŸ¥</p><h4 id="_5-5-ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢" tabindex="-1"><a class="header-anchor" href="#_5-5-ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢" aria-hidden="true">#</a> 5.5 ç”±å“ªä¸ªå“¨å…µæ‰§è¡Œä¸»ä»åˆ‡æ¢</h4><p>å‘èµ·æŠ•ç¥¨ï¼Œå¤šæ•°ä¸ºleader</p><h3 id="_6-redis-cluster-åˆ†ç‰‡é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_6-redis-cluster-åˆ†ç‰‡é›†ç¾¤" aria-hidden="true">#</a> 6. <code>Redis Cluster</code>(åˆ†ç‰‡é›†ç¾¤)</h3><blockquote><p>ä¸ºäº†ä¿å­˜å¤§é‡æ•°æ®ï¼Œç”±ä¸¤ç§æ‰©å®¹æ–¹æ¡ˆï¼š1.å‡çº§å•Rediså®ä¾‹çš„èµ„æºé…ç½®ï¼Œ2.å¢åŠ Rediså®ä¾‹ä¸ªæ•°</p></blockquote><h4 id="_6-1-æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»" tabindex="-1"><a class="header-anchor" href="#_6-1-æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»" aria-hidden="true">#</a> 6.1 æ•°æ®åˆ‡ç‰‡å’Œå®ä¾‹çš„å¯¹åº”åˆ†å¸ƒå…³ç³»</h4><p><code>Redis Cluster</code>é‡‡ç”¨å“ˆå¸Œæ§½(<code>hash slot</code>)æ¥å¤„ç†æ•°æ®å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»</p><p><code>CRC16(KEY) % 16384 = n</code></p><p>å…¶ä¸­: <code>CRC16 è¡¨ç¤ºCRC16ç®—æ³•å¾—åˆ°ä¸€ä¸ª16bitçš„å€¼ï¼Œ16385ä¸ªå“ˆå¸Œæ§½ï¼Œnè¡¨ç¤ºå¯¹åº”çš„å®ä¾‹</code></p><h4 id="_6-2-å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_6-2-å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®" aria-hidden="true">#</a> 6.2 å®¢æˆ·ç«¯å¦‚ä½•å®šä½æ•°æ®</h4><p>Rediså®ä¾‹ä¼šæŠŠè‡ªå·±çš„å“ˆå¸Œæ§½ä¿¡æ¯é€šè¿‡<code>Gossip</code>å‘é€ç»™å’Œå®ƒç›¸è¿çš„å…¶ä»–å®ä¾‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å“ˆå¸Œæ§½ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°ï¼Œè¯·æ±‚æ—¶å…ˆç®—å“ˆå¸Œæ§½</p><p><code>hash slot</code>å¯èƒ½ä¼šé‡æ–°åˆ†é…: 1.å®ä¾‹ç”±æ–°å¢æˆ–åˆ é™¤ï¼Œ2.ä¸ºäº†è´Ÿè½½å‡è¡¡</p><h4 id="_6-3-moved-é‡å®šå‘-å’Œ-ask" tabindex="-1"><a class="header-anchor" href="#_6-3-moved-é‡å®šå‘-å’Œ-ask" aria-hidden="true">#</a> 6.3 <code>Moved</code>ï¼ˆé‡å®šå‘ï¼‰å’Œ <code>ASK</code></h4><p>å®¢æˆ·ç«¯ç»™ä¸€ä¸ªå®ä¾‹å‘é€æ•°æ®è¯»å†™æ“ä½œæ—¶ï¼Œå®ä¾‹ä¸Šæ²¡æœ‰ç›¸åº”æ•°æ®ï¼Œå®¢æˆ·ç«¯è¦å†ç»™ä¸€ä¸ªæ–°å®ä¾‹å‘é€æ“ä½œæŒ‡ä»¤</p><p>å‡è®¾<code>hash slot</code>é‡æ–°åˆ†é…ï¼Œæ•°æ®ç”±<code>slot 1</code>è¿ç§»åˆ°<code>slot 2</code>ï¼Œå½“å®¢æˆ·ç«¯è®¿é—®æ•°æ®æ—¶ï¼Œå…ˆä»æœ¬åœ°ç¼“å­˜ä¸­è¯»åˆ°<code>slot 1</code>,</p><p>å¦‚æœ<code>slot 1</code>å·²è¿ç§»åˆ°<code>slot 2</code>ï¼Œæ­¤æ—¶å®ä¾‹1å°†è¿”å›<code>Moved 1010 ip:port</code>ï¼Œå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚åˆ°å®ä¾‹2ï¼Œå¹¶æ›´æ–°æœ¬åœ°ç¼“å­˜ï¼›</p><p>å¦‚æœæ­£åœ¨è¿ç§»ä¸­(éƒ¨åˆ†è¿ç§»)ï¼Œå®ä¾‹1å°†è¿”å›å®¢æˆ·ç«¯<code>ASK 100 ip:port</code>ï¼Œ</p><blockquote><p><code>ASK</code>è¡¨ç¤º<code>slot</code>æ•°æ®è¿˜åœ¨è¿ç§»ä¸­ï¼Œæˆ–è€…æŠŠé”è¯·æ±‚çš„æ•°æ®çš„æœ€æ–°å®ä¾‹åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯</p></blockquote><p>æ­¤æ—¶å®¢æˆ·ç«¯å‘æ–°å®ä¾‹å‘é€<code>ASKING</code>,ç„¶åå†å‘æ“ä½œå‘½ä»¤</p><blockquote><p><code>Moved</code>: ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜ï¼Œæ°¸ä¹…å‘æ–°å®ä¾‹å‘è¯·æ±‚</p><p><code>Ask</code>ï¼š ä¸ä¼šæ›´æ–°å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå‘ä¸€æ¬¡è¯·æ±‚ç»™å®ä¾‹</p></blockquote><h4 id="_6-4-å¦‚ä½•æ‰©å®¹-ç¼©å®¹" tabindex="-1"><a class="header-anchor" href="#_6-4-å¦‚ä½•æ‰©å®¹-ç¼©å®¹" aria-hidden="true">#</a> 6.4 å¦‚ä½•æ‰©å®¹/ç¼©å®¹</h4><p>é€šè¿‡å‘½ä»¤<code>redis-cli --cluster</code></p><h4 id="_6-5-ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»" tabindex="-1"><a class="header-anchor" href="#_6-5-ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»" aria-hidden="true">#</a> 6.5 ä»€ä¹ˆæ˜¯å‰¯æœ¬æ¼‚ç§»</h4><p>å½“masteræŒ‚åï¼Œåªæœ‰ä¸€ä¸ªä»æœºï¼Œä»å…¶ä»–masterä¸­çš„å¤šä¸ª(&gt;=2)ä»æœºä¸­é€‰ä¸€ä¸ªåšä¸»ä»</p><h4 id="_6-6-ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½" tabindex="-1"><a class="header-anchor" href="#_6-6-ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½" aria-hidden="true">#</a> 6.6 <a href="https://github.com/redis/redis/issues/2576" target="_blank" rel="noopener noreferrer">ä¸ºä»€ä¹ˆæ˜¯16483ä¸ªå“ˆå¸Œæ§½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><ul><li><p>å¦‚æœæ›´å¤š: Rediså‘é€å¿ƒè·³åŒ…æ‰€æœ‰æ§½ä¿¡æ¯ï¼Œä½¿ç”¨16383Kä¸ªä¼šäº§ç”Ÿ2kbçš„æ–‡ä»¶ï¼Œæ›´èŠ‚çœç©ºé—´ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒRedisé›†ç¾¤ä¸ä¼šè¶…è¿‡1000ä¸ªï¼Œ16384ä¸ªæ§½ä½è¶³å¤Ÿç”¨</p></li><li><p>å¦‚æœæ›´å°‘: 8192ä¸ªï¼ŒèŠ‚çœçš„ç©ºé—´ä¸å¤šï¼Œä¸”å“ˆå¸Œå†²çªå¤§</p></li></ul><h3 id="_7-redisä¸ºä»€ä¹ˆå¿«" tabindex="-1"><a class="header-anchor" href="#_7-redisä¸ºä»€ä¹ˆå¿«" aria-hidden="true">#</a> 7. Redisä¸ºä»€ä¹ˆå¿«</h3><p><img src="https://pbs.twimg.com/media/FMx3JZRUYAIWWKq?format=jpg&amp;name=4096x4096" alt=""></p><h4 id="_7-1-åŸºäºå†…å­˜å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#_7-1-åŸºäºå†…å­˜å­˜å‚¨" aria-hidden="true">#</a> 7.1 åŸºäºå†…å­˜å­˜å‚¨</h4><p>å†…å­˜è¯»å†™ä¼˜äºç£ç›˜</p><h4 id="_7-2-çº¿ç¨‹æ¨¡å‹-å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-2-çº¿ç¨‹æ¨¡å‹-å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨" aria-hidden="true">#</a> 7.2 çº¿ç¨‹æ¨¡å‹(å•çº¿ç¨‹ã€å¤šè·¯å¤ç”¨)</h4><p>Redisçš„ç½‘ç»œIOå’Œé”®å€¼å¯¹è¯»å†™æ—¶å•çº¿ç¨‹çš„ï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„å¼€é”€ï¼Œé‡‡ç”¨äº†<strong>å¤šè·¯å¤ç”¨æœºåˆ¶</strong></p><blockquote><p>å¤šè·¯å¤ç”¨</p></blockquote><h4 id="_7-3-é«˜æ•ˆçš„æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_7-3-é«˜æ•ˆçš„æ•°æ®ç»“æ„" aria-hidden="true">#</a> 7.3 é«˜æ•ˆçš„æ•°æ®ç»“æ„</h4><h3 id="_8-redisåªæœ‰å•çº¿ç¨‹å—" tabindex="-1"><a class="header-anchor" href="#_8-redisåªæœ‰å•çº¿ç¨‹å—" aria-hidden="true">#</a> 8. Redisåªæœ‰å•çº¿ç¨‹å—ï¼Ÿ</h3><p>Redisä¸­çš„ç½‘ç»œIOï¼Œé”®å€¼å¯¹è¯»å†™æ˜¯å•çº¿ç¨‹ï¼ŒRDBã€AOFç­‰æ˜¯å…¶ä»–çº¿ç¨‹ï¼Œ</p><p>Redis6.0 åé‡‡ç”¨ç½‘ç»œI/Oå¤šçº¿ç¨‹å‡ºé‡Œç½‘ç»œè¯·æ±‚ï¼Œå¯¹äºé”®å€¼å¯¹è¯»å†™ä»æ˜¯å•çº¿ç¨‹</p><h3 id="_9-redis6-0å’Œ7-0çš„æ–°ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#_9-redis6-0å’Œ7-0çš„æ–°ç‰¹æ€§" aria-hidden="true">#</a> 9. Redis6.0å’Œ7.0çš„æ–°ç‰¹æ€§</h3><h3 id="_10-ç¼“å­˜å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_10-ç¼“å­˜å¼‚å¸¸" aria-hidden="true">#</a> 10. ç¼“å­˜å¼‚å¸¸</h3><h4 id="_10-1-ç¼“å­˜é›ªå´©" tabindex="-1"><a class="header-anchor" href="#_10-1-ç¼“å­˜é›ªå´©" aria-hidden="true">#</a> 10.1 ç¼“å­˜é›ªå´©</h4><p>çªç„¶é—´å¤§é‡çš„keyå¤±æ•ˆï¼Œæˆ–è€…redisé‡å¯ï¼Œå¤§é‡çš„è¯·æ±‚æ‰“åˆ°æ•°æ®åº“</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>keyè®¾ç½®å‡åŒ€çš„è¿‡æœŸæ—¶é—´</li><li>rediså®•æœºçš„æƒ…å†µï¼Œè¦é‡‡ç”¨é«˜å¯ç”¨æ–¹æ¡ˆ</li></ul><h4 id="_10-2-ç¼“å­˜å‡»ç©¿" tabindex="-1"><a class="header-anchor" href="#_10-2-ç¼“å­˜å‡»ç©¿" aria-hidden="true">#</a> 10.2 ç¼“å­˜å‡»ç©¿</h4><p>æŸä¸ªçƒ­ç‚¹keyè¿‡æœŸçš„ç¬é—´ï¼Œå¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>æ°¸ä¸è¿‡æœŸ</li><li>äº’æ–¥é”æ–¹æ¡ˆï¼Œåœ¨å¤±æ•ˆæ—¶ä¸ç«‹å³åŠ è½½æ•°æ®åº“ï¼Œ è€Œæ˜¯ä½¿ç”¨<code>setnx</code>ç­‰æˆåŠŸçš„æ—¶å€™åŠ è½½ç¼“å­˜å’Œæ•°æ®åº“</li></ul><h4 id="_10-3-ç¼“å­˜ç©¿é€" tabindex="-1"><a class="header-anchor" href="#_10-3-ç¼“å­˜ç©¿é€" aria-hidden="true">#</a> 10.3 ç¼“å­˜ç©¿é€</h4><p>æŸ¥è¯¢ä¸å­˜åœ¨çš„key,æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨(ç©¿é€åˆ°æ•°æ®åº“)ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›è¿‡å¤§ç”šè‡³å®•æœº</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ul><li>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼ˆç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼‰ï¼ŒttlçŸ­äº›æˆ–è€…æœ‰æ•°æ®æ—¶åˆ é™¤ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å¤ªå¤šç©ºå€¼å ç”¨ç©ºé—´</li><li>å¼•å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸å­˜åœ¨åˆ™è¿”å›</li></ul><h4 id="_10-4-bigkey" tabindex="-1"><a class="header-anchor" href="#_10-4-bigkey" aria-hidden="true">#</a> 10.4 <code>BigKey</code></h4><h4 id="_10-5-hotkey" tabindex="-1"><a class="header-anchor" href="#_10-5-hotkey" aria-hidden="true">#</a> 10.5 <code>HotKey</code></h4><h3 id="_11-ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§" tabindex="-1"><a class="header-anchor" href="#_11-ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§" aria-hidden="true">#</a> 11. ç¼“å­˜å’Œæ•°æ®åº“çš„ä¸€è‡´æ€§</h3><blockquote><p>ğŸ‘ğŸ»<a href="https://mp.weixin.qq.com/s/4W7vmICGx6a_WX701zxgPQ" target="_blank" rel="noopener noreferrer">ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§é—®é¢˜ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç¼“å­˜å¸¸ç”¨çš„è¯»å†™æ¨¡å¼æ˜¯æ—è·¯ç¼“å­˜: å…ˆè¯»ç¼“å­˜ï¼Œæ²¡æœ‰æ—¶å†è¯»æ•°æ®åº“</p></blockquote><ul><li><p>å»¶æ—¶åŒåˆ </p><p>æ›´æ–°æ—¶å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼Œç­‰ä¸€æ®µæ—¶é—´åå†åˆ é™¤ç¼“å­˜ã€‚ä½†æ˜¯éœ€è¦è¯„ä¼°å»¶æ—¶å¤šä¹…ï¼Œåœ¨åˆ†å¸ƒå¼é«˜å¹¶å‘æƒ…å†µä¸‹å¾ˆéš¾è¯„ä¼°</p></li><li><p>å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—</p><p>å…ˆæ›´æ–°æ•°æ®åº“ï¼ŒMySQLäº§ç”Ÿ<code>binlog</code>,ä½¿ç”¨Canalè®¢é˜…<code>binlog</code>ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°MQï¼Œé€šè¿‡ackå¼‚æ­¥é‡è¯•ä¿è¯åˆ é™¤ç¼“å­˜</p></li></ul><h3 id="_12-åŸºäºredisçš„åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_12-åŸºäºredisçš„åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> 12. åŸºäºRedisçš„åˆ†å¸ƒå¼é”</h3><h4 id="_12-1-sexnx-lock-val-del-lock" tabindex="-1"><a class="header-anchor" href="#_12-1-sexnx-lock-val-del-lock" aria-hidden="true">#</a> 12.1 <code>sexnx lock val / del lock</code></h4><p>å¦‚æœè§£é”å¼‚å¸¸ï¼Œä¼šå‘ç”Ÿæ­»é” =&gt; è®¾ç½®è¿‡æœŸæ—¶é—´</p><h4 id="_12-2-setnx-lock-val-expire-lock-n" tabindex="-1"><a class="header-anchor" href="#_12-2-setnx-lock-val-expire-lock-n" aria-hidden="true">#</a> 12.2 <code>setnx lock val / expire lock n</code></h4><p>ä¸èƒ½ä¿è¯åŸå­æ€§</p><h4 id="_12-3-set-lock-uuid-ex-n-nx-lua-get-del" tabindex="-1"><a class="header-anchor" href="#_12-3-set-lock-uuid-ex-n-nx-lua-get-del" aria-hidden="true">#</a> 12.3 <code>set lock $uuid ex n nx / lua:get+del</code></h4><p>é”çš„æ—¶é—´ä¸å¥½è¯„ä¼° =&gt; å¢åŠ å®ˆæŠ¤è¿›ç¨‹ç»­æœŸ</p><h4 id="_12-4-redisson" tabindex="-1"><a class="header-anchor" href="#_12-4-redisson" aria-hidden="true">#</a> 12.4 <a href="https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8" target="_blank" rel="noopener noreferrer">Redisson<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>é€šè¿‡Luaè„šæœ¬(åŸå­æ€§)ï¼Œå¯¹hash(é”çš„å­˜å‚¨ç»“æ„)è¿›è¡Œå¢å‡(å¯é‡å…¥)ï¼Œé‡‡ç”¨çœ‹é—¨ç‹—æœºåˆ¶è¿›è¡Œç»­æœŸï¼Œé‡Šæ”¾é”æ˜¯é‡‡ç”¨å‘å¸ƒ/è®¢é˜…çš„æ–¹å¼</p><h4 id="_12-5-redlock" tabindex="-1"><a class="header-anchor" href="#_12-5-redlock" aria-hidden="true">#</a> 12.5 <a href="https://github.com/wujunwei/redlock" target="_blank" rel="noopener noreferrer">redlock<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><blockquote><p>å½“å‘ç”Ÿä¸»ä»åˆ‡æ¢æ—¶é”å¤±æ•ˆï¼Œé‡‡ç”¨<code>redlock</code>æ–¹æ¡ˆï¼ˆå‰æ: è‡³å°‘æœ‰5ä¸ªä¸»åº“å®ä¾‹ï¼‰</p></blockquote><p>å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´æˆ³<code>t1</code>ï¼Œä¾æ¬¡å‘5ä¸ªrediså®ä¾‹å‘èµ·åŠ é”è¯·æ±‚ï¼Œä¸”æ¯ä¸ªè¯·æ±‚æœ‰è¶…æ—¶æ—¶é—´ã€‚</p><p>å¦‚æœæŸä¸€ä¸ªå¤±è´¥ï¼Œåˆ™ç«‹å³å‘ä¸‹ä¸€ä¸ªç”³è¯·ï¼›</p><p>å¦‚æœå¤§äºåŠæ•°ä¸ªé”æˆåŠŸï¼Œåˆ™è·å–æ—¶é—´æˆ³<code>t2</code></p><p>åŠ é”ä¸æˆåŠŸæ—¶åˆ™é€šè¿‡luaå‘å…¨éƒ¨èŠ‚ç‚¹å‘èµ·é‡Šæ”¾é”è¯·æ±‚</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1505073336@qq.com">spectred</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.94cd83f3.js" defer></script>
  </body>
</html>
