<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://spectred.github.io/interview/java.html"><meta property="og:title" content="Java"><meta property="og:description" content="Java Documentation (https://docs.oracle.com/en/java/) OpenJDK (https://openjdk.org) 深入理解Java虚拟机 (https://book.douban.com/subject/34907497/) HollisChuang's Blog (http://47.103.21..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-02-05T15:52:06.000Z"><meta property="article:modified_time" content="2023-02-05T15:52:06.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Java","image":[""],"dateModified":"2023-02-05T15:52:06.000Z","author":[]}</script><link rel="icon" href="/logo.jpeg"><title>Java</title><meta name="description" content="Java Documentation (https://docs.oracle.com/en/java/) OpenJDK (https://openjdk.org) 深入理解Java虚拟机 (https://book.douban.com/subject/34907497/) HollisChuang's Blog (http://47.103.21...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-daeac8ef.css" as="style"><link rel="stylesheet" href="/assets/style-daeac8ef.css">
    <link rel="modulepreload" href="/assets/app-ba7221af.js"><link rel="modulepreload" href="/assets/framework-b6120433.js"><link rel="modulepreload" href="/assets/java.html-11a19afc.js"><link rel="modulepreload" href="/assets/java.html-f4fa8238.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.jpeg" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="首页"><span class="font-icon icon iconfont icon-home" style=""></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/interview" class="nav-link active" aria-label="面试"><span class="font-icon icon iconfont icon-emoji" style=""></span>面试<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/java/jvm" class="nav-link" aria-label="☕️JVM"><!---->☕️JVM<!----></a></li><li class="dropdown-item"><a href="/java/magic" class="nav-link" aria-label="🪄魔法"><!---->🪄魔法<!----></a></li><li class="dropdown-item"><a href="/java/concurrent" class="nav-link" aria-label="🛫并发"><!---->🛫并发<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="框架"><span class="title"><span class="font-icon icon iconfont icon-frame" style=""></span>框架</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/frame/gRPC" class="nav-link" aria-label="gRPC"><img class="icon" src="/assets/icons/grpc.ico">gRPC<!----></a></li><li class="dropdown-item"><a href="/frame/dubbo" class="nav-link" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="dropdown-item"><a href="/frame/mybatis" class="nav-link" aria-label="MyBatis"><!---->MyBatis<!----></a></li><li class="dropdown-item"><a href="/frame/netty" class="nav-link" aria-label="Netty"><!---->Netty<!----></a></li><li class="dropdown-item"><a href="/frame/rpc" class="nav-link" aria-label="RPC"><!---->RPC<!----></a></li><li class="dropdown-item"><a href="/frame/spring" class="nav-link" aria-label="Spring"><!---->Spring<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="中间件"><span class="title"><span class="font-icon icon iconfont icon-any" style=""></span>中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/middleware/flink" class="nav-link" aria-label="Flink"><img class="icon" src="/assets/icons/flink.ico">Flink<!----></a></li><li class="dropdown-item"><a href="/middleware/kafka" class="nav-link" aria-label="Kafka"><img class="icon" src="/assets/icons/kafka.ico">Kafka<!----></a></li><li class="dropdown-item"><a href="/middleware/mongodb/" class="nav-link" aria-label="MongoDB"><img class="icon" src="/assets/icons/mongo.ico">MongoDB<!----></a></li><li class="dropdown-item"><a href="/middleware/mysql" class="nav-link" aria-label="MySQL"><img class="icon" src="/assets/icons/mysql.ico">MySQL<!----></a></li><li class="dropdown-item"><a href="/middleware/pulsar" class="nav-link" aria-label="Pulsar"><img class="icon" src="/assets/icons/pulsar.ico">Pulsar<!----></a></li><li class="dropdown-item"><a href="/middleware/redis" class="nav-link" aria-label="Redis"><img class="icon" src="/assets/icons/redis.ico">Redis<!----></a></li><li class="dropdown-item"><a href="/middleware/zookeeper" class="nav-link" aria-label="ZooKeeper"><img class="icon" src="/assets/icons/zookeeper.ico">ZooKeeper<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="云原生"><span class="title"><span class="font-icon icon iconfont icon-mesh" style=""></span>云原生</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/cloud_native/microservices" class="nav-link" aria-label="微服务"><!---->微服务<!----></a></li><li class="dropdown-item"><a href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="CI/CD" class="nav-link"><!---->CI/CD<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="DevOps" class="nav-link"><!---->DevOps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="容器" class="nav-link"><!---->容器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="基础"><span class="title"><span class="font-icon icon iconfont icon-stack" style=""></span>基础</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/base/os" class="nav-link" aria-label="操作系统"><!---->操作系统<!----></a></li><li class="dropdown-item"><a href="/base/network" class="nav-link" aria-label="计算机网络"><!---->计算机网络<!----></a></li><li class="dropdown-item"><a href="/base/compiler" class="nav-link" aria-label="编译原理"><!---->编译原理<!----></a></li><li class="dropdown-item"><a href="/base/alg" class="nav-link" aria-label="数据结构和算法"><!---->数据结构和算法<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="四次元口袋"><span class="title"><span class="font-icon icon iconfont icon-tool" style=""></span>四次元口袋</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/doraemon/tools.html" class="nav-link" aria-label="任意门"><!---->任意门<!----></a></li><li class="dropdown-item"><a href="/doraemon/scripts" class="nav-link" aria-label="脚本集"><!---->脚本集<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Spectred/spectred.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Java</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-02-05T15:52:06.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 11 分钟</span><meta property="timeRequired" content="PT11M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_1-如何保证线程安全" class="router-link-active router-link-exact-active toc-link level2">1. 如何保证线程安全</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_2-unsafe如果获取-能做哪些操作" class="router-link-active router-link-exact-active toc-link level2">2. Unsafe如果获取，能做哪些操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_3-lambda是如何实现的" class="router-link-active router-link-exact-active toc-link level2">3. lambda是如何实现的</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_4-volatile-关键字" class="router-link-active router-link-exact-active toc-link level2">4. volatile 关键字</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_5-锁优化有哪些技术-自旋-锁消除-锁膨胀" class="router-link-active router-link-exact-active toc-link level2">5. 锁优化有哪些技术?（自旋，锁消除，锁膨胀）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_6-java中线程有哪些状态-各个状态间是如何转换的" class="router-link-active router-link-exact-active toc-link level2">6. Java中线程有哪些状态，各个状态间是如何转换的</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_7-线程池的参数-工作流程-有哪些拒绝策略-如何回收线程" class="router-link-active router-link-exact-active toc-link level2">7. 线程池的参数，工作流程，有哪些拒绝策略，如何回收线程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_8-并行流stream-parallelstream可能有哪些问题" class="router-link-active router-link-exact-active toc-link level2">8. 并行流Stream.parallelStream可能有哪些问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/interview/java.html#_9-什么是内存泄露-什么情况会导致内存泄露-如何解决" class="router-link-active router-link-exact-active toc-link level2">9. 什么是内存泄露，什么情况会导致内存泄露，如何解决</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="java" tabindex="-1"><a class="header-anchor" href="#java" aria-hidden="true">#</a> Java</h1><blockquote><p><a href="https://docs.oracle.com/en/java/" target="_blank" rel="noopener noreferrer">Java Documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://openjdk.org" target="_blank" rel="noopener noreferrer">OpenJDK<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://book.douban.com/subject/34907497/" target="_blank" rel="noopener noreferrer">深入理解Java虚拟机<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="http://47.103.216.138/" target="_blank" rel="noopener noreferrer">HollisChuang&#39;s Blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h2 id="_1-如何保证线程安全" tabindex="-1"><a class="header-anchor" href="#_1-如何保证线程安全" aria-hidden="true">#</a> 1. 如何保证线程安全</h2><blockquote><p>线程安全：当多个线程同时访问一个对象时，如果不用考虑这些线程在运行时环境下的调度和交替执行，也不需要进行额外的同步，或者在调用方进行任何其他的协调操作，调用这个对象的行为都可以获得正确的结果，那就称这个对象是线程安全的</p></blockquote><h3 id="_1-1-互斥同步-阻塞同步" tabindex="-1"><a class="header-anchor" href="#_1-1-互斥同步-阻塞同步" aria-hidden="true">#</a> 1.1 互斥同步(阻塞同步)</h3><ol><li><p><code>synchronized</code></p></li><li><p><code>Lock</code>: 例如<code>ReentrantLock</code></p></li></ol><blockquote><p><code>synchronized</code>和<code>ReentrantLock</code>的区别:</p><ul><li><p><code>synchronized</code>是在Java语法层面的同步，<code>ReentrantLock</code>是Java语言层面，释放锁要确保在<code>finally</code>块中释放锁</p></li><li><p>性能上差不太多，但是两者都可满足需要时优先使用<code>synchronized</code></p></li><li><p><code>ReentrantLock</code>相比<code>synchronized</code>相比增加了一些高级功能:</p></li></ul><p><strong>等待可中断</strong>: 当持有锁的线程长期不释放锁的时候，正在等待的线程可以选择放弃等待，改为处理其他事情</p><p><strong>公平锁</strong>: 多个线程在等待同一个锁时，必须按照申请锁的时间顺序来一次获得锁,<code>ReentrantLock</code>使用公平锁将会导致性能下降</p><p><strong>锁绑定多个条件</strong>: 一个<code>ReentrantLock</code>对象可以同时绑定多个<code>Condition</code>对象,需要多次调用<code>newCondition()</code>，<code>synchronized</code>需要额外添加锁</p></blockquote><h3 id="_1-2-无锁编程-非阻塞同步" tabindex="-1"><a class="header-anchor" href="#_1-2-无锁编程-非阻塞同步" aria-hidden="true">#</a> 1.2 无锁编程(非阻塞同步)</h3><blockquote><p>不管风险，先进行操作，如果没有其他线程争用共享数据，那操作就直接成功；如果共享的数据被争用产生了冲突，最常用的补偿措施是不断地重试，直到出现没有竞争的共享数据为止</p></blockquote><p>基于<code>CAS</code>的操作：</p><ul><li>使用<code>Unsafe.compareAndSet</code>方法，</li><li>基于<code>CAS</code>的<code>j.u.c</code>包中的原子类（<code>AtomicInteger</code>等）</li><li>使用<code>j.u.c</code>中的线程安全的并发集合,如<code>ConcurrentHashMap</code>、<code>ConcurrentSkipListMap</code>、<code>CopyOnWriteArrayList</code></li></ul><blockquote><p><code>CAS</code>操作的<code>ABA</code>问题</p><p>如果一个变量V初次读取的时候是A值，其他线程把它修改为B,又修改回为A,那<code>CAS</code>操作就会误认为它从来没有修改过</p><p>如何解决: 使用版本或者时间戳，例如<code>AtomicStampedReference</code>,但是大部分情况下ABA问题不会影响程序并发的正确性，如果需要解决，传统的互斥同步可能会比原子类更高效</p></blockquote><h3 id="_1-3-无同步方案" tabindex="-1"><a class="header-anchor" href="#_1-3-无同步方案" aria-hidden="true">#</a> 1.3 无同步方案</h3><blockquote><p>同步与线程安全两者没有必然的联系</p></blockquote><p>线程本地存储： 通过<code>ThreadLocal</code>实现</p><blockquote><p>每一个线程的<code>Thread</code>对象中都有一个<code>ThreadLocalMap</code>对象，这个对象存储了一组以<code>ThreadLocal.threadLocalHashCode</code>为键，以本地线程变量为值的<code>K-V</code>键值对，<code>ThreadLocal</code>就是当前线程的<code>ThreadLocalMap</code>的访问入口，每一个<code>ThreadLocal</code>对象都包含一个唯一的<code>threadLocalHashCode</code>值，使用这个值就可以在线程<code>K-V</code>值对中找回对应的本地线程变量</p></blockquote><h2 id="_2-unsafe如果获取-能做哪些操作" tabindex="-1"><a class="header-anchor" href="#_2-unsafe如果获取-能做哪些操作" aria-hidden="true">#</a> 2. <code>Unsafe</code>如果获取，能做哪些操作</h2><blockquote><p><a href="https://spectred.github.io/java/magic/unsafe.html" target="_blank" rel="noopener noreferrer">https://spectred.github.io/java/magic/unsafe.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>可以通过反射来获取<code>Unsafe</code>实例，可以实例化一个类、修改私有属性值、<code>CAS</code>操作、使用堆外内存和锁的<code>park/unpark</code>操作</p><h2 id="_3-lambda是如何实现的" tabindex="-1"><a class="header-anchor" href="#_3-lambda是如何实现的" aria-hidden="true">#</a> 3. <code>lambda</code>是如何实现的</h2><blockquote><p><a href="https://developer.aliyun.com/article/712461" target="_blank" rel="noopener noreferrer">Lambda 底层实现分析<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://stackoverflow.com/questions/29143803/java-lambdas-how-it-works-in-jvm-is-it-oop" target="_blank" rel="noopener noreferrer">Java Lambdas : How it works in JVM &amp; is it OOP?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.infoq.com/articles/Java-8-Lambdas-A-Peek-Under-the-Hood/" target="_blank" rel="noopener noreferrer">Java 8 Lambdas - A Peek Under the Hood<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p><code>lambda</code>引导方法动态生成一个匿名类字节码</p><h2 id="_4-volatile-关键字" tabindex="-1"><a class="header-anchor" href="#_4-volatile-关键字" aria-hidden="true">#</a> 4. <code>volatile</code> 关键字</h2><blockquote><p><a href="https://www.hollischuang.com/archives/2550" target="_blank" rel="noopener noreferrer">再有人问你Java内存模型是什么，就把这篇文章发给他。<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.hollischuang.com/archives/2648" target="_blank" rel="noopener noreferrer">深入理解Java中的volatile关键字<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.hollischuang.com/archives/2673" target="_blank" rel="noopener noreferrer">再有人问你volatile是什么，把这篇文章也发给他。<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="_4-1-先从java内存模型-jmm-java-memory-model-说起" tabindex="-1"><a class="header-anchor" href="#_4-1-先从java内存模型-jmm-java-memory-model-说起" aria-hidden="true">#</a> 4.1 先从Java内存模型(<code>JMM</code>，<code>Java Memory Model</code>)说起</h3><p>Java内存模型规定所有的变量都存储在主内存，每条线程有自己的工作内存。</p><p>线程的工作内存中保存了被该线程使用的变量的主内存副本，线程对变量的所有操作(读取、赋值等)都必须在工作内存中进行，而不能直接读写主内存中的数据。</p><p>不同的线程之间也无法直接访问对方工作内存中的变量，线程间变量值的传递均需要通过主内存来完成</p><h3 id="_4-2-volatile有哪些作用" tabindex="-1"><a class="header-anchor" href="#_4-2-volatile有哪些作用" aria-hidden="true">#</a> 4.2 <code>volatile</code>有哪些作用</h3><p>当一个变量被定义成<code>volatile</code>之后会具备<strong>可见性</strong>和<strong>有序性</strong>两项特性</p><ul><li><p><strong>可见性</strong></p><p>当一条线程修改了这个变量的值，新值对于其他线程来说是可以立即得知的。但是不能保证原子性，不是线程安全的</p><blockquote><p><code>synchronized</code>和<code>final</code>关键字也保证了可见性</p><ul><li><code>synchronized</code>： 对一个变量执行<code>unlock</code>操作之前，必须先把此变量同步回主内存中</li><li><code>final</code>： 被<code>final</code>修饰的字段在构造器中一旦被初始化完成，并且构造器没有吧<code>this</code>的引用传递出去，那么其他线程就可以看见<code>final</code>字段的值</li></ul></blockquote></li><li><p><strong>有序性</strong> (禁止指令重排序优化)</p><p>有序性即程序执行的顺序按照代码的先后顺序执行</p><p>如果在本线程内观察，所有的操作都是有序的；如果在一个线程观察另一个线程，所有的操作都是无序的</p><blockquote><p><code>synchronized</code>也可以保证有序性: 通过 一个变量在同一个时刻只允许一条线程对其进行<code>lock</code>操作规则获得</p></blockquote></li></ul><h3 id="_4-3-volatile如何实现可见性和有序性的-实现的原理是什么" tabindex="-1"><a class="header-anchor" href="#_4-3-volatile如何实现可见性和有序性的-实现的原理是什么" aria-hidden="true">#</a> 4.3 <code>volatile</code>如何实现可见性和有序性的(实现的原理是什么)?</h3><p>可见性: 被其修饰的变量在被修改后可以立即同步到主内存，被其修饰的变量在每次是用之前都从主内存刷新</p><p>有序性: 禁止指令重排序优化,内存屏障</p><h3 id="_4-4-什么是happens-before-先行发生-原则" tabindex="-1"><a class="header-anchor" href="#_4-4-什么是happens-before-先行发生-原则" aria-hidden="true">#</a> 4.4 什么是<code>Happens-Before</code>(先行发生)原则</h3><p>先行发生是Java内存模型中定义的两项操作之间的偏序关系</p><ul><li><code>volatile</code>变量规则: 被其修饰的变量的写操作先发生于读操作</li><li>程序次序规则: 在一个线程内，按照控制流顺序，前面的操作先发生在书写在后边的操作</li><li>线程启动规则、线程终止规则、线程中断规则、对象终结规则、传递性</li></ul><h2 id="_5-锁优化有哪些技术-自旋-锁消除-锁膨胀" tabindex="-1"><a class="header-anchor" href="#_5-锁优化有哪些技术-自旋-锁消除-锁膨胀" aria-hidden="true">#</a> 5. 锁优化有哪些技术?（自旋，锁消除，锁膨胀）</h2><h3 id="_5-1-自旋锁与自适应自旋" tabindex="-1"><a class="header-anchor" href="#_5-1-自旋锁与自适应自旋" aria-hidden="true">#</a> 5.1 自旋锁与自适应自旋</h3><p><strong>自旋</strong>: 如果有两个或两个以上的线程同时执行，让后面请求锁的线程&quot;稍等一会&quot;，但不放弃处理器的执行时间，看看持有锁的线程是否很快会释放锁。为了让线程等待，需要让线程执行一个忙循环(自旋)</p><p>如果锁被占用的时间很长，自旋的线程只会白白消耗处理器资源，带来性能的浪费，如果自旋超过了限定的次数仍然没有成功获得锁，就应当使用传统的方式挂起线程。自旋次数默认是10次，通过<code>-XX:PreBlockSpin</code>来指定</p><p><strong>自适应自旋</strong>: 自旋的时间不固定，而是由上一次在同一个锁上的自旋时间和锁的拥有者状态来决定的</p><blockquote><p>如果上一次很快获得锁，那么再次获锁时可以等上很多次；如果上一次很少成功获锁，那么再次获锁时有可能直接忽略掉自旋，避免处理器资源浪费</p></blockquote><h3 id="_5-2-锁消除" tabindex="-1"><a class="header-anchor" href="#_5-2-锁消除" aria-hidden="true">#</a> 5.2 锁消除</h3><p>锁消除是指虚拟机即时编译器在运行时，对一些代码要求同步，但是对被检测到不可能存在共享数据竞争的锁进行消除</p><p>锁消除的主要判断依据来源于<strong>逃逸分析</strong>的数据支持，如果判断代码中，在堆上的所有数据都不会逃逸出去被其他线程访问到，那就可以把他们当做是栈上的数据进行对待，认为是线程私有的，同步加锁也就无需再进行</p><h3 id="_5-3-锁膨胀-锁升级" tabindex="-1"><a class="header-anchor" href="#_5-3-锁膨胀-锁升级" aria-hidden="true">#</a> 5.3 锁膨胀(锁升级)</h3><p>锁膨胀是通过对象头中的<code>MarkWord</code>的锁标志位实现的</p><p>当使用<code>synchronized</code>时，（如果没有使用，处于<strong>无锁</strong>状态），</p><ul><li><p><strong>偏向锁</strong>（01）: 锁会偏向第一个获得它的线程，如果在接下来的执行过程中，该锁一直没有被其他的线程获取，则持有<strong>偏向锁</strong>的线程将永远不需要进行同步，</p></li><li><p><strong>轻量锁</strong>（00）: 偏向锁时被另一个线程访问，升级为轻量锁，此线程会自旋获锁，不会阻塞</p></li><li><p><strong>重量锁</strong>（10）: 轻量锁时，自旋的线程自旋一定次数后还没有获锁，进入阻塞升级为重量锁，阻塞其他线程，性能降低</p></li></ul><h2 id="_6-java中线程有哪些状态-各个状态间是如何转换的" tabindex="-1"><a class="header-anchor" href="#_6-java中线程有哪些状态-各个状态间是如何转换的" aria-hidden="true">#</a> 6. Java中线程有哪些状态，各个状态间是如何转换的</h2><blockquote><p>在<code>java.lang.Thread.State</code>中定义了6种线程状态，在任意一个时间点，一个线程只能有且只有其中的一种状态，并且可以通过特定的方法在不同状态之间转换</p></blockquote><ul><li><p><code>NEW</code> 新建</p><p>创建后尚未启动的线程处于这种状态</p></li><li><p><code>RUNNABLE</code> 运行</p><p><code>Thread#start()</code>包括操作系统线程状态中的<code>Running</code>和<code>Ready</code>,处于此状态的线程有可能正在执行，也有可能正在等待着操作系统为它分配执行时间</p></li><li><p><code>WAITING</code> 无限期等待</p><p>处于这中状态的线程不会被分配处理器执行时间，他们要等待被其他线程显示唤醒,<code>Object::wait()</code>,<code>Thread.join()</code>,<code>LockSupport::park()</code></p></li><li><p><code>TIMED_WAITING</code> 限期等待</p><p>处于这种状态的线程也不会被分配处理器执行时间，不过无需等待被其他线程显式唤醒，在一定时间之后他们会由系统自动唤醒</p></li></ul><p>​ <code>Thread.sleep， Object.wait with timeout， Thread.join with timeout，LockSupport.parkNanos， LockSupport.parkUntil</code></p><ul><li><p><code>BLOCKED</code> 阻塞</p><p>线程被阻塞，<code>synchronized</code></p></li><li><p><code>TERMINATED</code> 结束</p><p>线程已结束执行</p></li></ul><h2 id="_7-线程池的参数-工作流程-有哪些拒绝策略-如何回收线程" tabindex="-1"><a class="header-anchor" href="#_7-线程池的参数-工作流程-有哪些拒绝策略-如何回收线程" aria-hidden="true">#</a> 7. 线程池的参数，工作流程，有哪些拒绝策略，如何回收线程</h2><blockquote><p><code>java.util.concurrent.ThreadPoolExecutor</code></p></blockquote><ul><li><p><code>corePoolSize</code>核心线程数，</p></li><li><p><code>maximumPoolSize</code>最大线程数，</p></li><li><p><code>keepAliveTime</code>+<code>unit</code>： 如果一个线程处于闲置(<code>idle</code>)状态并且当前的线程数量大于核心线程数，在指定时间后这个线程会被销毁</p></li><li><p><code>workQueue</code> 在执行任务之前保存任务的队列</p></li><li><p><code>threadFactory</code> 创建一个新线程时使用的工厂，可以用来设定线程名、是否为daemon线程等</p></li><li><p><code>rejectedExecutionHandler</code> 拒绝策略，有4种: 抛出异常，直接丢弃(不抛异常），丢弃任务队列中等待时间最长的，谁提交任务谁来执行这个任务</p></li></ul><p><strong>工作流程</strong></p><p>如果当前线程数量小于核心线程就创建核心线程，如果大于核心线程数就放到工作队列中，如果工作队列满了并且小于最大线程数，就创建非核心线程，如果大于最大线程数就采取拒绝策略</p><p><strong>如何回收线程</strong></p><p>线程池中的线程分为核心线程和非核心线程，核心线程常驻线程池，当工作任务队列满时，将会创建非核心线程来处理任务，当任务处理完成后，在一定时间内空闲的线程需要被回收，需要用到工作任务队列-阻塞队列中的<code>workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS)</code>方法，如果返回<code>null</code>则可以进行回收(调用<code>Thread#interrupt()</code>)</p><p>默认情况下只会回收非核心线程，当<code>allowCoreThreadTimeOut</code>为<code>true</code>时也会回收核心线程，一般不要回收核心线程</p><h2 id="_8-并行流stream-parallelstream可能有哪些问题" tabindex="-1"><a class="header-anchor" href="#_8-并行流stream-parallelstream可能有哪些问题" aria-hidden="true">#</a> 8. 并行流<code>Stream.parallelStream</code>可能有哪些问题</h2><p><code>Stream.parallelStream</code>默认是通过<code>ForkJoinPool.commonPool</code>线程池来实现的，将流分为多个子流到不同的CPU中处理然后合并处理结果</p><p>可能产生的问题: 共享资源的竞争，线程安全，死锁，线程切换，事务等</p><h2 id="_9-什么是内存泄露-什么情况会导致内存泄露-如何解决" tabindex="-1"><a class="header-anchor" href="#_9-什么是内存泄露-什么情况会导致内存泄露-如何解决" aria-hidden="true">#</a> 9. 什么是内存泄露，什么情况会导致内存泄露，如何解决</h2><p>当对象已经不再被使用，但是垃圾回收期不能回收的时候，产生内存泄露</p><p>未引用对象将会被垃圾回收，而引用对象却不会，未引用对象是无用的对象，无用的对象并不都是未引用对象，有一些无用对象有可能是引用对象，这部分是内存泄露的来源</p><p>如果对象A引用对象B。A的生命周期比B的生命周期要长，当B在程序中不再被使用的时候，A仍然引用着B，在这种情况下，垃圾回收器是不会回收对象B的，可能造成内存不足的问题，因为A可能不止引用着B，还可能引用其他生命周期比A短的对象，造成了大量无用对象不能被回收，且占据内存资源，同样B也可能引用其他对象，这些被B对象引用着的对象也不能被垃圾回收器回收，所有的无用对象消耗大量内存</p><p><strong>怎样阻止内存泄露</strong></p><ul><li>使用List Map等集合或者大对象时，使用完成后赋值为null</li><li>避免死循环创建或对集合添加元素</li><li>及时关闭打开的文件等</li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Spectred/spectred.github.io/edit/main/src/interview/java.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1505073336@qq.com">spectred</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><img src="https://v2.jinrishici.com/one.svg?font-size=14&spacing=2&color=SkyBlue" alt="今日诗词API"></div><!----></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-ba7221af.js" defer></script>
  </body>
</html>
