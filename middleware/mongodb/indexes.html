<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="logo.jpeg"><title>MongoDB - ç´¢å¼• | å­¦ä¹ ç¬”è®°</title><meta name="description" content="âœğŸ»å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œç«™åœ¨å²¸ä¸Šå­¦ä¸ä¼šæ¸¸æ³³ã€‚æ³‰æ°´æŒ‘ä¸å¹²ï¼ŒçŸ¥è¯†å­¦ä¸å®Œ">
    <link rel="modulepreload" href="/assets/app.94cd83f3.js"><link rel="modulepreload" href="/assets/indexes.html.fd9cf3d3.js"><link rel="modulepreload" href="/assets/indexes.html.ece7701e.js"><link rel="prefetch" href="/assets/index.html.71eb020f.js"><link rel="prefetch" href="/assets/index.html.fbaf26e3.js"><link rel="prefetch" href="/assets/index.html.b9e4ba9d.js"><link rel="prefetch" href="/assets/x.html.3a9e5e82.js"><link rel="prefetch" href="/assets/index.html.62c5cad4.js"><link rel="prefetch" href="/assets/distributed.html.f131bd4a.js"><link rel="prefetch" href="/assets/dubbo.html.c42471d3.js"><link rel="prefetch" href="/assets/java.html.deb3e07a.js"><link rel="prefetch" href="/assets/jvm.html.fe73eb41.js"><link rel="prefetch" href="/assets/kafka.html.8d53552b.js"><link rel="prefetch" href="/assets/microservices.html.c6889d81.js"><link rel="prefetch" href="/assets/mybatis.html.79562dd3.js"><link rel="prefetch" href="/assets/mysql.html.cbaa6932.js"><link rel="prefetch" href="/assets/project.html.2552e28a.js"><link rel="prefetch" href="/assets/redis.html.72e8f2b1.js"><link rel="prefetch" href="/assets/spring.html.4b3357ee.js"><link rel="prefetch" href="/assets/index.html.cd286c3d.js"><link rel="prefetch" href="/assets/index.html.c99c6c4b.js"><link rel="prefetch" href="/assets/class1.html.793065ce.js"><link rel="prefetch" href="/assets/class2.html.bac3cdc9.js"><link rel="prefetch" href="/assets/index.html.e893d866.js"><link rel="prefetch" href="/assets/array.html.d73ed7e3.js"><link rel="prefetch" href="/assets/complexity.html.c278cefc.js"><link rel="prefetch" href="/assets/linkedlist.html.9de2a1d7.js"><link rel="prefetch" href="/assets/queue.html.a05a8057.js"><link rel="prefetch" href="/assets/recursion.html.99479a46.js"><link rel="prefetch" href="/assets/sort.html.8e73c57c.js"><link rel="prefetch" href="/assets/stack.html.7ec8455e.js"><link rel="prefetch" href="/assets/trietree.html.137d52b4.js"><link rel="prefetch" href="/assets/index.html.7b7e813f.js"><link rel="prefetch" href="/assets/linux.html.64e797fb.js"><link rel="prefetch" href="/assets/index.html.3252d128.js"><link rel="prefetch" href="/assets/started.html.d20bce38.js"><link rel="prefetch" href="/assets/index.html.b80bccee.js"><link rel="prefetch" href="/assets/started.html.202e2f6e.js"><link rel="prefetch" href="/assets/index.html.2b3e12e8.js"><link rel="prefetch" href="/assets/cache.html.22a14e77.js"><link rel="prefetch" href="/assets/config.html.8d60cdf2.js"><link rel="prefetch" href="/assets/started.html.388bf76b.js"><link rel="prefetch" href="/assets/index.html.298cd6e9.js"><link rel="prefetch" href="/assets/components_design.html.6f3ac77e.js"><link rel="prefetch" href="/assets/echo.html.e4fb45a4.js"><link rel="prefetch" href="/assets/io.html.94b26f07.js"><link rel="prefetch" href="/assets/socket.html.97b809a1.js"><link rel="prefetch" href="/assets/sourcecode.html.35d3b0ac.js"><link rel="prefetch" href="/assets/index.html.5642cff9.js"><link rel="prefetch" href="/assets/started.html.06ecce42.js"><link rel="prefetch" href="/assets/index.html.5650f3a2.js"><link rel="prefetch" href="/assets/atomic.html.c3287777.js"><link rel="prefetch" href="/assets/collector.html.e0a2b5fd.js"><link rel="prefetch" href="/assets/jmm.html.62429a45.js"><link rel="prefetch" href="/assets/locks.html.17e1f24a.js"><link rel="prefetch" href="/assets/threads.html.cccfe721.js"><link rel="prefetch" href="/assets/tools.html.5be6df0c.js"><link rel="prefetch" href="/assets/index.html.289ae4b9.js"><link rel="prefetch" href="/assets/unsafe.html.cf9d43fd.js"><link rel="prefetch" href="/assets/index.html.db4d47ed.js"><link rel="prefetch" href="/assets/app.html.d91d3cfd.js"><link rel="prefetch" href="/assets/install.html.c78cd86f.js"><link rel="prefetch" href="/assets/struct.html.a895855a.js"><link rel="prefetch" href="/assets/index.html.c88ed4d7.js"><link rel="prefetch" href="/assets/arch.html.3a439130.js"><link rel="prefetch" href="/assets/backups.html.d3bee46f.js"><link rel="prefetch" href="/assets/cluster.html.3c9a36f6.js"><link rel="prefetch" href="/assets/command.html.96d1a431.js"><link rel="prefetch" href="/assets/monitor.html.0884c305.js"><link rel="prefetch" href="/assets/secure.html.32817460.js"><link rel="prefetch" href="/assets/started.html.f5a7ae95.js"><link rel="prefetch" href="/assets/use.html.e95d4c21.js"><link rel="prefetch" href="/assets/index.html.076891d5.js"><link rel="prefetch" href="/assets/started.html.03b2602e.js"><link rel="prefetch" href="/assets/index.html.08be483b.js"><link rel="prefetch" href="/assets/started.html.e8d12c70.js"><link rel="prefetch" href="/assets/index.html.0e4e3099.js"><link rel="prefetch" href="/assets/ZooKeeper.html.a88c9c03.js"><link rel="prefetch" href="/assets/index.html.9fafefa5.js"><link rel="prefetch" href="/assets/discovery.html.d50fc58a.js"><link rel="prefetch" href="/assets/gateway.html.ffe37822.js"><link rel="prefetch" href="/assets/info.html.c39244ca.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.4e742d23.js"><link rel="prefetch" href="/assets/index.html.73aa5288.js"><link rel="prefetch" href="/assets/index.html.3ee302b9.js"><link rel="prefetch" href="/assets/x.html.fec14a92.js"><link rel="prefetch" href="/assets/index.html.e6aac125.js"><link rel="prefetch" href="/assets/distributed.html.d3719dcf.js"><link rel="prefetch" href="/assets/dubbo.html.079fd885.js"><link rel="prefetch" href="/assets/java.html.83033096.js"><link rel="prefetch" href="/assets/jvm.html.76c64a06.js"><link rel="prefetch" href="/assets/kafka.html.1ffe9f08.js"><link rel="prefetch" href="/assets/microservices.html.c1981abe.js"><link rel="prefetch" href="/assets/mybatis.html.633981ea.js"><link rel="prefetch" href="/assets/mysql.html.4447af64.js"><link rel="prefetch" href="/assets/project.html.fb44bd4c.js"><link rel="prefetch" href="/assets/redis.html.bf6084c9.js"><link rel="prefetch" href="/assets/spring.html.14bd9e82.js"><link rel="prefetch" href="/assets/index.html.4ee2a004.js"><link rel="prefetch" href="/assets/index.html.d6bdd141.js"><link rel="prefetch" href="/assets/class1.html.f4f39bba.js"><link rel="prefetch" href="/assets/class2.html.c13d0b8b.js"><link rel="prefetch" href="/assets/index.html.e746bfb0.js"><link rel="prefetch" href="/assets/array.html.d4a3bc2e.js"><link rel="prefetch" href="/assets/complexity.html.cd6ec097.js"><link rel="prefetch" href="/assets/linkedlist.html.21683035.js"><link rel="prefetch" href="/assets/queue.html.d20f7634.js"><link rel="prefetch" href="/assets/recursion.html.30ee1248.js"><link rel="prefetch" href="/assets/sort.html.ee079374.js"><link rel="prefetch" href="/assets/stack.html.0d9359f9.js"><link rel="prefetch" href="/assets/trietree.html.5f9a9643.js"><link rel="prefetch" href="/assets/index.html.e5687090.js"><link rel="prefetch" href="/assets/linux.html.7bb233b4.js"><link rel="prefetch" href="/assets/index.html.aa07d019.js"><link rel="prefetch" href="/assets/started.html.f32153a2.js"><link rel="prefetch" href="/assets/index.html.63d5b5ec.js"><link rel="prefetch" href="/assets/started.html.6ff9624f.js"><link rel="prefetch" href="/assets/index.html.576a386c.js"><link rel="prefetch" href="/assets/cache.html.653c0a71.js"><link rel="prefetch" href="/assets/config.html.b0cfeda3.js"><link rel="prefetch" href="/assets/started.html.db6b5333.js"><link rel="prefetch" href="/assets/index.html.33d9a178.js"><link rel="prefetch" href="/assets/components_design.html.60c81bf5.js"><link rel="prefetch" href="/assets/echo.html.0df92987.js"><link rel="prefetch" href="/assets/io.html.1c4f57eb.js"><link rel="prefetch" href="/assets/socket.html.c52bd2aa.js"><link rel="prefetch" href="/assets/sourcecode.html.da9775cb.js"><link rel="prefetch" href="/assets/index.html.a32be742.js"><link rel="prefetch" href="/assets/started.html.b5b3a550.js"><link rel="prefetch" href="/assets/index.html.8f304fd5.js"><link rel="prefetch" href="/assets/atomic.html.093e6cd0.js"><link rel="prefetch" href="/assets/collector.html.8097d670.js"><link rel="prefetch" href="/assets/jmm.html.063ce5ab.js"><link rel="prefetch" href="/assets/locks.html.b1b40aea.js"><link rel="prefetch" href="/assets/threads.html.c7f3ce08.js"><link rel="prefetch" href="/assets/tools.html.01784e1e.js"><link rel="prefetch" href="/assets/index.html.3002870b.js"><link rel="prefetch" href="/assets/unsafe.html.17bc4713.js"><link rel="prefetch" href="/assets/index.html.af258e94.js"><link rel="prefetch" href="/assets/app.html.90ea067a.js"><link rel="prefetch" href="/assets/install.html.a554fa67.js"><link rel="prefetch" href="/assets/struct.html.fc028613.js"><link rel="prefetch" href="/assets/index.html.6b4c4aeb.js"><link rel="prefetch" href="/assets/arch.html.b1786388.js"><link rel="prefetch" href="/assets/backups.html.0bbd9bc0.js"><link rel="prefetch" href="/assets/cluster.html.1f926ca5.js"><link rel="prefetch" href="/assets/command.html.54debdc2.js"><link rel="prefetch" href="/assets/monitor.html.33507a53.js"><link rel="prefetch" href="/assets/secure.html.45e5ee71.js"><link rel="prefetch" href="/assets/started.html.92ef6148.js"><link rel="prefetch" href="/assets/use.html.34e6a7f6.js"><link rel="prefetch" href="/assets/index.html.45718f32.js"><link rel="prefetch" href="/assets/started.html.5d8e7fd4.js"><link rel="prefetch" href="/assets/index.html.deef9efe.js"><link rel="prefetch" href="/assets/started.html.b80f9c88.js"><link rel="prefetch" href="/assets/index.html.3934bf05.js"><link rel="prefetch" href="/assets/ZooKeeper.html.8f29493c.js"><link rel="prefetch" href="/assets/index.html.04ca7866.js"><link rel="prefetch" href="/assets/discovery.html.96951ab0.js"><link rel="prefetch" href="/assets/gateway.html.fa7d04d2.js"><link rel="prefetch" href="/assets/info.html.64d2a31c.js"><link rel="prefetch" href="/assets/404.html.dd7ae71e.js">
    <link rel="stylesheet" href="/assets/style.f4d22aab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">å­¦ä¹ ç¬”è®°</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview" class="" aria-label="ğŸ˜ˆé¢è¯•"><!--[--><!--]--> ğŸ˜ˆé¢è¯• <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/magic" class="" aria-label="ğŸª„é­”æ³•"><!--[--><!--]--> ğŸª„é­”æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/concurrent" class="" aria-label="ğŸ¦‹å¹¶å‘"><!--[--><!--]--> ğŸ¦‹å¹¶å‘ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frame/gRPC" class="" aria-label="gRPC"><!--[--><!--]--> gRPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/dubbo" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/mybatis" class="" aria-label="MyBatis"><!--[--><!--]--> MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/netty" class="" aria-label="Netty"><!--[--><!--]--> Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/rpc" class="" aria-label="RPC"><!--[--><!--]--> RPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/spring" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/middleware/flink" class="" aria-label="Flink"><!--[--><!--]--> Flink <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/kafka" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mongodb/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mysql" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/pulsar" class="" aria-label="Pulsar"><!--[--><!--]--> Pulsar <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/redis" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/zookeeper" class="" aria-label="ZooKeeper"><!--[--><!--]--> ZooKeeper <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud_native/microservices" class="" aria-label="å¾®æœåŠ¡"><!--[--><!--]--> å¾®æœåŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="CI/CD"><!--[--><!--]--> CI/CD <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="DevOps"><!--[--><!--]--> DevOps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="å®¹å™¨"><!--[--><!--]--> å®¹å™¨ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/architecture" class="" aria-label="æ¶æ„"><!--[--><!--]--> æ¶æ„ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/os" class="" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><!--]--> æ“ä½œç³»ç»Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/network" class="" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><!--]--> è®¡ç®—æœºç½‘ç»œ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/compiler" class="" aria-label="ç¼–è¯‘åŸç†"><!--[--><!--]--> ç¼–è¯‘åŸç† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/alg" class="" aria-label="æ•°æ®ç»“æ„å’Œç®—æ³•"><!--[--><!--]--> æ•°æ®ç»“æ„å’Œç®—æ³• <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/doraemon" class="" aria-label="ç™¾å®ç®±"><!--[--><!--]--> ç™¾å®ç®± <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Spectred/spectred.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/interview" class="" aria-label="ğŸ˜ˆé¢è¯•"><!--[--><!--]--> ğŸ˜ˆé¢è¯• <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="â˜•ï¸Java"><span class="title">â˜•ï¸Java</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java/magic" class="" aria-label="ğŸª„é­”æ³•"><!--[--><!--]--> ğŸª„é­”æ³• <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java/concurrent" class="" aria-label="ğŸ¦‹å¹¶å‘"><!--[--><!--]--> ğŸ¦‹å¹¶å‘ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æ¡†æ¶"><span class="title">æ¡†æ¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frame/gRPC" class="" aria-label="gRPC"><!--[--><!--]--> gRPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/dubbo" class="" aria-label="Dubbo"><!--[--><!--]--> Dubbo <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/mybatis" class="" aria-label="MyBatis"><!--[--><!--]--> MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/netty" class="" aria-label="Netty"><!--[--><!--]--> Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/rpc" class="" aria-label="RPC"><!--[--><!--]--> RPC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frame/spring" class="" aria-label="Spring"><!--[--><!--]--> Spring <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ä¸­é—´ä»¶"><span class="title">ä¸­é—´ä»¶</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/middleware/flink" class="" aria-label="Flink"><!--[--><!--]--> Flink <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/kafka" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mongodb/README.md" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/mysql" class="" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/pulsar" class="" aria-label="Pulsar"><!--[--><!--]--> Pulsar <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/redis" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/middleware/zookeeper" class="" aria-label="ZooKeeper"><!--[--><!--]--> ZooKeeper <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="äº‘åŸç”Ÿ"><span class="title">äº‘åŸç”Ÿ</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud_native/microservices" class="" aria-label="å¾®æœåŠ¡"><!--[--><!--]--> å¾®æœåŠ¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="CI/CD"><!--[--><!--]--> CI/CD <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="DevOps"><!--[--><!--]--> DevOps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="å®¹å™¨"><!--[--><!--]--> å®¹å™¨ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/architecture" class="" aria-label="æ¶æ„"><!--[--><!--]--> æ¶æ„ <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="åŸºç¡€"><span class="title">åŸºç¡€</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/os" class="" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><!--]--> æ“ä½œç³»ç»Ÿ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/network" class="" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><!--]--> è®¡ç®—æœºç½‘ç»œ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/compiler" class="" aria-label="ç¼–è¯‘åŸç†"><!--[--><!--]--> ç¼–è¯‘åŸç† <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/alg" class="" aria-label="æ•°æ®ç»“æ„å’Œç®—æ³•"><!--[--><!--]--> æ•°æ®ç»“æ„å’Œç®—æ³• <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/doraemon" class="" aria-label="ç™¾å®ç®±"><!--[--><!--]--> ç™¾å®ç®± <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/Spectred/spectred.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">MongoDB <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/middleware/mongodb/started.md" class="sidebar-item" aria-label="å¿«é€Ÿå¼€å§‹"><!--[--><!--]--> å¿«é€Ÿå¼€å§‹ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/command.md" class="sidebar-item" aria-label="å‘½ä»¤"><!--[--><!--]--> å‘½ä»¤ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/indexes.md" class="sidebar-item active" aria-label="ç´¢å¼•"><!--[--><!--]--> ç´¢å¼• <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/use.md" class="sidebar-item" aria-label="ä½¿ç”¨"><!--[--><!--]--> ä½¿ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/arch.md" class="sidebar-item" aria-label="æ¶æ„"><!--[--><!--]--> æ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/cluster.md" class="sidebar-item" aria-label="é›†ç¾¤"><!--[--><!--]--> é›†ç¾¤ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/secure.md" class="sidebar-item" aria-label="å®‰å…¨è®¤è¯"><!--[--><!--]--> å®‰å…¨è®¤è¯ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/monitor.md" class="sidebar-item" aria-label="ç›‘æ§"><!--[--><!--]--> ç›‘æ§ <!--[--><!--]--></a><!----></li><li><a href="/middleware/mongodb/backups.md" class="sidebar-item" aria-label="å¤‡ä»½å’Œæ¢å¤"><!--[--><!--]--> å¤‡ä»½å’Œæ¢å¤ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="mongodb-ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#mongodb-ç´¢å¼•" aria-hidden="true">#</a> MongoDB - <a href="https://www.mongodb.com/docs/v4.2/indexes/" target="_blank" rel="noopener noreferrer">ç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h1><p>ç´¢å¼•æ˜¯ä¸€ç§å•ç‹¬çš„ã€ç‰©ç†çš„å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼Œå®ƒæ˜¯æŸä¸ªè¡¨ä¸­ä¸€åˆ—æˆ–è‹¥å¹²åˆ—å€¼çš„é›†åˆå’Œå“åº”çš„æŒ‡å‘è¡¨ä¸­ç‰©ç†æ ‡è¯†è¿™äº›å€¼çš„æ•°æ®é¡µçš„é€»è¾‘æŒ‡é’ˆæ¸…å•ã€‚ç´¢å¼•å¯ä»¥æ ¹æ®ç›®å½•ä¸­çš„é¡µç å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ï¼Œç›®æ ‡æ˜¯æä¾›æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡ï¼Œæ²¡æœ‰ç´¢å¼•æ—¶è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ•°æ®é‡å¤§æ—¶ä¸¥é‡é™ä½æŸ¥è¯¢æ•ˆç‡ã€‚é»˜è®¤MongoDBåœ¨ä¸€ä¸ªé›†åˆåˆ›å»ºæ—¶ï¼Œè‡ªåŠ¨åœ°å¯¹é›†åˆçš„_idåˆ›å»ºäº†å”¯ä¸€ç´¢å¼•</p><h2 id="_1-ç´¢å¼•ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-ç´¢å¼•ç±»å‹" aria-hidden="true">#</a> 1. ç´¢å¼•ç±»å‹</h2><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.coll.createIndex({name:1},{unique:true}) æ¥ä¿æŒå”¯ä¸€æ€§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h3 id="_1-1-å•é”®ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-1-å•é”®ç´¢å¼•" aria-hidden="true">#</a> 1.1 <a href="https://www.mongodb.com/docs/v4.2/core/index-single/" target="_blank" rel="noopener noreferrer">å•é”®ç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><p>æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹ä¸­çš„å•ä¸ªå­—æ®µç´¢å¼•ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–‡æ¡£çš„ä»»ä½•å­—æ®µä¸Šå®šä¹‰</p><p>å¯¹äºå•ä¸ªå­—æ®µç´¢å¼•ï¼Œå› ä¸ºå¯ä»¥åœ¨ä»»æ„æ–¹å‘è¯»å–ç´¢å¼•ï¼Œæ‰€ä»¥ç´¢å¼•é”®çš„é¡ºåºä¸é‡è¦</p><p><strong>å•ä¸ªåˆ—ä¸Šåˆ›å»ºç´¢å¼•</strong></p><p><code>db.coll.createIndex({&quot;å­—æ®µå&quot;:æ’åºæ–¹å¼});</code></p><p>eg. <code>db.coll.createIndex({&quot;name&quot;:1});</code></p><p><strong>æŸ¥çœ‹æœ‰å“ªäº›ç´¢å¼•</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.coll.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
                <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
                <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_id_&quot;</span>,
                <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test.coll&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
                <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
                <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;name_1&quot;</span>,
                <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;test.coll&quot;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¿‡æœŸç´¢å¼•</strong></p><p>è¿‡æœŸç´¢å¼•æ˜¯ç‰¹æ®Šçš„å•é”®ç´¢å¼•ï¼Œå¯ä»¥æ”¯æŒæ–‡æ¡£åœ¨ä¸€å®šæ—¶é—´ä¹‹åè‡ªåŠ¨è¿‡æœŸåˆ é™¤ï¼Œç›®å‰TTLç´¢å¼•åªèƒ½åœ¨å•å­—æ®µå»ºç«‹ï¼Œä¸”å­—æ®µç±»å‹å¿…é¡»æ˜¯æ—¥æœŸç±»å‹</p><p>ä¾‹å¦‚ åœ¨10ç§’ååˆ é™¤æœ‰&quot;birth&quot;å­—æ®µçš„æ•°æ®</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.coll.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;birth&quot;</span>:1<span class="token punctuation">}</span>,<span class="token punctuation">{</span>expireAfterSeconds: <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-2-å¤åˆç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-2-å¤åˆç´¢å¼•" aria-hidden="true">#</a> 1.2 <a href="https://www.mongodb.com/docs/v4.2/core/index-compound/" target="_blank" rel="noopener noreferrer">å¤åˆç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><p>å¤åˆç´¢å¼•æ”¯æŒåŸºäºå¤šä¸ªå­—æ®µçš„ç´¢å¼•ï¼ŒåŒ…æ‹¬å­—æ®µé¡ºåºå’Œç´¢å¼•æ–¹å‘</p><p><code>db.coll.createIndex({&quot;å­—æ®µ1&quot;: æ’åºæ–¹å¼ï¼Œ&quot;å­—æ®µ2&quot;: æ’åºæ–¹å¼})</code></p><h3 id="_1-3-å¤šé”®ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-3-å¤šé”®ç´¢å¼•" aria-hidden="true">#</a> 1.3 <a href="https://www.mongodb.com/docs/v4.2/core/index-multikey/" target="_blank" rel="noopener noreferrer">å¤šé”®ç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><p>é’ˆå¯¹å±æ€§åŒ…å«æ•°ç»„æ•°æ®çš„æƒ…å†µï¼ŒMongoæ”¯æŒé’ˆå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åˆ›å»ºç´¢å¼•ï¼Œå¤šé”®ç´¢å¼•æ”¯æŒstrings,numbers,nested documents</p><h3 id="_1-4-åœ°ç†ç©ºé—´ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-4-åœ°ç†ç©ºé—´ç´¢å¼•" aria-hidden="true">#</a> 1.4 åœ°ç†ç©ºé—´ç´¢å¼•</h3><p><a href="https://www.mongodb.com/docs/v4.2/core/2dsphere/" target="_blank" rel="noopener noreferrer">2dsphereç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œç”¨äºå­˜å‚¨å’ŒæŸ¥æ‰¾<strong>çƒé¢</strong>ä¸Šçš„ç‚¹</p><p><a href="https://www.mongodb.com/docs/v4.2/core/2d/" target="_blank" rel="noopener noreferrer">2dç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œç”¨äºå­˜ä¸ªå’ŒæŸ¥æ‰¾<strong>å¹³é¢</strong>ä¸Šçš„ç‚¹</p><h3 id="_1-5-å“ˆå¸Œç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_1-5-å“ˆå¸Œç´¢å¼•" aria-hidden="true">#</a> 1.5 <a href="https://www.mongodb.com/docs/v4.2/core/index-hashed/" target="_blank" rel="noopener noreferrer">å“ˆå¸Œç´¢å¼•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><p>ä»…æ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢</p><p><code>db.collection.createIndex( { _id: &quot;hashed&quot; } )</code></p><h2 id="_2-ç´¢å¼•ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_2-ç´¢å¼•ç®¡ç†" aria-hidden="true">#</a> 2. ç´¢å¼•ç®¡ç†</h2><h3 id="_2-1-åˆ›å»ºç´¢å¼•å¹¶åœ¨åå°è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_2-1-åˆ›å»ºç´¢å¼•å¹¶åœ¨åå°è¿è¡Œ" aria-hidden="true">#</a> 2.1 åˆ›å»ºç´¢å¼•å¹¶åœ¨åå°è¿è¡Œ</h3><p><code>db.coll.createIndex({&quot;å­—æ®µ&quot;: æ’åºæ–¹å¼},{background: true})</code></p><h3 id="_2-2-è·å–é’ˆå¯¹æŸä¸ªé›†åˆçš„ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_2-2-è·å–é’ˆå¯¹æŸä¸ªé›†åˆçš„ç´¢å¼•" aria-hidden="true">#</a> 2.2 è·å–é’ˆå¯¹æŸä¸ªé›†åˆçš„ç´¢å¼•</h3><p><code>db.coll.getIndexes()</code></p><h3 id="_2-3-ç´¢å¼•çš„å¤§å°" tabindex="-1"><a class="header-anchor" href="#_2-3-ç´¢å¼•çš„å¤§å°" aria-hidden="true">#</a> 2.3 ç´¢å¼•çš„å¤§å°</h3><p><code>db.coll.totalIndexSize()</code></p><h3 id="_2-4-ç´¢å¼•çš„é‡å»º" tabindex="-1"><a class="header-anchor" href="#_2-4-ç´¢å¼•çš„é‡å»º" aria-hidden="true">#</a> 2.4 ç´¢å¼•çš„é‡å»º</h3><p><code>db.coll.reIndex()</code></p><h3 id="_2-5-ç´¢å¼•çš„åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_2-5-ç´¢å¼•çš„åˆ é™¤" aria-hidden="true">#</a> 2.5 ç´¢å¼•çš„åˆ é™¤</h3><p><code>db.coll.dropIndex(&quot;ç´¢å¼•åç§°&quot;)</code></p><p><code>db.coll.dropIndexes()</code></p><h2 id="_3-explain" tabindex="-1"><a class="header-anchor" href="#_3-explain" aria-hidden="true">#</a> 3. <a href="https://www.mongodb.com/docs/v4.2/reference/command/explain/index.html" target="_blank" rel="noopener noreferrer">explain<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><p>æ’å…¥100wæ¡ç¤ºä¾‹æ•°æ®</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">1000000</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    db<span class="token punctuation">.</span>coll<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span>i<span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;test-&quot;</span><span class="token operator">+</span>i<span class="token punctuation">,</span><span class="token literal-property property">salary</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>explain()</code>æ¥æ”¶ä¸åŒçš„å‚æ•°ï¼Œé€šè¿‡è®¾ç½®ä¸åŒå‚æ•°å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„æŸ¥è¯¢è®¡åˆ’</p><ul><li><code>queryPlanner</code> é»˜è®¤å‚æ•°ï¼Œå…·ä½“æ‰§è¡Œè®¡åˆ’ä¿¡æ¯å‚è€ƒä¸‹é¢çš„è¡¨æ ¼</li><li><code>executionStats</code> ä¼šè¿”å›æ‰§è¡Œè®¡åˆ’çš„ä¸€äº›ç»Ÿè®¡ä¿¡æ¯(æœ‰äº›ç‰ˆæœ¬ä¸­å’ŒallPlansExecutionç­‰åŒ)</li><li><code>allPlansExecution</code> ç”¨æ¥è·å–æ‰€æœ‰æ‰§è¡Œè®¡åˆ’ï¼Œç»“æœå‚æ•°åŸºæœ¬ä¸ä¸Šæ–‡ç›¸åŒã€‚</li></ul><h3 id="_3-1-queryplanner" tabindex="-1"><a class="header-anchor" href="#_3-1-queryplanner" aria-hidden="true">#</a> 3.1 queryPlanner</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>coll<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;test-1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;ok&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryPlanner&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;plannerVersion&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;namespace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test.coll&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;indexFilterSet&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parsedQuery&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;$eq&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-1001&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;queryHash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;01AEE5EC&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;planCacheKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4C5AEA2C&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;winningPlan&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputStage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keyPattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isMultiKey&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;multiKeyPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isUnique&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isSparse&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isPartial&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexBounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;[\&quot;test-1001\&quot;, \&quot;test-1001\&quot;]&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rejectedPlans&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;serverInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VM-24-3-centos&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.2.23&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gitVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f4e6602d3a4c5b22e9d8bcf0722d0afd0ec01ea2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-executionstats" tabindex="-1"><a class="header-anchor" href="#_3-2-executionstats" aria-hidden="true">#</a> 3.2 executionStats</h3><p><code>db.coll.find({name:&quot;test-1001&quot;}).explain(&quot;executionStats&quot;)</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;executionStats&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;executionSuccess&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;executionTimeMillis&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;totalKeysExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;totalDocsExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;executionStages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;executionTimeMillisEstimate&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;works&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;advanced&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;needTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;needYield&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;saveState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;restoreState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isEOF&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;docsExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;alreadyHasObj&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputStage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;executionTimeMillisEstimate&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;works&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;advanced&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;needTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;needYield&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;saveState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;restoreState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isEOF&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keyPattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isMultiKey&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;multiKeyPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isUnique&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isSparse&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isPartial&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexBounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;[\&quot;test-1001\&quot;, \&quot;test-1001\&quot;]&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keysExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;seeks&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dupsTested&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dupsDropped&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ok&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryPlanner&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;plannerVersion&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;namespace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test.coll&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;indexFilterSet&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parsedQuery&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;$eq&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-1001&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;winningPlan&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputStage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keyPattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isMultiKey&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;multiKeyPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isUnique&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isSparse&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isPartial&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexBounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;[\&quot;test-1001\&quot;, \&quot;test-1001\&quot;]&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rejectedPlans&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;serverInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VM-24-3-centos&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.2.23&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gitVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f4e6602d3a4c5b22e9d8bcf0722d0afd0ec01ea2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-allplansexecution" tabindex="-1"><a class="header-anchor" href="#_3-3-allplansexecution" aria-hidden="true">#</a> 3.3 allPlansExecution</h3><p><code>db.coll.find({name:&quot;test-1001&quot;}).explain(&quot;allPlansExecution&quot;)</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;executionStats&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;executionSuccess&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;executionTimeMillis&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;totalKeysExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;totalDocsExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;executionStages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;executionTimeMillisEstimate&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;works&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;advanced&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;needTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;needYield&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;saveState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;restoreState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isEOF&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;docsExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;alreadyHasObj&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputStage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;nReturned&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;executionTimeMillisEstimate&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;works&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;advanced&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;needTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;needYield&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;saveState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;restoreState&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isEOF&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keyPattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isMultiKey&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;multiKeyPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isUnique&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isSparse&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isPartial&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexBounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;[\&quot;test-1001\&quot;, \&quot;test-1001\&quot;]&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keysExamined&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;seeks&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dupsTested&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dupsDropped&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allPlansExecution&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ok&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryPlanner&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;plannerVersion&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;namespace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test.coll&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;indexFilterSet&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parsedQuery&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;$eq&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-1001&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;winningPlan&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputStage&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;keyPattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isMultiKey&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;multiKeyPaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isUnique&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isSparse&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;isPartial&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token property">&quot;direction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;indexBounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;[\&quot;test-1001\&quot;, \&quot;test-1001\&quot;]&quot;</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rejectedPlans&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;serverInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VM-24-3-centos&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.2.23&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gitVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f4e6602d3a4c5b22e9d8bcf0722d0afd0ec01ea2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>executionStatsè¿”å›é€å±‚åˆ†æ</p><ul><li><p>ç¬¬ä¸€å±‚ï¼Œæœ€ä¸ºç›´è§‚explainè¿”å›å€¼æ˜¯<strong>executionTimeMillis</strong>å€¼ï¼ŒæŒ‡çš„æ˜¯è¿™æ¡è¯­å¥çš„æ‰§è¡Œæ—¶é—´ï¼Œè¿™ ä¸ªå€¼å½“ç„¶æ˜¯å¸Œæœ›è¶Šå°‘è¶Šå¥½ã€‚ å…¶ä¸­æœ‰3ä¸ªexecutionTimeMillisï¼Œåˆ†åˆ«æ˜¯:</p></li><li><p>executionStats.executionTimeMillis è¯¥queryçš„æ•´ä½“æŸ¥è¯¢æ—¶é—´</p></li><li><p>executionStats.executionStages.executionTimeMillisEstimate è¯¥æŸ¥è¯¢æ£€ç´¢documentè·å¾—æ•°æ®çš„æ—¶é—´</p></li><li><p>executionStats.executionStages.inputStage.executionTimeMillisEstimate è¯¥æŸ¥è¯¢æ‰«ææ–‡æ¡£ indexæ‰€ç”¨æ—¶é—´</p></li><li><p>ç¬¬äºŒå±‚ï¼Œindexä¸documentæ‰«ææ•°ä¸æŸ¥è¯¢è¿”å›æ¡ç›®æ•° è¿™ä¸ªä¸»è¦è®¨è®º3ä¸ªè¿”å›é¡¹ <strong>nReturned</strong>ã€ <strong>totalKeysExamined</strong>ã€<strong>totalDocsExamined</strong>ï¼Œåˆ†åˆ«ä»£è¡¨<strong>è¯¥æ¡æŸ¥è¯¢è¿”å›çš„æ¡ç›®</strong>ã€<strong>ç´¢å¼•æ‰«ææ¡ç›®</strong>ã€<strong>æ–‡æ¡£æ‰«ææ¡ç›®</strong>ã€‚</p></li></ul><p>è¿™äº› éƒ½æ˜¯ç›´è§‚åœ°å½±å“åˆ°executionTimeMillisï¼Œæˆ‘ä»¬éœ€è¦æ‰«æçš„è¶Šå°‘é€Ÿåº¦è¶Šå¿«ã€‚ å¯¹äºä¸€ä¸ªæŸ¥è¯¢ï¼Œæˆ‘ä»¬æœ€ç†æƒ³çš„çŠ¶æ€æ˜¯: nReturned=totalKeysExamined=totalDocsExamined</p><ul><li><p>ç¬¬ä¸‰å±‚ï¼ŒstageçŠ¶æ€åˆ†æ é‚£ä¹ˆåˆæ˜¯ä»€ä¹ˆå½±å“åˆ°äº†totalKeysExaminedå’ŒtotalDocsExamined?æ˜¯stageçš„ç±»å‹ã€‚ ç±»å‹åˆ—ä¸¾å¦‚ä¸‹:</p></li><li><p>COLLSCAN:å…¨è¡¨æ‰«æ</p></li><li><p>IXSCAN:ç´¢å¼•æ‰«æ</p></li><li><p>FETCH:æ ¹æ®ç´¢å¼•å»æ£€ç´¢æŒ‡å®šdocument</p></li><li><p>SHARD_MERGE:å°†å„ä¸ªåˆ†ç‰‡è¿”å›æ•°æ®è¿›è¡Œmerge</p></li><li><p>SORT:è¡¨æ˜åœ¨å†…å­˜ä¸­è¿›è¡Œäº†æ’åº</p></li><li><p>LIMIT:ä½¿ç”¨limité™åˆ¶è¿”å›æ•°</p></li><li><p>SKIP:ä½¿ç”¨skipè¿›è¡Œè·³è¿‡</p></li><li><p>IDHACK:é’ˆå¯¹_idè¿›è¡ŒæŸ¥è¯¢</p></li><li><p>SHARDING_FILTER:é€šè¿‡mongoså¯¹åˆ†ç‰‡æ•°æ®è¿›è¡ŒæŸ¥è¯¢</p></li><li><p>COUNT:åˆ©ç”¨db.coll.explain().count()ä¹‹ç±»è¿›è¡Œcountè¿ç®—</p></li><li><p>TEXT:ä½¿ç”¨å…¨æ–‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ—¶å€™çš„stageè¿”å›</p></li><li><p>PROJECTION:é™å®šè¿”å›å­—æ®µæ—¶å€™stageçš„è¿”å›</p></li></ul><p>å¯¹äºæ™®é€šæŸ¥è¯¢ï¼Œ<strong>å¸Œæœ›</strong>çœ‹åˆ°stageçš„ç»„åˆ(æŸ¥è¯¢çš„æ—¶å€™å°½å¯èƒ½ç”¨ä¸Šç´¢å¼•):</p><ul><li><p>Fetch+IDHACK</p></li><li><p>Fetch+IXSCAN</p></li><li><p>Limit+(Fetch+IXSCAN)</p></li><li><p>PROJECTION+IXSCAN</p></li><li><p>SHARDING_FITER+IXSCAN</p></li></ul><p><strong>ä¸å¸Œæœ›</strong>å¸Œæœ›çœ‹åˆ°åŒ…å«å¦‚ä¸‹çš„stage:</p><ul><li><p>COLLSCAN(å…¨è¡¨æ‰«æ)</p></li><li><p>SORT(ä½¿ç”¨sortä½†æ˜¯æ— index)</p></li><li><p>COUNT ä¸ä½¿ç”¨indexè¿›è¡Œcount)</p></li></ul></blockquote><h2 id="_4-æ…¢æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_4-æ…¢æŸ¥è¯¢" aria-hidden="true">#</a> 4. æ…¢æŸ¥è¯¢</h2><h3 id="_4-1-å¼€å¯å†…ç½®çš„æŸ¥è¯¢åˆ†æå™¨-è®°å½•è¯»å†™æ“ä½œæ•ˆç‡" tabindex="-1"><a class="header-anchor" href="#_4-1-å¼€å¯å†…ç½®çš„æŸ¥è¯¢åˆ†æå™¨-è®°å½•è¯»å†™æ“ä½œæ•ˆç‡" aria-hidden="true">#</a> 4.1 å¼€å¯å†…ç½®çš„æŸ¥è¯¢åˆ†æå™¨ï¼Œè®°å½•è¯»å†™æ“ä½œæ•ˆç‡</h3><p><code>db.setProfilingLevel(n,m)</code></p><p>å…¶ä¸­n:</p><ul><li>0 ä¸è®°å½•</li><li>1 è®°å½•æ…¢æ“ä½œï¼Œæ­¤æ—¶må¿…é¡»èµ‹å€¼å•ä½ä¸ºms,ç”¨äºå®šä¹‰æ…¢æŸ¥è¯¢æ—¶é—´çš„é˜ˆå€¼</li><li>2 è®°å½•æ‰€æœ‰çš„è¯»å†™æ“ä½œ</li></ul><h3 id="_4-2-æŸ¥è¯¢ç›‘æ§ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_4-2-æŸ¥è¯¢ç›‘æ§ç»“æœ" aria-hidden="true">#</a> 4.2 æŸ¥è¯¢ç›‘æ§ç»“æœ</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æŸ¥è¯¢æœ€æ…¢çš„ä¸‰æ¡</span>
db<span class="token punctuation">.</span>system<span class="token punctuation">.</span>profile<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">mills</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-åˆ†ææ…¢æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_4-3-åˆ†ææ…¢æŸ¥è¯¢" aria-hidden="true">#</a> 4.3 åˆ†ææ…¢æŸ¥è¯¢</h3><p>åº”ç”¨ç¨‹åºè®¾è®¡ï¼Œæ•°æ®æ¨¡å‹æ˜¯å¦æ­£ç¡®ï¼Œç¡¬ä»¶é…ç½®ï¼Œç¼ºå°‘ç´¢å¼•</p><h3 id="_4-4-è§£æexplainç»“æœ-ç¡®å®šæ˜¯å¦ç¼ºå°‘ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_4-4-è§£æexplainç»“æœ-ç¡®å®šæ˜¯å¦ç¼ºå°‘ç´¢å¼•" aria-hidden="true">#</a> 4.4 è§£æexplainç»“æœï¼Œç¡®å®šæ˜¯å¦ç¼ºå°‘ç´¢å¼•</h3><h2 id="_5-ç´¢å¼•åŸç†" tabindex="-1"><a class="header-anchor" href="#_5-ç´¢å¼•åŸç†" aria-hidden="true">#</a> 5. ç´¢å¼•åŸç†</h2><p>MongoDBæ˜¯æ–‡æ¡£å‹æ•°æ®åº“ï¼Œé‡‡ç”¨BSONæ ¼å¼ä¿å­˜æ•°æ®ï¼Œå¯ä»¥å°†ä¸€æ¡æ•°æ®å’Œå¯¹åº”çš„æ•°æ®éƒ½å­˜å…¥åˆ°ä¸€ä¸ªBSONå¯¹è±¡ä¸­ã€‚</p><blockquote><p>å®é™…ä¸Šï¼Œå®˜æ–¹æ–‡æ¡£ä¸­ç»™å‡ºçš„æ˜¯B-æ ‘ï¼Œæ˜¯å¹¿ä¹‰ä¸Šçš„Bæ ‘ï¼Œmongoä½¿ç”¨çš„æ˜¯WiredTigerå¼•æ“ï¼Œä½¿ç”¨çš„æ˜¯B+æ ‘å®ç°çš„ MongoDBçš„ç´¢å¼•ä½¿ç”¨<strong>B-æ ‘</strong>ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰DataåŸŸï¼Œåªè¦æ‰¾åˆ°æŒ‡å®šç´¢å¼•å°±å¯ä»¥è¿›è¡Œè®¿é—®ï¼Œå•æ¬¡æŸ¥è¯¢ä»ç»“æ„ä¸Šçœ‹è¦å¿«äºMySQL</p></blockquote><blockquote><p>B-æ ‘çš„ç‰¹ç‚¹ï¼šå¤šå‰æ ‘ã€æ¯ä¸ªèŠ‚ç‚¹å³ä¿å­˜æ•°æ®åˆä¿å­˜ç´¢å¼•ã€æœç´¢æ—¶ç›¸å½“äºäºŒåˆ†æŸ¥æ‰¾</p></blockquote></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1505073336@qq.com">èµ·é£äº†</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.94cd83f3.js" defer></script>
  </body>
</html>
